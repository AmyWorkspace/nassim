{
    "PageTitle": "ip relay giaddr",
    "FuncDef": "The ip relay giaddr command configures a relay agent address in the interface view.\nThe undo ip relay giaddr command deletes the configured relay agent address.\nBy default, the primary IP address of the interface functions as the relay agent address.",
    "CLIs": [
        "ip relay giaddr <ip-address> [ dhcp-option { <code_60> [ <option-text> ] | <code_1to59> | <code_61to254> } ]",
        "undo ip relay giaddr { all | <ip-address> [ dhcp-option { <code_60> [ <option-text> ] | <code_1to59> | <code_61to254> } | all ] }"
    ],
    "ParentView": [
        "PW-VE sub-interface view",
        "40GE interface view",
        "Port extension interface view",
        "GE electrical interface view",
        "Global MP-group interface view",
        "Remote-AP interface view",
        "Serial interface view",
        "Eth-Trunk sub-interface view",
        "50GE sub-interface view",
        "400GE interface view",
        "10GE interface view",
        "MP-group interface view",
        "Trunk serial interface view",
        "GE sub-interface view",
        "VBDIF interface view",
        "VE sub-interface view",
        "25GE sub-interface view",
        "GE interface view",
        "100GE interface view",
        "VLANIF interface view",
        "Vbridge interface view",
        "Global VE sub-interface view",
        "50GE interface view",
        "400GE sub-interface view",
        "GE optical interface view",
        "100ge sub-interface view",
        "25GE interface view",
        "40GE sub-interface view",
        "Eth-Trunk interface view",
        "10GE sub-interface view",
        "POS interface view"
    ],
    "ParaDef": [
        {
            "Parameters": "ip-address",
            "Info": "Specifies the IP address of a relay agent. A maximum of 256 relay agent addresses can be configured for each relay interface.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "dhcp-option code_60",
            "Info": "Indicates DHCP Option 60. The Option 60 field carries the vendor identifier. A maximum of 100 Option 60 fields carrying different vendor identifiers can be configured to identify clients. The vendor identifier is configured based on that used on clients.\nThe value is an integer 60."
        },
        {
            "Parameters": "option-text",
            "Info": "Specifies the Option 60 content.\nThe value is a string of 1 to 128 characters."
        },
        {
            "Parameters": "code_1to59",
            "Info": "Specifies a DHCP option ID.\nThe value is an integer ranging from 1 to 59."
        },
        {
            "Parameters": "code_61to254",
            "Info": "Specifies a DHCP option ID.\nThe value is an integer ranging from 61 to 254."
        },
        {
            "Parameters": "all",
            "Info": "Indicates either of the following:\nIf ip-address is not specified, all relay agent addresses on the interface are deleted.If ip-address is specified, all configurations of the specified relay agent address are deleted.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip relay giaddr 1.1.1.1"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip relay giaddr 1.1.1.1 dhcp-option 12"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip relay giaddr 1.1.1.1 dhcp-option 60 abc"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nAfter a DHCP relay agent receives a DHCP Request message, it fills in the giaddr field with a relay agent address based on the association between DHCP options and relay agent addresses. The DHCP server then assigns IP addresses of different network segments to clients based on the relay agent address in the field.\nThe relay agent address can be either the primary or secondary IP address of the relay interface. If you configure an IP address other than the primary or secondary IP address, DHCP clients may not obtain IP addresses properly. A maximum of 255 secondary IP addresses can be configured for an interface, and therefore, a maximum of 256 relay agent addresses can be configured. If no relay agent address is associated with a DHCP option, the primary IP address is used as the relay agent address by default.\nOne relay agent address can be associated with many DHCP options, but one DHCP option can be associated with only one relay agent address.\nConfiguration Impact\nA DHCP relay interface searches for a relay agent address based on DHCP options in the following ways:\nIf a DHCP message carries multiple DHCP options and these DHCP options have matching relay agent addresses, the relay agent address mapped to the DHCP option with the largest number is used.If DHCP Option 60 is specified and a character string is configured for Option 60, the relay agent address mapped to Option 60 with the character string is preferred. If no matching relay agent address is found, the relay agent address mapped to Option 60 without a character string is used.If no relay agent addresses map DHCP options, a relay agent address that is not mapped to any DHCP options is used.If no relay agent address is configured, the primary IP address of the relay interface is used as the relay agent address by default."
}