{
    "PageTitle": "mac-address bridge-domain",
    "FuncDef": "The mac-address blackhole bridge-domain command specifies a static blackhole MAC address entry in a bridge domain (BD).\nThe undo mac-address blackhole bridge-domain command deletes a static blackhole MAC address entry from a bridge domain.\nThe mac-address static bridge-domain command specifies a static MAC address used to forward packets in a bridge domain (BD).\nThe undo mac-address static bridge-domain command deletes a static MAC address used to forward packets in a bridge domain.\nBy default, no static blackhole MAC address entry or static MAC address entry is configured.",
    "CLIs": [
        "mac-address blackhole mac-address bridge-domain <bd-id>",
        "mac-address static mac-address { <interface-type> <interface-number> | <interface-name> } bridge-domain <bd-id> { untag | default | vid <pe-vid> [ ce-vid { ce-vid | default } ] }",
        "undo mac-address blackhole { mac-address bridge-domain <bd-id> | bridge-domain <bd-id> }",
        "undo mac-address { mac-address bridge-domain <bd-id> | bridge-domain <bd-id> | static { bridge-domain <bd-id> | mac-address { <interface-type> <interface-number> | <interface-name> } bridge-domain <bd-id> } }"
    ],
    "ParentView": [
        "System view"
    ],
    "ParaDef": [
        {
            "Parameters": "mac-address",
            "Info": "Specifies a destination MAC address.\nThe value is a 12-digit hexadecimal number, in the format of H-H-H. Each H is 4 digits. If an H contains fewer than 4 digits, the left-most digits are padded with zeros. For example, e0 is displayed as 00e0. The MAC address cannot be set to FFFF-FFFF-FFFF or a multicast address starting with 01."
        },
        {
            "Parameters": "bd-id",
            "Info": "Specifies the ID of a bridge domain to which an outbound interface belongs.\nThe value is an integer ranging from 1 to 16777215."
        },
        {
            "Parameters": "interface-type",
            "Info": "Specifies the interface type.\n-"
        },
        {
            "Parameters": "interface-number",
            "Info": "Specifies the interface number.\nThe value is a string of 1 to 47 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "interface-name",
            "Info": "Specifies the interface name.\nThe value is a string of 1 to 47 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "untag",
            "Info": "Enables untagged encapsulation on an EVC Layer 2 sub-interface.\n-"
        },
        {
            "Parameters": "default",
            "Info": "Enables default encapsulation on an EVC Layer 2 sub-interface.\n-"
        },
        {
            "Parameters": "vid pe-vid",
            "Info": "Specifies the outer tag carried in packets that an EVC Layer 2 sub-interface receives.\nThe value is an integer ranging from 1 to 4096."
        },
        {
            "Parameters": "ce-vid ce-vid",
            "Info": "Specifies the inner tag carried in packets that an EVC Layer 2 sub-interface receives.\nThis parameter is configured only when QinQ encapsulation is used on an EVC Layer 2 sub-interface.\nThe value is an integer ranging from 1 to 4096."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] bridge-domain 10",
            "[*HUAWEI-bd10] quit",
            "[*HUAWEI] mac-address blackhole 00e0-fc12-3456 bridge-domain 10"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] bridge-domain 10",
            "[*HUAWEI-bd10] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/1.1 mode l2",
            "[*HUAWEI-GigabitEthernet 1/0/1.1] bridge-domain 10",
            "[*HUAWEI-GigabitEthernet 1/0/1.1] encapsulation qinq vid 10 ce-vid 100",
            "[*HUAWEI-GigabitEthernet 1/0/1.1] quit",
            "[*HUAWEI] mac-address static 1-1-1 GigabitEthernet 1/0/1.1 bridge-domain 10 vid 10 ce-vid 100"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nA device learns MAC addresses and adds MAC address entries to a MAC address table. The device cannot identify whether packets are from authorized users or hackers, which brings security threats. If hackers set the source MAC addresses of attack packets to the MAC addresses of authorized users and access a device through different interfaces from authorized users' access interfaces, the device learns incorrect MAC address entries. As a result, the packets that should be forwarded to authorized users are forwarded to hackers.\nTo improve interface security, run the mac-address blackhole bridge-domain command to configure a static blackhole MAC address entry to enable a device to discard packets with a specified destination MAC address. You can also run the mac-address static bridge-domain command to add a specified user MAC address to a MAC address table so that a user device is bound to a local device interface, which prevents hackers from accessing the local device and obtaining data.\nPrerequisites\nBefore running the mac-address blackhole bridge-domain command, perform the following operations:\nAn administrator has recorded the MAC address of each device on a network. An authorized user's MAC address is not configured as a blackhole entry, which prevents authorized user's communication interruptions.A bridge domain has been created using the bridge-domain bd-id command in the system view.\nBefore running the mac-address static bridge-domain command, ensure that:\nStatic MAC addresses of the devices have been obtained on the network.A bridge domain has been created using the bridge-domain bd-id command in the system view.An EVC Layer 2 sub-interface has been created using the interface interface-type interface-number.subnum mode l2 command in the system view.An encapsulation type has been specified using the encapsulation command in the EVC Layer 2 sub-interface view.An EVC Layer 2 sub-interface has been added to a bridge domain using the bridge-domain bd-id command in a specific EVC Layer 2 sub-interface view.\n\nConfiguration Impact\nIf a device receives packets with a destination address matching the static blackhole MAC address, the device discards the packets. The configured static blackhole MAC address entry will not be lost even if the device is reset or an interface board on the device is hot swapped.\nThe configured static MAC address entry cannot age. After a device receives a frame with the specified static MAC address, the device forwards the frame through the specified outbound interface. The configured static MAC address entry will not be lost even if the device is reset or an interface board on the device is hot swapped.\nPrecautions\nA static blackhole MAC address entry can be added or deleted but cannot age.\nManually configured MAC address entries take precedence over dynamically generated entries. Static and static blackhole MAC address entries can overwrite dynamic MAC address entries, but cannot be overwritten by dynamic MAC address entries."
}