{
    "PageTitle": "ping access-user",
    "FuncDef": "The ping access-user command checks the network reachability between an access user and servers.",
    "CLIs": [
        "ping access-user { user-mac <mac> | user-id <user-id> | user-ip <ip-address> [ vpn-instance <vpn-instancename> ] } [ { -t <milliseconds> | -c <times> | -m <milliseconds> } * ] [ capture-enable ]"
    ],
    "ParentView": [
        "All views"
    ],
    "ParaDef": [
        {
            "Parameters": "user-mac mac",
            "Info": "Specifies the MAC address of a user.\nThe value is in the format of H-H-H, in which each H is a 4-digit hexadecimal number, such as 00e0 and fc01.\nIf an H contains fewer than 4 digits, the left-most digits are padded with zeros. For example, e0 is displayed as 00e0.The MAC address cannot be set to FFFF-FFFF-FFFF."
        },
        {
            "Parameters": "user-id user-id",
            "Info": "Specifies the ID of a user.\nThe value is an integer ranging from 0 to 4294967295."
        },
        {
            "Parameters": "user-ip ip-address",
            "Info": "Specifies the IP address of the user.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "vpn-instance vpn-instancename",
            "Info": "Specifies a VPN instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. _public_ cannot be used as a VPN instance name. The string can contain spaces if it is enclosed in double quotation marks (\")."
        },
        {
            "Parameters": "-t milliseconds",
            "Info": "Specifies the timeout period for waiting for an ICMP Echo Reply message.\nThe value is an integer ranging from 0 to 65535, in milliseconds. The default value is 2000."
        },
        {
            "Parameters": "-c times",
            "Info": "Specifies the number of sent ICMP Echo Request messages.\nThe value is an integer ranging from 1 to 20. The default value is 5."
        },
        {
            "Parameters": "-m milliseconds",
            "Info": "Specifies the interval at which ICMP Echo Request messages are sent. After an ICMP Echo Request message is sent, the device waits for an ICMP Echo Reply message. If no ICMP Echo Reply message is received within the specified interval, the device sends another ICMP Echo Request message.\nThe value is an integer ranging from 1 to 10000, in milliseconds. The default value is 500."
        },
        {
            "Parameters": "capture-enable",
            "Info": "Enables the device to obtain packet headers.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> ping access-user user-id 0",
            "Info: ping user IP address",
            "  PING 192.168.227.6: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.227.6: bytes=56 Sequence=1 ttl=255 time=5 ms",
            "    Reply from 192.168.227.6: bytes=56 Sequence=2 ttl=255 time=2 ms",
            "    Reply from 192.168.227.6: bytes=56 Sequence=3 ttl=255 time=2 ms",
            "    Reply from 192.168.227.6: bytes=56 Sequence=4 ttl=255 time=2 ms",
            "    Reply from 192.168.227.6: bytes=56 Sequence=5 ttl=255 time=1 ms",
            "",
            "  --- 192.168.227.6 ping statistics ---",
            "    5 packet(s) transmitted",
            "    5 packet(s) received",
            "    0.00% packet loss",
            "    round-trip min/avg/max = 1/2/5 ms",
            "Info: ping IP address of the primary DNS server ",
            "  PING 192.168.227.7: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.227.7: bytes=56 Sequence=1 ttl=255 time=5 ms",
            "    Reply from 192.168.227.7: bytes=56 Sequence=2 ttl=255 time=2 ms",
            "    Reply from 192.168.227.7: bytes=56 Sequence=3 ttl=255 time=2 ms",
            "    Reply from 192.168.227.7: bytes=56 Sequence=4 ttl=255 time=2 ms",
            "    Reply from 192.168.227.7: bytes=56 Sequence=5 ttl=255 time=1 ms",
            "",
            "  --- 192.168.227.7 ping statistics ---",
            "    5 packet(s) transmitted",
            "    5 packet(s) received",
            "    0.00% packet loss",
            " round-trip min/avg/max = 1/2/5 ms",
            "Info: ping IP address of the secondary DNS server",
            "  PING 192.168.227.8: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.227.8: bytes=56 Sequence=1 ttl=255 time=5 ms",
            "    Reply from 192.168.227.8: bytes=56 Sequence=2 ttl=255 time=2 ms",
            "    Reply from 192.168.227.8: bytes=56 Sequence=3 ttl=255 time=2 ms",
            "    Reply from 192.168.227.8: bytes=56 Sequence=4 ttl=255 time=2 ms",
            "    Reply from 192.168.227.8: bytes=56 Sequence=5 ttl=255 time=1 ms",
            "",
            "  --- 192.168.227.8 ping statistics ---",
            "    5 packet(s) transmitted",
            "    5 packet(s) received",
            "    0.00% packet loss",
            " round-trip min/avg/max = 1/2/5 ms",
            "Info: ping IP address of the RADIUS authentication server",
            "  PING 192.168.227.9: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.227.9: bytes=56 Sequence=1 ttl=255 time=5 ms",
            "    Reply from 192.168.227.9: bytes=56 Sequence=2 ttl=255 time=2 ms",
            "    Reply from 192.168.227.9: bytes=56 Sequence=3 ttl=255 time=2 ms",
            "    Reply from 192.168.227.9: bytes=56 Sequence=4 ttl=255 time=2 ms",
            "    Reply from 192.168.227.9: bytes=56 Sequence=5 ttl=255 time=1 ms",
            "",
            "  --- 192.168.227.9 ping statistics ---",
            "    5 packet(s) transmitted",
            "    5 packet(s) received",
            "    0.00% packet loss",
            " round-trip min/avg/max = 1/2/5 ms",
            "Info: ping IP address of the RADIUS accounting server",
            "  PING 192.168.227.10: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.227.10: bytes=56 Sequence=1 ttl=255 time=5 ms",
            "    Reply from 192.168.227.10: bytes=56 Sequence=2 ttl=255 time=2 ms",
            "    Reply from 192.168.227.10: bytes=56 Sequence=3 ttl=255 time=2 ms",
            "    Reply from 192.168.227.10: bytes=56 Sequence=4 ttl=255 time=2 ms",
            "    Reply from 192.168.227.10: bytes=56 Sequence=5 ttl=255 time=1 ms",
            "",
            "  --- 192.168.227.10 ping statistics ---",
            "    5 packet(s) transmitted",
            "    5 packet(s) received",
            "    0.00% packet loss",
            " round-trip min/avg/max = 1/2/5 ms"
        ],
        [
            "<HUAWEI> ping access-user user-id 0",
            "Info: ping user IP address",
            "  PING 192.168.255.254: 56  data bytes, press CTRL_C to break",
            "    Reply from 192.168.255.254: bytes=56 Sequence=1 ttl=128 time=24 ms",
            "    Reply from 192.168.255.254: bytes=56 Sequence=2 ttl=128 time=21 ms",
            "    Reply from 192.168.255.254: bytes=56 Sequence=3 ttl=128 time=26 ms",
            "    Reply from 192.168.255.254: bytes=56 Sequence=4 ttl=128 time=18 ms",
            "    Reply from 192.168.255.254: bytes=56 Sequence=5 ttl=128 time=24 ms",
            "Info: ping IP address 1.1.1.1",
            "  PING 192.168.10.10: 56  data bytes, press CTRL_C to break",
            "    Request time out",
            "    Request time out",
            "    Request time out",
            "    Request time out",
            "    Request time out",
            "Error: Invalid IP address or host 2.2.2.2.2.2."
        ]
    ],
    "ExtraInfo": "Usage Scenario\nIf a user fails to access the Internet, you can run the ping access-user command to check the reachability between the user and servers. You can specify the MAC address, IP address, or ID of the user in the command to check whether ICMP Echo Request messages reach the servers, the number of sent and received messages, and the message loss ratio.\nIf the number of sent ICMP Echo Request messages is equal to the number of received ICMP Echo Reply messages, no messages are lost, and the corresponding server is reachable.If the number of sent ICMP Echo Request messages is different from the number of received ICMP Echo Reply messages, messages are lost. In this case, locate the fault based on the message loss cause.\nYou can edit a file to set IP addresses for ping operations. The file must be named as PingIpAddressList.txt and stored in the cfcard/home: directory of the device. Each line in the file is one record and contains one IP address or URL. When obtaining an address or URL from a file, the system checks its validity. If the address or URL is invalid, the system stops obtaining the current and rest addresses or URLs. A maximum of 50 records can be obtained. If the file contains more than 50 records, the system does not obtain excess records.\nIf this command is run and the PingIpAddressList.txt file is configured, the system obtains address or URL information from the file to perform ping operations after checking the network reachability between the specified access user and RADIUS or DNS servers.If this command is run, but the PingIpAddressList.txt file is not configured, the system checks the network reachability between the specified access user and RADIUS or DNS servers only.\n\nPrecautions\nWhen the IP address of a server is not forwarded through the interface board, for example, the RADIUS server, only the reachability between the user and servers can be detected. Packet headers cannot be obtained.For LNS users, only the reachability between the users and servers can be detected, and packet headers cannot be obtained.When the outbound interface of downstream packets is a VE interface, packets headers of multiple instances can be obtained."
}