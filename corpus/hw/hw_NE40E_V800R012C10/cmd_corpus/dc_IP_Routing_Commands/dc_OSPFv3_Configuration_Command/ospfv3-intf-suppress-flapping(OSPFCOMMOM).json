{
    "PageTitle": "ospfv3 suppress-flapping peer",
    "FuncDef": "The ospfv3 suppress-flapping peer command configures detection parameters for OSPFv3 neighbor relationship flapping suppression.\nThe undo ospfv3 suppress-flapping peer command restores the default detection parameters.\nThe ospfv3 suppress-flapping peer disable command disables OSPFv3 neighbor relationship flapping suppression from an interface.\nThe undo ospfv3 suppress-flapping peer disable command enables OSPFv3 neighbor relationship flapping suppression on an interface.\nThe ospfv3 suppress-flapping peer hold-down command configures the Hold-down mode and sets duration for this mode.\nThe undo ospfv3 suppress-flapping peer hold-down command cancels the Hold-down mode.\nThe ospfv3 suppress-flapping peer hold-max-cost disable command disables the Hold-max-cost mode.\nThe undo ospfv3 suppress-flapping peer hold-max-cost disable command enables the Hold-max-cost mode.\n\nBy default, the detection interval of OSPFv3 neighbor relationship flapping suppression is 60s, the suppression threshold is 10, and the interval for exiting from suppression is 120s.\n\n\nBy default, OSPFv3 neighbor relationship flapping suppression is enabled on all interfaces.\n\n\nBy default, the Hold-down mode is disabled, and the Hold-max-cost mode is enabled.\n\n\nBy default, the Hold-max-cost mode is enabled.",
    "CLIs": [
        "ospfv3 suppress-flapping peer disable [ instance <instance-id> ]",
        "ospfv3 suppress-flapping peer hold-down <interval> [ instance <instance-id> ]",
        "ospfv3 suppress-flapping peer hold-max-cost disable [ instance <instance-id> ]",
        "ospfv3 suppress-flapping peer { detecting-interval <detecting-interval> | threshold <threshold> | resume-interval <resume-interval> } * [ instance <instance-id> ]",
        "undo ospfv3 suppress-flapping peer disable [ instance <instance-id> ]",
        "undo ospfv3 suppress-flapping peer hold-down [ <interval> ] [ instance <instance-id> ]",
        "undo ospfv3 suppress-flapping peer hold-max-cost disable [ instance <instance-id> ]",
        "undo ospfv3 suppress-flapping peer { detecting-interval <detecting-interval> | threshold <threshold> | resume-interval <resume-interval> } * [ instance <instance-id> ]"
    ],
    "ParentView": [
        "VBDIF interface view",
        "FlexE interface view",
        "40GE interface view",
        "IP-Trunk interface view",
        "VE sub-interface view",
        "25GE sub-interface view",
        "100GE interface view",
        "GE electrical interface view",
        "VLANIF interface view",
        "Global VE sub-interface view",
        "50GE interface view",
        "50GE sub-interface view",
        "400GE interface view",
        "10GE interface view",
        "GE optical interface view",
        "25GE interface view",
        "Eth-Trunk interface view",
        "POS interface view"
    ],
    "ParaDef": [
        {
            "Parameters": "instance instance-id",
            "Info": "Specifies the ID of the instance to which an interface belongs.\nThe value is an integer ranging from 0 to 255."
        },
        {
            "Parameters": "hold-down interval",
            "Info": "Specifies the duration of the Hold-down mode.\nThe value is an integer ranging from 1 to 86400, in seconds."
        },
        {
            "Parameters": "detecting-interval detecting-interval",
            "Info": "Specifies the detection interval of OSPFv3 neighbor relationship flapping suppression.\nEach OSPF interface on which OSPFv3 neighbor relationship flapping suppression is enabled starts a flapping counter. If the interval between two successive neighbor status changes from Full to a non-Full state is shorter than detecting-interval, a valid flapping_event is recorded, and the flapping_count increases by 1.\nThe value is an integer ranging from 1 to 300, in seconds. The default value is 60s."
        },
        {
            "Parameters": "threshold threshold",
            "Info": "Specifies the threshold of OSPF neighbor relationship flapping suppression.\nWhen the flapping_count reaches or exceeds threshold, flapping suppression takes effect.\nThe value is an integer ranging from 1 to 1000. The default value is 10."
        },
        {
            "Parameters": "resume-interval resume-interval",
            "Info": "Specifies the interval for exiting from OSPFv3 neighbor relationship flapping suppression.\nIf the interval between two successive neighbor status changes from Full to a non-Full state is longer than resume-interval, the flapping_count is reset.\nIf OSPFv3 neighbor relationship flapping suppression works in hold-max-cost mode, resume-interval indicates the duration of this mode.The value of.\nresume-interval must be greater than that of.\ndetecting-interval.\nThe value is an integer ranging from 2 to 1000, in seconds."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ospfv3 1",
            "[*HUAWEI-ospfv3-1] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] ipv6 enable",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 1 area 0",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 suppress-flapping peer hold-max-cost disable"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ospfv3 1",
            "[*HUAWEI-ospfv3-1] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] ipv6 enable",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 1 area 0",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 suppress-flapping peer hold-down 200"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ospfv3 1",
            "[*HUAWEI-ospfv3-1] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] ipv6 enable",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 1 area 0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospfv3 suppress-flapping peer disable"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ospfv3 1",
            "[*HUAWEI-ospfv3-1] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] ipv6 enable",
            "[*HUAWEI-GigabitEthernet1/0/0] ospfv3 1 area 0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospfv3 suppress-flapping peer detecting-interval 5 threshold 40 resume-interval 20"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nTo configure detection parameters for OSPFv3 neighbor relationship flapping suppression on an interface, run the ospfv3 suppress-flapping peer command. However, keeping the default configurations is recommended.\nBy default, OSPFv3 neighbor relationship flapping suppression is enabled on all interfaces in the same OSPFv3 process. To disable the function from one of the interfaces, run the ospfv3 suppress-flapping peer disable command.\nFlapping suppression works in either Hold-down or Hold-max-cost mode.\nHold-down mode: In the case of frequent flooding and topology changes during neighbor relationship establishment, interfaces prevent neighbor relationship reestablishment during Hold-down suppression, which minimizes LSDB synchronization attempts and packet exchanges.Hold-max-cost mode: If the traffic forwarding path changes frequently, interfaces use 65535 as the cost of the flapping link during Hold-max-cost suppression, which prevents traffic from passing through the flapping link.\nFlapping suppression can also work first in Hold-down mode and then in Hold-max-cost mode.\nBy default, the Hold-max-cost mode takes effect. To configure the Hold-down mode and set duration for this mode, run the ospfv3 suppress-flapping peer hold-down command.\n\nPrerequisites\nOSPFv3 neighbor relationship flapping suppression must have been enabled globally before you configure detection parameters for it. By default, the function is enabled. If it is disabled, run the undo suppress-flapping peer disable command to enable it before you configure the detection parameters.\nOSPFv3 neighbor relationship flapping suppression must have been enabled globally before you enable the function on an interface using the undo ospfv3 suppress-flapping peer disable command. By default, the function is enabled globally. If it is disabled, run the undo suppress-flapping peer disable command to enable it first.\nOSPFv3 neighbor relationship flapping suppression must have been enabled globally before you configure the Hold-down mode and set duration for this mode. By default, the function is enabled. If it is disabled, run the undo suppress-flapping peer disable command to enable it before you configure the Hold-down mode and set duration for this mode.\nPrecautions\nThe Hold-max-cost mode takes effect only unidirectionally. If a remote device does not support OSPFv3 neighbor relationship flapping suppression, bidirectional traffic between the local and remote devices may travel along different paths."
}