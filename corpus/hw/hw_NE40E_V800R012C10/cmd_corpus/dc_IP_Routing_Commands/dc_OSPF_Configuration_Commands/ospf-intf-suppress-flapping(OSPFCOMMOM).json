{
    "PageTitle": "ospf suppress-flapping peer",
    "FuncDef": "The ospf suppress-flapping peer command configures detection parameters for OSPF neighbor relationship flapping suppression.\nThe undo ospf suppress-flapping peer command restores the default detection parameters.\nThe ospf suppress-flapping peer disable command disables OSPF neighbor relationship flapping suppression from an interface.\nThe undo ospf suppress-flapping peer disable command enables OSPF neighbor relationship flapping suppression on an interface.\nThe ospf suppress-flapping peer hold-down command configures the Hold-down mode and sets duration for this mode.\nThe undo ospf suppress-flapping peer hold-down command cancels the Hold-down mode.\nThe ospf suppress-flapping peer hold-max-cost disable command disables the Hold-max-cost mode.\nThe undo ospf suppress-flapping peer hold-max-cost disable command enables the Hold-max-cost mode.\n\nBy default, the detection interval of OSPF neighbor relationship flapping suppression is 60s, the suppression threshold is 10, and the interval for exiting from suppression is 120s.\n\n\nBy default, OSPF neighbor relationship flapping suppression is enabled on all interfaces.\n\n\nBy default, the Hold-down mode is disabled, and the Hold-max-cost mode is enabled.\n\n\nBy default, the Hold-max-cost mode is enabled.",
    "CLIs": [
        "ospf suppress-flapping peer disable",
        "ospf suppress-flapping peer hold-down <interval>",
        "ospf suppress-flapping peer hold-max-cost disable",
        "ospf suppress-flapping peer { detecting-interval <detecting-interval> | threshold <threshold> | resume-interval <resume-interval> } *",
        "undo ospf suppress-flapping peer disable",
        "undo ospf suppress-flapping peer hold-down [ <interval> ]",
        "undo ospf suppress-flapping peer hold-max-cost disable",
        "undo ospf suppress-flapping peer { detecting-interval <detecting-interval> | threshold <threshold> | resume-interval <resume-interval> } *"
    ],
    "ParentView": [
        "Tunnel interface view",
        "VBDIF interface view",
        "FlexE interface view",
        "Cellular channel interface view",
        "40GE interface view",
        "IP-Trunk interface view",
        "VE sub-interface view",
        "25GE sub-interface view",
        "100GE interface view",
        "GE electrical interface view",
        "VLANIF interface view",
        "Global VE sub-interface view",
        "50GE interface view",
        "GMPLS-UNI interface view",
        "50GE sub-interface view",
        "400GE interface view",
        "10GE interface view",
        "GE optical interface view",
        "25GE interface view",
        "Eth-Trunk interface view",
        "POS interface view"
    ],
    "ParaDef": [
        {
            "Parameters": "hold-down interval",
            "Info": "Specifies the duration of the Hold-down mode.\nThe value is an integer ranging from 1 to 86400, in seconds."
        },
        {
            "Parameters": "detecting-interval detecting-interval",
            "Info": "Specifies the detection interval of OSPF neighbor relationship flapping suppression.\nEach OSPF interface on which OSPF neighbor relationship flapping suppression is enabled starts a flapping counter. If the interval between two successive neighbor status changes from Full to a non-Full state is shorter than detecting-interval, a valid flapping_event is recorded, and the flapping_count increases by 1.\nThe value is an integer ranging from 1 to 300, in seconds. The default value is 60s."
        },
        {
            "Parameters": "threshold threshold",
            "Info": "Specifies the threshold of OSPF neighbor relationship flapping suppression.\nWhen the flapping_count reaches or exceeds threshold, flapping suppression takes effect.\nThe value is an integer ranging from 1 to 1000. The default value is 10."
        },
        {
            "Parameters": "resume-interval resume-interval",
            "Info": "Specifies the interval for exiting from OSPF neighbor relationship flapping suppression.\nIf the interval between two successive neighbor status changes from Full to a non-Full state is longer than resume-interval, the flapping_count is reset.\nIf OSPF neighbor relationship flapping suppression works in hold-max-cost mode, resume-interval indicates the duration of this mode.The value of.\nresume-interval must be greater than that of.\ndetecting-interval.\nThe value is an integer ranging from 2 to 1000, in seconds. The default value is 120s."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospf suppress-flapping peer hold-max-cost disable"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospf suppress-flapping peer hold-down 200"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospf suppress-flapping peer disable"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ospf suppress-flapping peer detecting-interval 5 threshold 40 resume-interval 20"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nTo configure detection parameters for OSPF neighbor relationship flapping suppression on an interface, run the ospf suppress-flapping peer command. However, keeping the default configurations is recommended.\nBy default, OSPF neighbor relationship flapping suppression is enabled on all interfaces in the same OSPF process. To disable the function from one of the interfaces, run the ospf suppress-flapping peer disable command.\nWhen an interface enters the flapping suppression state, all neighbor relationships on the interface enter the state accordingly.\nFlapping suppression works in either Hold-down or Hold-max-cost mode.\nHold-down mode: In the case of frequent flooding and topology changes during neighbor relationship establishment, interfaces prevent neighbor relationship reestablishment during Hold-down suppression, which minimizes LSDB synchronization attempts and packet exchanges.Hold-max-cost mode: If the traffic forwarding path changes frequently, interfaces use 65535 as the cost of the flapping link during Hold-max-cost suppression, which prevents traffic from passing through the flapping link.\nFlapping suppression can also work first in Hold-down mode and then in Hold-max-cost mode.\nBy default, the Hold-max-cost mode takes effect. To configure the Hold-down mode and set duration for this mode, run the ospf suppress-flapping peer hold-down interval command.\nIf the hold-max-cost mode is configured for OSPF flapping suppression, you can run the ospf suppress-flapping peer resume-interval resume-interval command to set the interval for exiting from OSPF neighbor relationship flapping suppression. The resume-interval parameter value is an integer ranging from 2 to 1000, in seconds. Its default value is 120 seconds.\n\nPrerequisites\nOSPF neighbor relationship flapping suppression must have been enabled globally before you configure detection parameters for it. By default, the function is enabled. If it is disabled, run the undo suppress-flapping peer disable command to enable it before you configure the detection parameters.\nOSPF neighbor relationship flapping suppression must have been enabled globally before you enable the function on an interface using the undo ospf suppress-flapping peer disable command. By default, the function is enabled globally. If it is disabled, run the undo suppress-flapping peer disable command to enable it first.\nOSPF neighbor relationship flapping suppression must have been enabled globally before you configure the Hold-down mode and set duration for this mode. By default, the function is enabled. If it is disabled, run the undo suppress-flapping peer disable command to enable it before you configure the Hold-down mode and set duration for this mode.\nOSPF neighbor relationship flapping suppression must have been enabled globally before you configure duration for the Hold-max-cost mode. By default, the function is enabled. If it is disabled, run the undo suppress-flapping peer disable command to enable it before you configure duration for the Hold-max-cost mode.\nPrecautions\nThe Hold-max-cost mode takes effect only unidirectionally. If a remote device does not support OSPF neighbor relationship flapping suppression, bidirectional traffic between the local and remote devices may travel along different paths.\nWhen the OSPF neighbor relationship flaps again, the hold-max-cost timer will be restarted. If the flapping persists, the corresponding link may fail to exit from the flapping suppression state.\nIf hold-down is configured, flapping suppression works first in hold-down mode and then in hold-max-cost mode by default. If only the hold-down mode is required, run the ospf suppress-flapping peer hold-max-cost disable command to disable the hold-max-cost mode."
}