{
    "PageTitle": "mpls oam l2vc",
    "FuncDef": "The mpls oam l2vc command configures MPLS OAM parameters on a node at one end of a PW.\nThe undo mpls oam l2vc command deletes MPLS OAM parameters configured on a node at one end of a PW.\nBy default, no MPLS OAM parameter is configured.",
    "CLIs": [
        "mpls oam l2vc peer-ip <peer-ip> vc-id <vc-id> vc-type <vc-type> [ remote-peer-ip <remote-peer-ip> remote-vc-id <remote-vc-id> remote-vc-type <remote-vc-type> ] type { cv | ffd frequency { 3 | 10 | 20 | 50 | 100 | 200 | 500 } } [ auto-protocol [ overtime <overtime> ] ] [ compatibility-mode <compati-mode-val> ] [ bdi-frequency <bdi-frep-val> ] [ exp <exp-value> ]",
        "undo mpls oam l2vc peer-ip <peer-ip> vc-id <vc-id> vc-type <vc-type>"
    ],
    "ParentView": [
        "MPLS-OAM view"
    ],
    "ParaDef": [
        {
            "Parameters": "peer-ip peer-ip",
            "Info": "Specifies the destination IP address of an L2VC.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "vc-id vc-id",
            "Info": "Specifies the ID of an L2VC.\nThe value is an integer ranging from 1 to 4294967295."
        },
        {
            "Parameters": "vc-type vc-type",
            "Info": "Specifies the encapsulation type of an L2VC.\nEncapsulation types supported:ATM PWE3atm-1to1-vcc: One PW carries the ATM cells of one PVC.atm-1to1-vpc: One PW carries the ATM cells of one PVP.atm-aal5-pdu: One PW carries the AAL5 PDUs of one PVC.atm-aal5-sdu: One PW carries the AAL5 SDUs of one PVC.atm-nto1-vcc: One PW carries the ATM cells of multiple PVCs.atm-nto1-vpc: One PW carries the ATM cells of multiple PVPs.atm-trans-cell: ATM cells are transmitted over PWE3 VCs.\nTDM PWE3cesopsn-basic: CES is sensitive to E1 and T1 frame structures. E1 or T1 signals can be encapsulated into packets based on timeslots.satop-e1: SAToP is insensitive to the E1 frame structure and encapsulates a whole E1 frame into a PW packet.satop-t1: SAToP is insensitive to the T1 frame structure and encapsulates a whole T1 frame into a PW packet.\nOther encapsulation types:cep: This encapsulation type is used for CEP services.ethernet: This encapsulation type is used when Ethernet packets do not carry VLAN information.hdlc: HDLC is a bit-oriented link layer protocol.ip-interworking: This encapsulation type is used for interworking between Huawei devices.ip-layer2: This encapsulation type is used for interworking between Huawei devices and non-Huawei devices.ppp: PPP is a link layer protocol that specifies how to encapsulate and transmit network layer packets over P2P links.vlan: This encapsulation type is used when Ethernet packets carry VLAN information."
        },
        {
            "Parameters": "remote-peer-ip remote-peer-ip",
            "Info": "Specifies the IP address of a remote L2VC node on an MS-PW.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "remote-vc-id remote-vc-id",
            "Info": "Specifies the VC ID of a remote L2VC node on an MS-PW.\nThe value is an integer ranging from 0 to 4294967295."
        },
        {
            "Parameters": "remote-vc-type remote-vc-type",
            "Info": "Specifies the type of a remote L2VC.\nEncapsulation types supported:ATM PWE3atm-1to1-vcc: One PW carries the ATM cells of one PVC.atm-1to1-vpc: One PW carries the ATM cells of one PVP.atm-aal5-pdu: One PW carries the AAL5 PDUs of one PVC.atm-aal5-sdu: One PW carries the AAL5 SDUs of one PVC.atm-nto1-vcc: One PW carries the ATM cells of multiple PVCs.atm-nto1-vpc: One PW carries the ATM cells of multiple PVPs.atm-trans-cell: ATM cells are transmitted over PWE3 VCs.\nTDM PWE3cesopsn-basic: CES is sensitive to E1 and T1 frame structures. E1 or T1 signals can be encapsulated into packets based on timeslots.satop-e1: SAToP is insensitive to the E1 frame structure and encapsulates a whole E1 frame into a PW packet.satop-t1: SAToP is insensitive to the T1 frame structure and encapsulates a whole T1 frame into a PW packet.\nOther encapsulation types:cep: This encapsulation type is used for CEP services.ethernet: This encapsulation type is used when Ethernet packets do not carry VLAN information.hdlc: HDLC is a bit-oriented link layer protocol.ip-interworking: This encapsulation type is used for interworking between Huawei devices.ip-layer2: This encapsulation type is used for interworking between Huawei devices and non-Huawei devices.ppp: PPP is a link layer protocol that specifies how to encapsulate and transmit network layer packets over P2P links.vlan: This encapsulation type is used when Ethernet packets carry VLAN information."
        },
        {
            "Parameters": "type",
            "Info": "Indicates the detection packet type.\nThe value can be CV or FFD."
        },
        {
            "Parameters": "cv",
            "Info": "Enables connectivity verification (CV) detection.\nThe value is 1000, in milliseconds."
        },
        {
            "Parameters": "ffd",
            "Info": "Enables fast failure detection (FFD).\n-"
        },
        {
            "Parameters": "frequency",
            "Info": "Specifies the interval at which FFD packets are sent, in milliseconds.\n-"
        },
        {
            "Parameters": "auto-protocol",
            "Info": "Enables the OAM auto protocol.\n-"
        },
        {
            "Parameters": "overtime overtime",
            "Info": "Specifies the timeout period for the OAM auto protocol.\nThe value is an integer ranging from 0 to 255. The step is 30 seconds. The default value is 10, meaning 5 minutes."
        },
        {
            "Parameters": "compatibility-mode compati-mode-val",
            "Info": "Indicates the router/PTN communication mode.\nThe values are as follows:\nrouter-modeptn-mode"
        },
        {
            "Parameters": "bdi-frequency bdi-frep-val",
            "Info": "Indicates the interval at which BDI packets are sent.\nThe values are as follows:\nper-second: Indicates that BDI packets are sent every second.detect-freq: Indicates that the interval at which BDI packets are sent is the same as that between sending OAM detection packets."
        },
        {
            "Parameters": "exp exp-value",
            "Info": "Specifies a forwarding priority for packets.\nThe value is an integer ranging from 0 to 7. A larger value indicates a higher priority. The default value is 7."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] mpls oam",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] mpls l2vc 2.2.2.2 100",
            "[*HUAWEI-GigabitEthernet1/0/0] quit",
            "[*HUAWEI] mpls-oam",
            "[*HUAWEI-mpls-oam] mpls oam l2vc peer-ip 2.2.2.2 vc-id 100 vc-type ethernet type cv"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] mpls oam",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] interface GigabitEthernet 1/0/0",
            "[*HUAWEI-GigabitEthernet1/0/0] mpls l2vc 2.2.2.2 100",
            "[*HUAWEI-GigabitEthernet1/0/0] quit",
            "[*HUAWEI] mpls-oam",
            "[*HUAWEI-mpls-oam] mpls oam l2vc peer-ip 2.2.2.2 vc-id 100 vc-type vlan remote-peer-ip 3.3.3.3 remote-vc-id 200 remote-vc-type vlan type cv"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nMPLS OAM can monitor VPWs and VPLSs which can be dynamic PWs, static PWs, SS-PWs, or MS-PWs. MPLS OAM can monitor PWs between TPEs.\nPrerequisites\nMPLS and MPLS OAM have been enabled globally.The MPLS-OAM view has been displayed.The PW that MPLS OAM monitors has been established.\n\nPrecautions\nThe remote-peer-ip, remote-vc-type, and remote-vc-id parameters must be configured for monitoring an MS-PW."
}