{
    "PageTitle": "vrrp vrid track route-monitor-group",
    "FuncDef": "The vrrp vrid track route-monitor-group failure-ratio command enables a VRRP backup group to track a route monitoring group. When the link failure ratio on the access or network side reaches a specified threshold, the VRRP backup group performs a master/backup switchover.\nThe undo vrrp vrid track route-monitor-group command disables a VRRP backup group from tracking a route monitoring group.\n\nBy default, a VRRP backup group is disabled from tracking a route monitoring group.",
    "CLIs": [
        "vrrp vrid <virtual-router-id> track route-monitor-group <route-monitor-group-name> failure-ratio <failure-ratio-value> [ link | reduced <priority-value> ]",
        "undo vrrp vrid <virtual-router-id> track route-monitor-group [ <route-monitor-group-name> ]"
    ],
    "ParentView": [
        "PW-VE sub-interface view",
        "40GE interface view",
        "Port extension interface view",
        "GE electrical interface view",
        "Loopback interface view",
        "Eth-Trunk sub-interface view",
        "50GE sub-interface view",
        "400GE interface view",
        "10GE interface view",
        "GE sub-interface view",
        "VBDIF interface view",
        "VE sub-interface view",
        "25GE sub-interface view",
        "GE interface view",
        "100GE interface view",
        "VLANIF interface view",
        "Global VE sub-interface view",
        "50GE interface view",
        "400GE sub-interface view",
        "GE optical interface view",
        "100ge sub-interface view",
        "25GE interface view",
        "40GE sub-interface view",
        "Eth-Trunk interface view",
        "10GE sub-interface view"
    ],
    "ParaDef": [
        {
            "Parameters": "route-monitor-group-name",
            "Info": "Specifies the name of a route monitoring group tracked by a VRRP backup group.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported.The character string can contain spaces if it is enclosed in double quotation marks (\")."
        },
        {
            "Parameters": "failure-ratio failure-ratio-value",
            "Info": "Specifies a link failure ratio threshold for a route monitoring group. When the link failure ratio of a route monitoring group is greater than or equal to the threshold, the status of the route monitoring group changes to Down.\nThe value is an integer ranging from 1 to 100."
        },
        {
            "Parameters": "link",
            "Info": "Indicates that a VRRP backup group tracks a route monitoring group in link mode. In link mode, when the status of the tracked route monitoring group changes to Down, the local device in the VRRP backup group changes to the Initialize state and sends a VRRP Advertisement packet carrying a priority of 0 to the remote device to trigger the remote device to preempt the Master state.\n-"
        },
        {
            "Parameters": "reduced priority-value",
            "Info": "Specifies a value by which the priority of a device in a VRRP backup group reduces when the status of the tracked route monitoring group changes to Down.\nThe value is an integer ranging from 1 to 255. The smallest priority can be 1. The priority 0 is reserved for special use. If a backup device receives a VRRP Advertisement packet carrying a priority of 0, the backup device immediately preempts the Master state. By default, the priority of a device in a VRRP backup group reduces by 10 if the status of the tracked route monitoring group changes to Down."
        },
        {
            "Parameters": "vrid virtual-router-id",
            "Info": "Specifies the ID of a VRRP backup group.\nThe value is an integer ranging from 1 to 255."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip route-monitor-group 1",
            "[*HUAWEI-route-monitor-group-1] quit",
            "[*HUAWEI] interface Eth-Trunk1",
            "[*HUAWEI-Eth-Trunk1] ip address 10.1.1.1 24",
            "[*HUAWEI-Eth-Trunk1] vrrp vrid 1 virtual-ip 10.1.1.111",
            "[*HUAWEI-Eth-Trunk1] vrrp vrid 1 track route-monitor-group 1 failure-ratio 80 reduced 20"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip route-monitor-group 2",
            "[*HUAWEI-route-monitor-group-2] quit",
            "[*HUAWEI] interface Eth-Trunk2",
            "[*HUAWEI-Eth-Trunk2] ip address 11.1.1.1 24",
            "[*HUAWEI-Eth-Trunk2] vrrp vrid 2 virtual-ip 11.1.1.111",
            "[*HUAWEI-Eth-Trunk2] vrrp vrid 2 track route-monitor-group 2 failure-ratio 90 link"
        ]
    ],
    "ExtraInfo": "Usage Scenario\n\nVRRP can track a route monitoring group based on the link failure ratio threshold configured for this group. VRRP can be configured to track a route monitoring group. If the fault weight of the route monitoring group changes, the system notifies the VRRP module of the change. The VRRP module calculates the status based on the link failure ratio threshold configured for the route monitoring group, implementing a master/backup VRRP switchover. When the tracked route monitoring group recovers, the priority of the router in the VRRP backup group restores the original value.\n\nPrerequisites\n\nBefore enabling a unicast VRRP backup group to track a route monitoring group, you have run the vrrp vrid peer-ip command in the loopback interface view to enable unicast VRRP and have run the ip route-monitor-group command to create a route monitoring group.\n\nPrecautions\n\nA VRRP backup group can track three route monitoring groups at the same time.\n\nA VRRP backup group can track two route monitoring groups on the access side in normal mode (link is not specified). When the link failure ratio on the access side reaches a specified threshold, the VRRP backup group reduces the priority of the local device to trigger the remote device to preempt the Master state.\nA VRRP backup group can track one route monitoring group on the network side in link mode. When the link failure ratio on the network side reaches a specified threshold, the local device in the VRRP backup group changes to the Initialize state and sends a VRRP Advertisement packet carrying a priority of 0 to the remote device to trigger the remote device to preempt the Master state."
}