{
    "PageTitle": "observe-filter",
    "FuncDef": "The observe-filter command configures filtering rules for packet mirroring.\nThe undo observing-filter command deletes the configured filtering rules.\nBy default, no filtering rule is configured. That is, all the packets received on the mirroring port are mirrored.",
    "CLIs": [
        "observe-filter <filter-index> local { dst-ip <dst-ip-address> <dst-mask> | dst-mac <dst-mac-address> | dst-port <dst-port> | ether-type <type-value> | { ip-protocol <ip-protocol-number> | ppp-protocol <ppp-protocol-number> } | pppoe-session <session-id> | src-ip <src-ip-address> <src-mask> | src-mac <src-mac-address> | src-port <src-port> | vlan <vlan-id> } *",
        "undo observe-filter { <filter-index> | all }"
    ],
    "ParentView": [
        "Slot view"
    ],
    "ParaDef": [
        {
            "Parameters": "filter-index",
            "Info": "Specifies the index of the filtering rule.\nThe value ranges from 0 to 7."
        },
        {
            "Parameters": "local",
            "Info": "Configures filtering rules for local mirroring.\n-"
        },
        {
            "Parameters": "dst-ip",
            "Info": "Filters packets according to their destination IP addresses.\n-"
        },
        {
            "Parameters": "dst-ip-address",
            "Info": "Specifies the destination IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "dst-mask",
            "Info": "Specifies the mask of the destination IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "dst-mac",
            "Info": "Filters packets according to their destination MAC addresses.\n-"
        },
        {
            "Parameters": "dst-mac-address",
            "Info": "Specifies the destination MAC address.\nThe value is in the H-H-H format, where H represents a random four-digit hexadecimal number."
        },
        {
            "Parameters": "dst-port",
            "Info": "Filters packets according to their destination interface numbers.\n-"
        },
        {
            "Parameters": "dst-port",
            "Info": "Specifies the destination interface number.\nThe value ranges from 0 to 65535."
        },
        {
            "Parameters": "ether-type",
            "Info": "Filters packets according to Ethernet packet types.\n-"
        },
        {
            "Parameters": "type-value",
            "Info": "Specifies the Ethernet packet type.\nThe value is a hexadecimal number ranging from 0 to FFFF."
        },
        {
            "Parameters": "ip-protocol",
            "Info": "Indicates the IP type.\n-"
        },
        {
            "Parameters": "ip-protocol-number",
            "Info": "Specifies the number of IP.\nThe value ranges from 1 to 255."
        },
        {
            "Parameters": "ppp-protocol",
            "Info": "Indicates the PPP type.\n-"
        },
        {
            "Parameters": "ppp-protocol-number",
            "Info": "Specifies the number of PPP.\nThe value is a hexadecimal numeral ranging from 0 to FFFF."
        },
        {
            "Parameters": "pppoe-session",
            "Info": "Filters packets according to PPPoE session IDs.\n-"
        },
        {
            "Parameters": "session-id",
            "Info": "Specifies the ID of a PPPoE session.\nThe value ranges from 1 to 65535."
        },
        {
            "Parameters": "src-ip",
            "Info": "Filters packets according to their source IP addresses.\n-"
        },
        {
            "Parameters": "src-ip-address",
            "Info": "Specifies the source IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "src-mask",
            "Info": "Specifies the mask of the source IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "src-mac",
            "Info": "Filters packets according to their source MAC addresses.\n-"
        },
        {
            "Parameters": "src-mac-address",
            "Info": "Specifies the source MAC address.\nThe value is in the H-H-H format; H is a four-digit hexadecimal numeral."
        },
        {
            "Parameters": "src-port",
            "Info": "Filters packets according to the source interface numbers.\n-"
        },
        {
            "Parameters": "src-port",
            "Info": "Specifies the source interface number.\nThe value ranges from 0 to 65535."
        },
        {
            "Parameters": "vlan",
            "Info": "Filters packets according to VLAN IDs.\n-"
        },
        {
            "Parameters": "vlan-id",
            "Info": "Specifies the ID of a VLAN.\nThe value ranges from 1 to 4094."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] slot 1",
            "[*HUAWEI-slot-1] observe-filter 1 local dst-ip 1.1.1.1 255.255.255.0"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nWhen observing packets through mirroring, you can filter packets according to certain conditions. In this manner, only the packets meeting a certain condition can be observed. You can filter packets according to conditions such as source IP addresses, destination IP addresses, source MAC addresses, destination MAC addresses, source interface numbers, destination interface numbers, Ethernet packet types, IP/PPP protocol types, PPPoE session IDs, and VLAN IDs. You can also filter packets according to multiple conditions.\nIf the observing port does not need to output all the mirrored packets, you can filter out the packets that the customer does not require.\nWhen a Layer 2 filtering rule is configured using the observe-filter command and the observing port is a sub-interface and does not have the port-observing with-linklayer-header command configured, packets matching the rule are dropped, and the observing port cannot receive packets.\nPrecautions\nConfigured filtering rules take effect only for local port mirroring.\nThis command must be configured in the slot view. In VS mode, it can be configured only for admin VS and takes effect for mirroring configurations on the board in all VSs.\nFiltering rules for mirroring is supported only on the LPUF-51-E/LPUI-51-E/LPUI-51-S/LPUI-51-CM/LPUF-120/LPUF-120-B/LPUF-120-E/LPUI-102-E/LPUI-120/LPUI-120-B/LPUI-120-L/LPUI-52-E/LPUI-120-E/LPUI-120-CM/LPUF-240/LPUF-240-B/LPUF-240-E/LPUI-240/LPUI-240-B/LPUI-240-CM/LPUI-240-L/LPUF-480/LPUF-480-B/LPUI-480/LPUI-480-B/LPUI-480-L/LPUF-480-E/LPUI-480-CM/LPUF-400-E boards."
}