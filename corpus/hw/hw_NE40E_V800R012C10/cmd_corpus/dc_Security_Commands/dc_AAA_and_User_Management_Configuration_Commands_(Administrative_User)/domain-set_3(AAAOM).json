{
    "PageTitle": "hwtacacs-server (AAA domain view)",
    "FuncDef": "The hwtacacs-server command configures an HWTACACS server template for the current domain.\nThe undo hwtacacs-server command deletes the HWTACACS server template configured for the current domain.\nBy default, no hwtacacs profile is bound to a domain.",
    "CLIs": [
        "hwtacacs-server <template-name>",
        "undo hwtacacs-server"
    ],
    "ParentView": [
        "AAA domain view"
    ],
    "ParaDef": [
        {
            "Parameters": "template-name",
            "Info": "Specifies the name of an HWTACACS server template.\nIt is a case-insensitive string of 1 to 32 characters. The characters can be letters a to z (case insensitive), numbers 0 to 9, ., -, and _."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] hwtacacs-server template huawei",
            "[*HUAWEI-hwtacacs-huawei] quit",
            "[*HUAWEI] aaa",
            "[*HUAWEI-aaa] domain Huawei",
            "[*HUAWEI-aaa-domain-huawei] hwtacacs-server huawei"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nBefore using this command, make sure that the HWTACACS server template already exists.\nPrecautions\nThe undo hwtacacs-server user-name domain-included command configuration brings system security risks. Running the hwtacacs-server user-name original command is recommended.\nAn HWTACACS template having the undo hwtacacs-server user-name domain-included configuration cannot be bound to the default admin domain or a domain having the adminuser-priority <level> configuration (configuration restoration is not affected).\nThe default admin domain is a domain configured using the default-domain admin  <domain-name> command. An admin domain is the default admin domain or a domain having the adminuser-priority <level> configuration. By default, the default admin domain name is default_admin.\nNo.\n\nScenario Description\n\nSolution\n\nImpact\n\n\n\n1\n\nOnly the default admin domain is configured with HWTACACS authorization, authentication, or accounting. An error message is displayed when an HWTACACS template is bound to the default admin domain.\n[~HUAWEI-aaa-domain-default_admin] hwtacacs-server tac Error: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\n\nRun the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n[~HUAWEI-hwtacacs-tac] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tac] commit\n\nAfter the configurations are changed, user names that carry domain names are not supported. A login failure occurs if a user name carrying a domain name, such as, tacacs@default_admin is used for login.\n\n\n2\n\nAn error message is displayed when an HWTACACS template is bound to a non-default admin domain, that is, a domain having the adminuser-priority level configuration.\nThe HWTACACS configurations are as follows:\n[~HUAWEI-hwtacacs-tac] display this \n# \nhwtacacs-server template tac \n  hwtacacs-server 192.168.0.2\n  hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%\n#\n  undo hwtacacs-server user-name domain-included \n#\nThe configurations of the non-default admin domain are as follows:\n[~HUAWEII-aaa-domain-dom1] display this \n # \n domain dom1  \n adminuser-priority 3 \n#\nAn error message is displayed when the HWTACACS template is bound to the non-default admin domain:\n[~HUAWEI-aaa-domain-dom1] hwtacacs-server tac\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\n\n- 1. Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n[~HUAWEI] hwtacacs-server template tac \n[~HUAWEI-hwtacacs-tac] hwtacacs-server user-name original \n[*HUAWEI-hwtacacs-tac] commit\n- 2. Add user names that carry domain names on the HWTACACS server.For example, add the user name user001@dom1 for an existing user name user001.\n\nNone.\n\n\n3\n\nAn error message is displayed when the HWTACACS template bound to a non-admin domain is bound to the default admin domain.\nAn error message is displayed when the HWTACACS template is bound to the default admin domain:\n[~HUAWEI-aaa-domain-default_admin] hwtacacs-server tac\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nThe configurations of the non-admin domain are as follows:\n[~HUAWEI-aaa-domain-dom2] display this \n # \n domain dom2  \n hwtacacs-server tac \n#\n\n- 1. Create another HWTACACS template that has the same configurations as the HWTACACS template bound to the non-admin domain.\n[~HUAWEI] hwtacacs-server template tacnew\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[~HUAWEI-hwtacacs-tacnew] hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\n[*HUAWEI-hwtacacs-tacnew] commit\n- 2.Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n[~HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnew\n hwtacacs-server 192.168.0.2\n hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\n hwtacacs-server user-name original\n#\n- 3.Bind the new HWTACACS template to the default admin domain.\n[~HUAWEI-aaa-domain-default_admin] hwtacacs-server tacnew\n[*HUAWEI-aaa-domain-default_admin] commit\n\nAfter the configurations are changed, user names that carry the default admin domain name, such as tacacs@default_admin, are not supported. A login failure occurs if a user name carrying the default admin domain name is used for login. User names that carry common domain names, such as tacacs@dom2, are supported.\n\n\n4\n\nAn error message is displayed when an HWTACACS template bound to a non-admin domain is bound to a common admin domain.\nAn HWTACACS template is bound to the non-admin domain:\n[~HUAWEI-aaa-domain-dom2] display this \n#\n domain dom2\n  hwtacacs-server tac\n#\nAn error message is displayed when the HWTACACS template is bound to the common admin domain:\n[~HUAWEI-aaa-domain-dom1] hwtacacs-server tacError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\n\n- 1. Create another HWTACACS template that has the same configurations as the HWTACACS template bound to the non-admin domain.\n[~HUAWEI] hwtacacs-server template tacnew\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[~HUAWEI-hwtacacs-tacnew] hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\n- 2. Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnew\n hwtacacs-server 192.168.0.2\n hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\n hwtacacs-server user-name original\n#\n- 3. Bind the new HWTACACS template to the common admin domain.\n[~HUAWEI-aaa-domain-dom1] hwtacacs-server tacnew\n[*HUAWEI-aaa-domain-dom1] commit\n- 4. Add user names that carry domain names on the HWTACACS server.For example, add the user name user001@dom1 for an existing user name user001.\n\nNone."
}