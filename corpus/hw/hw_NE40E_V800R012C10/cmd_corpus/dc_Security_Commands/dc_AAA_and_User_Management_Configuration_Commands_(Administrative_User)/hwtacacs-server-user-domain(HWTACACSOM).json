{
    "PageTitle": "hwtacacs-server user-name",
    "FuncDef": "The hwtacacs-server user-name domain-included command appends the domain name to a user name while sending HWTACACS request packets.\nThe undo hwtacacs-server user-name domain-included command excludes the domain name from a user name while sending HWTACACS request packets.\nThe hwtacacs-server user-name original command sends the user name in the same format as entered by user while sending HWTACACS access request packets.\nBy default, the user name contains the domain name.",
    "CLIs": [
        "hwtacacs-server user-name domain-included",
        "hwtacacs-server user-name original",
        "undo hwtacacs-server user-name domain-included"
    ],
    "ParentView": [
        "HWTACACS server template view"
    ],
    "ParaDef": null,
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] hwtacacs-server template htipl",
            "[*HUAWEI-hwtacacs-htipl] hwtacacs-server user-name domain-included"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nThe format of a user name is \"user name@domain name\".\nIf the HWTACACS server does not accept the user name that contains the domain name, you can remove the domain name and then send it to the HWTACACS server.\nAfter the undo hwtacacs-server user-name domain-included command is configured, the user names contained in authentication request packets and authorization request packets do not contain domain names. On the contrary, the user names contained in account request packets contain domain names for the purpose of differentiating users.\nPrecautions\nThe undo hwtacacs-server user-name domain-included command configuration brings system security risks. Running the hwtacacs-server user-name original command is recommended.\nAn HWTACACS template having the undo hwtacacs-server user-name domain-included configuration cannot be bound to the default admin domain or a domain having the adminuser-priority configuration (configuration restoration is not affected).\nThe default admin domain is a domain configured using the default-domain admin command. An admin domain is the default admin domain or a domain having the adminuser-priority configuration. By default, the default admin domain name is default_admin.\nScenario 1:\nScenario Description:\nIf an HWTACACS template (for example, tac) is bound to only the default admin domain, an error message is displayed when the undo hwtacas-server user-name domain-included command is run in the view of the HWTACACS template.\n[~HUAWEI-aaa-domain-dom1] hwtacacs-server tac\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nThe current AAA configuration is as follows:\n[~HUAWEI-aaa] display this\n#\naaalocal-user root123 password irreversible-cipher $1c$S0'sK$EOY&$1X;cDL\"w6*Cb\\]X5gPx&%gt{8,GO@V/MHM3Qhz$O$\nlocal-user root123 service-type telnet ssh\nlocal-user root123 level 3\nlocal-user root123 state block fail-times 3 interval 5\n#\nauthentication-scheme default0\n#\nauthentication-scheme default1\n#\nauthentication-scheme defaultauthentication-mode hwtacas\n#\nauthorization-scheme default\n#\naccounting-scheme default0\n#\naccounting-scheme default1\n#\ndomain default0\n#\ndomain default1\n#\ndomain default_adminhwtacas-server tac\n#\ndomain default\n#\nSolution:\nRun the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n[~HUAWEI] hwtacacs-server template tac\n[*HUAWEI-hwtacacs-tac] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tac] commit\nImpact:\nAfter the configurations are changed, user names that carry domain names are not supported. A login failure occurs if a user name carrying a domain name, such as, tacacs@default_admin is used for login.\nScenario 2:\nScenario Description:\nIf an HWTACACS template is bound to both the default admin domain and common domain, an error message is displayed when the undo hwtacas-server user-name domain-included command is run in the view of the HWTACACS template.\n[*HUAWEI-aaa-domain-dom1] hwtacacs-server tac\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nThe current AAA configuration is as follows:\n[~HUAWEI-aaa] display this\n#\naaalocal-user root123 password irreversible-cipher $1c$S0'sK$EOY&$1X;cDL\"w6*Cb\\]X5gPx&%gt{8,GO@V/MHM3Qhz$O$\nlocal-user root123 service-type telnet ssh\nlocal-user root123 level 3\nlocal-user root123 state block fail-times 3 interval 5\n#\nauthentication-scheme default0\n#\nauthentication-scheme default1\n#\nauthentication-scheme defaultauthentication-mode hwtacas\n#\nauthorization-scheme default\n#\naccounting-scheme default0\n#\naccounting-scheme default1\n#\ndomain default0\n#\ndomain default1\n#\ndomain default_adminhwtacas-server tac\n#\ndomain dom2hwtacas-server tac\n#\ndomain default\n#\nSolution:Create another HWTACACS template that has the same configurations as the HWTACACS template bound to the non-admin domain.\n\n[~HUAWEI] hwtacacs-server template tacnew\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[~HUAWEI-hwtacacs-tacnew] hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#2.Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tac] commit\n[*HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnewhwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nhwtacacs-server user-name original\n#3.Bind the new HWTACACS template to the default admin domain.\n\n[-aaa-domain-default_admin] hwtacacs-server tacnew\n[-aaa-domain-default_admin] commit\nImpact:\nAfter the configurations are changed, user names that carry domain names are not supported. A login failure occurs if a user name carrying a domain name, such as, tacacs@default_admin is used for login.\nScenario 3:\nScenario Description:\nIf an HWTACACS template is bound to only the non-default admin domain, an error message is displayed when the undo hwtacas-server user-name domain-included command is run in the view of the HWTACACS template.\n[~HUAWEI-hwtacacs-tac] undo hwtacas-server user-name domain-included\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nThe current AAA configuration is as follows:\n[~HUAWEI-aaa] display this#\naaalocal-user root123 password irreversible-cipher $1c$S0'sK$EOY&$1X;cDL\"w6*Cb\\]X5gPx&%gt{8,GO@V/MHM3Qhz$O$\nlocal-user root123 service-type telnet ssh\nlocal-user root123 level 3\nlocal-user root123 state block fail-times 3 interval 5\n#\nauthentication-scheme default0\n#\nauthentication-scheme default1\n#\nauthentication-scheme defaultauthentication-mode radius\n#\nauthorization-scheme default\n#\naccounting-scheme default0\n#\naccounting-scheme default1\n#\ndomain default0\n#\ndomain default1\n#\ndomain default_admin\n#\ndomain dom1adminuser-priority 3\nhwtacas-server tac\n#\ndomain default\n#\nSolution:Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnewhwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nhwtacacs-server user-name original\n#2.Add user names that carry domain names on the HWTACACS server.\n\nFor example, add the user name user001@dom1 for an existing user name user001.\nImpact:None\nScenario 4:\nScenario Description:\nIf an HWTACACS template is bound to both the non-default admin domain and common domain, an error message is displayed when the undo hwtacas-server user-name domain-included command is run in the view of the HWTACACS template.\n[~HUAWEI-hwtacacs-tac] undo hwtacas-server user-name domain-included\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nThe current AAA configuration is as follows:\n[~HUAWEI-aaa] display this\n#\naaalocal-user root123 password irreversible-cipher $1c$S0'sK$EOY&$1X;cDL\"w6*Cb\\]X5gPx&%gt{8,GO@V/MHM3Qhz$O$\nlocal-user root123 service-type telnet ssh\nlocal-user root123 level 3\nlocal-user root123 state block fail-times 3 interval 5\n#\nauthentication-scheme default0\n#\nauthentication-scheme default1\n#\nauthentication-scheme defaultauthentication-mode radius\n#\nauthorization-scheme default\n#\naccounting-scheme default0\n#\naccounting-scheme default1\n#\ndomain default0\n#\ndomain default1\n#\ndomain default_admin\n#\ndomain dom1adminuser-priority 3\nhwtacas-server tac\n#\ndomain dom2hwtacas-server tac\n#\ndomain default\n#\nSolution:Create another HWTACACS template that has the same configurations as the HWTACACS template bound to the non-admin domain.\n\n[~HUAWEI] hwtacacs-server template tacnew\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[~HUAWEI-hwtacacs-tacnew] hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#2.Run the hwtacacs-server user-name original command to override the undo hwtacacs-server user-name domain-included configuration.\n\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnewhwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nhwtacacs-server user-name original\n#3.Bind the new HWTACACS template to the common admin domain.\n\n[~HUAWEI-aaa-domain-dom1] hwtacacs-server tacnew\n[*HUAWEI-aaa-domain-dom1] commit4.Add user names that carry domain names on the HWTACACS server.\n\nFor example, add the user name user001@dom1 for an existing user name user001.\nImpact: None."
}