{
    "PageTitle": "default-domain(AAA view)",
    "FuncDef": "The default-domain command configures a domain name as a default domain name.\nThe undo default-domain command deletes the configured default domain name.\nBy default, the name of the default domain is default_admin for administrators and is default1 for access users.",
    "CLIs": [
        "default-domain access <default-access-domain-name>",
        "default-domain admin <default-admin-domain-name>",
        "undo default-domain access",
        "undo default-domain admin"
    ],
    "ParentView": [
        "AAA view"
    ],
    "ParaDef": [
        {
            "Parameters": "admin default-admin-domain-name",
            "Info": "Specifies a domain name. The value must be the name of an existing domain. You can run the domain command to configure a domain.\nThe value is a string of 1 to 64 case-insensitive characters. The *, ?, \", ', -, -- are not supported."
        },
        {
            "Parameters": "access default-access-domain-name",
            "Info": "Specifies a domain name. The value must be the name of an existing domain. You can run the domain command to configure a domain.\nThe value is a string of 1 to 64 case-insensitive characters. The *, ?, \", ', -, -- are not supported."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] aaa",
            "[~HUAWEI-aaa] domain first_domain",
            "[*HUAWEI-aaa-domain-first_domain] quit",
            "[*HUAWEI-aaa] default-domain admin first_domain"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nAll management users who do not provide domain names when logging in to the device belong to the default global management domain. If the system administrator wants to use a manually created domain (for example, first_domain) for authentication, the user must add the domain name delimiter and domain name (for example, @first_domain) when entering the user name. This may cause inconvenience. To facilitate user authentication, run the default-domain admin command to set the domain named first_domain as the default global management domain. With this configuration, @first_domain is automatically suffixed to user names.\nIf local authentication is used, the authentication succeeds only when the account entered by the user is the same as the account configured using the local-user password command. Assume that the default management domain is default_admin.\nIf a user attempts to log in using the user name huawei, the user can be successfully authenticated only when the local-user huawei password command is configured, and the user fails the authentication when the local-user huawei@default_admin password command is configured.If a user attempts to log in using the user name huawei@default_admin, the user can be successfully authenticated only when the local-user huawei@default_admin password command is configured, and the user fails the authentication when the local-user huawei password command is configured.\n\nPrecautions\nThere is only one default global management domain.\nBefore deleting a default management domain using the undo domain command, you must run the undo default-domain command to delete the configured default domain name. Otherwise, the default domain will fail to be deleted.\nEven if you run the default-domain command to configure a new default domain name, the system default domain cannot be deleted.\nAn HWTACACS template having the undo hwtacacs-server user-name domain-included configuration cannot be bound to the default admin domain or a domain having the adminuser-priority configuration (configuration restoration is not affected).\nThe default admin domain is a domain configured using the default-domain admin command. An admin domain is the default admin domain or a domain having the adminuser-priority configuration. By default, the default admin domain name is default_admin.\nScenario 1:\nScenario Description:Solution:An error message is displayed when a domain (dom1) is configured as the default admin domain using the default-domain admin dom1 command.\n[~HUAWEI-aaa] default-domain admin dom1\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\n2.Run the display this command in the HWTACACS server template view to check whether the undo hwtacacs-server user-name domain-included command is run for the template (tac).\n\n[~HUAWEI] hwtacacs-server template tac\n[~HUAWEI-hwtacacs-tac] display this\n#\nhwtacacs-server template tachwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nundo hwtacacs-server user-name domain-included\n#\nIf the undo hwtacacs-server user-name domain-included configuration does not exist, go to Step 6. If the configuration exists, go to Step 3.3.Create another HWTACACS server template that has the same configurations as the existing HWTACACS server template.\n\n[~HUAWEI] hwtacacs-server template tacnew\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#4.Run the hwtacas-server user-name original command to override the undo hwtacas-server user-name domain-included configuration.\n\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnewhwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nhwtacacs-server user-name original\n#5.Bind the new HWTACACS server template to dom1.\n\n[~HUAWEI] aaa\n[~HUAWEI-aaa] domain dom1\n[*HUAWEI-aaa-domain-dom1] hwtacacs-server tacnew\n[*HUAWEI-aaa-domain-dom1] commit6.Run the display this command to check whether the undo radius-server user-name domain-included command is run for the RADIUS server group named rad.\n\n[*HUAWEI] radius-server group rad\n[~HUAWEI-radius-rad] display this\n#\nradius-server template radradius-server shared-key-cipher %^%#c~`zCvqg.=Qh-fSl4;s&c<*5TaHp@Hw~th1Rj99%%^%#\nradius-server authentication 192.168.0.2 1812\nundo radius-server user-name domain-included\n#\nIf the undo radius-server user-name domain-included configuration does not exist, go to Step 7. If the configuration exists, go to Step 10.7.Create another RADIUS server group that has the same configurations as the existing RADIUS server group.\n\n[~HUAWEI] radius-server group radnew\n[~HUAWEI-radius-radnew] radius-server shared-key-cipher %^%#c~`zCvqg.=Qh-fSl4;s&c<*5TaHp@Hw~th1Rj99%%^%#\n[*HUAWEI-radius-radnew] radius-server authentication 192.168.0.2 18128.Run the radius-server user-name original command to override the undo radius-server user-name domain-included configuration.\n\n[*HUAWEI-radius-radnew] radius-server user-name original\n[*HUAWEI-radius-radnew] commit9.Bind the new RADIUS server group to dom1.\n\n[~HUAWEI] aaa\n[~HUAWEI-aaa] domain dom1\n[*HUAWEI-aaa-domain-dom1] radius-server radnew\n[*HUAWEI-aaa-domain-dom1] commit10.Run the default-domain admin dom1 command.\n[~HUAWEI] aaa\n[~HUAWEI-aaa] default-domain admin dom1\n[*HUAWEI-aaa-domain-dom1] commit\n\nImpact:After the configurations are changed, user names that carry domain names are not supported. A login failure occurs if a user name carrying a domain name, such as, user001@dom1, is used for login.\nScenario 2:\nScenario Description:\nAn error message is displayed when the default admin domain is restored using the undo default-domain admin command.\n[~HUAWEI-aaa] undo default-domain admin\nError: Configuring devices in a RADIUS server group or TACACS server template bound to the admin domain to send user names without domain names brings security risks. Changing the mode to using the original user name is recommended.\nSolution:Run the display this command in the domain view to check the RADIUS server group and HWTACACS server template configurations of dom1.\n\n[~HUAWEI-aaa] domain default_admin\n[~HUAWEI-aaa-domain-default_admin] display this#\ndomain default_adminhwtacacs-server tac\nradius-server group rad\n#2.Run the display this command in the HWTACACS server template view to check whether the undo hwtacacs-server user-name domain-included command is run for the template (tac).\n\n[~HUAWEI] hwtacacs-server template tac\n[~HUAWEI-hwtacacs-tac] display this\n#\nhwtacacs-server template tachwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nundo hwtacacs-server user-name domain-included\n#\nIf the undo hwtacacs-server user-name domain-included configuration does not exist, go to Step 6. If the configuration exists, go to Step 3.3.Create another HWTACACS server template that has the same configurations as the existing HWTACACS server template.\n\n[~HUAWEI] hwtacacs-server template tac\nInfo: Create a new HWTACACS-server template.\nWarning: To improve the service security, please run the hwtacacs-server shared-key command to configure a shared key.\n[*HUAWEI-hwtacacs-tacnew]  hwtacacs-server 192.168.0.2\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#4.Run the hwtacas-server user-name original command to override the undo hwtacas-server user-name domain-included configuration.\n\n[*HUAWEI-hwtacacs-tacnew] hwtacacs-server user-name original\n[*HUAWEI-hwtacacs-tacnew] commit\n[~HUAWEI-hwtacacs-tacnew] display this\n#\nhwtacacs-server template tacnewhwtacacs-server 192.168.0.2\nhwtacacs-server shared-key cipher %^%#/rZ2A\\A7\\1/S;S7/L$eD#~Ea#I36)3T#tNS_\\0-2%^%#\nhwtacacs-server user-name original\n#5.Bind the new HWTACACS server template to the default admin domain default_admin.\n\n[~HUAWEI] aaa\n[*HUAWEI-aaa] domain default_admin\n[*HUAWEI-aaa-domain-default_admin] hwtacacs-server tacnew\n[*HUAWEI-aaa-domain-default_admin] commit6.Run the display this command to check whether the undo radius-server user-name domain-included command is run for the RADIUS server group named rad.\n[*HUAWEI] radius-server group rad\n[*HUAWEI-radius-rad] display this\n\n#radius-server group rad radius-server shared-key-cipher %^%#c~`zCvqg.=Qh-fSl4;s&c<*5TaHp@Hw~th1Rj99%%^%#\nradius-server authentication 192.168.0.2 1812\nundo radius-server user-name domain-included\n#\nIf the undo radius-server user-name domain-included configuration does not exist, go to Step 7. If the configuration exists, go to Step 10.7.Create another RADIUS server group that has the same configurations as the existing RADIUS server group.\n\n[~HUAWEI] radius-server group radnew\nInfo: A new server-group is created.\nWarning: Please configure the shared-key. Configuring shared-key is mandatory to communicate with RADIUS server.\n[~HUAWEI-radius-radnew] radius-server shared-key-cipher %^%#c~`zCvqg.=Qh-fSl4;s&c<*5TaHp@Hw~th1Rj99%%^%#\n[*HUAWEI-radius-radnew] radius-server authentication 192.168.0.2 18128.Run the radius-server user-name original command to override the undo radius-server user-name domain-included configuration.\n\n[*HUAWEI-radius-radnew] radius-server user-name original\n[*HUAWEI-radius-radnew] commit9.Bind the new RADIUS server group to the default admin domain default_admin.\n\n[~HUAWEI] aaa\n[~HUAWEI-aaa] domain default_admin\n[~HUAWEI-aaa-domain-default_admin] radius-server radnew\n[~HUAWEI-aaa-domain-default_admin] commit10.Run the undo default-domain admin command.\n\n[~HUAWEI] aaa\n[~HUAWEI-aaa] domain default_admin\n[~HUAWEI-aaa-domain-default_admin] undo default-domain admin\n[*HUAWEI-aaa-domain-default_admin] commit\nImpact:\nAfter the configurations are changed, user names that carry domain names are not supported. A login failure occurs if a user name carrying a domain name, such as, user001@default_admin, is used for login."
}