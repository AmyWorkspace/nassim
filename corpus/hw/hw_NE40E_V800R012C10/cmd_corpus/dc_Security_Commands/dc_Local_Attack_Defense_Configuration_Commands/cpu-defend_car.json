{
    "PageTitle": "cpu-defend spu-car",
    "FuncDef": "The cpu-defend spu-car command configures CAR for packets on a service board.\nThe undo cpu-defend spu-car command disables CAR for packets on a service board.\nThe default CAR for each type of packet are described in the parameter description.",
    "CLIs": [
        "cpu-defend spu-car { icmp | tcp | udp | gre | bgp | default | total | pst | plain-sa-miss | ipsec-rekey | ike-tunnel-car | ike-total-car | ike-dpd | fast-channel | cipher-sa-miss | bfd-down | dslite-private-ipv4 | ip-option | mtu-exceed } { cir <cir-value> | cbs <cbs-value> } *",
        "cpu-defend spu-car { cgn-icmp | cgn-icmpv6 | cgn-ipv4-other | cgn-ipv6-other | cgn-ipv6-raw | cgn-total } { cir <cir-value> | cbs <cbs-value> } *",
        "undo cpu-defend spu-car { icmp | tcp | udp | gre | bgp | default | total | pst | plain-sa-miss | ipsec-rekey | ike-tunnel-car | ike-total-car | ike-dpd | fast-channel | cipher-sa-miss | bfd-down | dslite-private-ipv4 | ip-option | mtu-exceed }",
        "undo cpu-defend spu-car { cgn-icmp | cgn-icmpv6 | cgn-ipv4-other | cgn-ipv6-other | cgn-ipv6-raw | cgn-total }"
    ],
    "ParentView": [
        "Slot view"
    ],
    "ParaDef": [
        {
            "Parameters": "icmp",
            "Info": "Indicates ICMP protocol packets.\n-"
        },
        {
            "Parameters": "tcp",
            "Info": "Indicates TCP protocol packets.\n-"
        },
        {
            "Parameters": "udp",
            "Info": "Indicates UDP protocol packets.\n-"
        },
        {
            "Parameters": "gre",
            "Info": "Indicates GRE Keepalive packets.\n-"
        },
        {
            "Parameters": "bgp",
            "Info": "Indicates BGP protocol packets.\n-"
        },
        {
            "Parameters": "default",
            "Info": "Indicates protocol packets excluding the ICMP, TCP, UDP, GRP, and BGP packets.\n-"
        },
        {
            "Parameters": "total",
            "Info": "Indicates the total bandwidth of packets to be sent to the CPU on a board.\n-"
        },
        {
            "Parameters": "pst",
            "Info": "Indicates the PST protocol.\n-"
        },
        {
            "Parameters": "plain-sa-miss",
            "Info": "Indicates the CAR for the Plain SA Miss messages.\n-"
        },
        {
            "Parameters": "ipsec-rekey",
            "Info": "Indicates the CAR for the IPsec rekey messages.\n-"
        },
        {
            "Parameters": "ike-tunnel-car",
            "Info": "Indicates the tunnel CAR for the IKE protocol.\n-"
        },
        {
            "Parameters": "ike-total-car",
            "Info": "Indicates the total CAR for the IKE protocol.\n-"
        },
        {
            "Parameters": "ike-dpd",
            "Info": "Indicates the CAR for the IKE DPD messages.\n-"
        },
        {
            "Parameters": "fast-channel",
            "Info": "Indicates the fast channel protocol.\n-"
        },
        {
            "Parameters": "cipher-sa-miss",
            "Info": "Indicates the CAR for the Cipher SA Miss messages.\n-"
        },
        {
            "Parameters": "bfd-down",
            "Info": "Indicates the BFD DOWN protocol.\n-"
        },
        {
            "Parameters": "dslite-private-ipv4",
            "Info": "Indicates the ds-lite private IPv4 protocol.\n-"
        },
        {
            "Parameters": "ip-option",
            "Info": "Indicates IP OPTION protocol packets.\n-"
        },
        {
            "Parameters": "mtu-exceed",
            "Info": "Indicates MTU EXCEED protocol packets.\n-"
        },
        {
            "Parameters": "cir cir-value",
            "Info": "Specifies the CIR.\nThe value is an integer ranging from 0 to 10000, in pps. The default CIR for each type of packet is as follows:\nGRE packets: 1000 ppsBGP packets: 200 ppsICMP, TCP and BGP packets: 100 ppsThe total CAR for the IKE protocol: 4000ppsThe tunnel CAR for the IKE protocol: 600ppsThe CAR for the Plain SA Miss messages: 200ppsThe CAR for the Cipher SA Miss messages and the CAR for the IPsec rekey messages: 1000ppsThe CAR for the IKE DPD messages: 400ppsBfd-down packets: 2000 ppsFast-channel packets: 2000 ppsPST packets: 2000 ppsDslite-private-ipv4 packets: 50ppsIP OPTION packets: 200ppsMTU EXCEED packets: 200ppsCgn-icmp, cgn-icmpv6, cgn-ipv6-other and cgn-ipv6-raw packets: 1000ppsCgn-ipv4-other and cgn-total packets: 2000ppsOther packets: 100 pps"
        },
        {
            "Parameters": "cbs cbs-value",
            "Info": "Specifies the CBS.\nThe value is an integer ranging from 0 to 30000, in packets."
        },
        {
            "Parameters": "cgn-icmp",
            "Info": "Indicates CGN ICMP protocol packets.\n-"
        },
        {
            "Parameters": "cgn-icmpv6",
            "Info": "Indicates CGN ICMPv6 protocol packets.\n-"
        },
        {
            "Parameters": "cgn-ipv4-other",
            "Info": "Indicates CGN IPv4 other protocol packets.\n-"
        },
        {
            "Parameters": "cgn-ipv6-other",
            "Info": "Indicates CGN IPv6 other protocol packets.\n-"
        },
        {
            "Parameters": "cgn-ipv6-raw",
            "Info": "Indicates CGN IPv6 RAW packets.\n-"
        },
        {
            "Parameters": "cgn-total",
            "Info": "Indicates the total bandwidth of packets to be sent to the CPU on a CGN board.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] slot 1",
            "[*HUAWEI-slot-1] cpu-defend spu-car icmp cir 1000 cbs 3000"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nWhen a large number of users access a device and the CPU of the device is vulnerable to packet attacks or needs to process a large number of packets, you need to configure the CAR function. The CAR function enables the device to filter out invalid packets and limit the rate at which packets are sent to the CPU, ensuring that the CPU processes services normally.When a device is required to send or receive a large number of protocol packets, the bandwidth may be insufficient for these protocol packets, causing packet loss. To resolve this problem, set the CIR and CBS for protocol packets.\n\nPrecautions\nThe cpu-defend spu-car command applies only to the VSUF. In VS mode, this command is supported only by the admin VS."
}