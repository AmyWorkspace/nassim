{
    "PageTitle": "user-queue(qos profile view)",
    "FuncDef": "The user-queue command sets scheduling parameters for user queues in a QoS profile.\nThe undo user-queue command cancels the scheduling parameters that are configured for user queues in a QoS profile.\nBy default, no user-queue configuration exists in a QoS profile.",
    "CLIs": [
        "user-queue cir <cir-value> [ cbs <cbs-value> ] [ [ pir <pir-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ flow-mapping <mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ]",
        "user-queue cir <cir-value> [ cbs <cbs-value> ] [ [ pir <pir-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ flow-mapping <mapping-name> ] | [ queue-4cos-mapping <queue-mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ]",
        "user-queue { { cir <cir-value> [ cbs <cbs-value> ] [ [ pir <pir-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } | { cir-percentage <cir-percentage-value> [ cbs <cbs-value> ] [ [ pir-percentage <pir-percentage-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } }",
        "user-queue { { cir <cir-value> [ cbs <cbs-value> ] [ [ pir <pir-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ queue-4cos-mapping <queue-mapping-name> ] | [ flow-mapping <mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } | { cir-percentage <cir-percentage-value> [ cbs <cbs-value> ] [ [ pir-percentage <pir-percentage-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ queue-4cos-mapping <queue-mapping-name> ] | [ flow-mapping <mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } }",
        "user-queue { { cir <cir-value> [ cbs <cbs-value> ] [ [ pir <pir-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ flow-mapping <mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } | { cir-percentage <cir-percentage-value> [ cbs <cbs-value> ] [ [ pir-percentage <pir-percentage-value> [ pbs <pbs-value> ] [ pir-priority high ] ] | [ flow-queue <flow-queue-name> ] | [ flow-mapping <mapping-name> ] | [ user-group-queue <group-name> ] ] * [ inbound | outbound ] [ service-template <template-name> [ adjust-on-card ] ] } }",
        "undo user-queue [ inbound | outbound ]"
    ],
    "ParentView": [
        "QoS profile view"
    ],
    "ParaDef": [
        {
            "Parameters": "cbs cbs-value",
            "Info": "Specifies the value of CBS.\nThe value is an integer in the range of 1 to 4194304. The unit is byte. By default, cbs-value(byte) = cir-value(kbit/s)*10(ms)/8."
        },
        {
            "Parameters": "pir pir-value",
            "Info": "Specifies the value of PIR. The value of PIR should be more than or equal to the value of CIR.\nThe value is 0 or an integer ranging from 16 to 4294967294.\npir-value should be no less than the configured cir-value.\nIf pir pir-value is not configured, pir-value = cir-value by default."
        },
        {
            "Parameters": "pbs pbs-value",
            "Info": "Specifies the value of PBS.\nThe value is an integer in the range of 1 to 4194304. The unit is byte. By default, pbs-value(byte) = pir-value(kbit/s) x 10(ms)/8."
        },
        {
            "Parameters": "pir-priority high",
            "Info": "Indicates that the PIR priority of user queues is high.\n-"
        },
        {
            "Parameters": "flow-queue flow-queue-name",
            "Info": "Specifies the name of the flow queue profile.\nThe device supports the 8-CoS (BE/AF1/AF2/AF3/AF4/EF/CS6/CS7) flow queue mode, 4-CoS (cos0/cos1/cos2/cos3) flow queue mode and priority mode.\nThe name is a string of 1 to 31 characters."
        },
        {
            "Parameters": "flow-mapping mapping-name",
            "Info": "Specifies the name of a flow queue mapping.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "user-group-queue group-name",
            "Info": "Specifies the name of a user group queue.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "inbound",
            "Info": "Indicates that scheduling parameters are configured for incoming packets.\n-"
        },
        {
            "Parameters": "outbound",
            "Info": "Indicates that scheduling parameters are configured for outgoing packets.\n-"
        },
        {
            "Parameters": "service-template template-name",
            "Info": "Specifies the service profile that is applied.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "adjust-on-card",
            "Info": "Enables precision compensation on a subcard.\nThis parameter is applicable only to the eTM-installed subcard."
        },
        {
            "Parameters": "cir cir-value",
            "Info": "Specifies the CIR value for the user queue. The value must be smaller than the bandwidth of the interface.\nThe value is 0 or an integer ranging from 16 to 4294967294."
        },
        {
            "Parameters": "queue-4cos-mapping queue-mapping-name",
            "Info": "Specifies the name of a 4-CoS flow queue mapping profile. The mappings between 8-CoS priorities and 4-CoS priorities are configured in the profile. A 4-CoS flow queue mapping profile can be applied only after the flow queue profile is configured in 4-CoS (cos0/cos1/cos2/cos3) flow queue mode.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "cir-percentage cir-percentage-value",
            "Info": "Specifies the percentage value of CIR.\nThe value is an integer ranging from 1 to 100."
        },
        {
            "Parameters": "pir-percentage pir-percentage-value",
            "Info": "Specifies the percentage value of PIR.\nThe value is an integer ranging from 1 to 100."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] flow-queue test",
            "[*HUAWEI-flow-queue-template-test] quit",
            "[*HUAWEI] qos-profile p1",
            "[*HUAWEI-qos-profile-p1] user-queue cir 200 pir 600 flow-queue test"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] flow-queue test",
            "[*HUAWEI-flow-queue-template-test] quit",
            "[*HUAWEI] flow-mapping test",
            "[*HUAWEI-flow-mapping-test] quit",
            "[*HUAWEI] user-group-queue test",
            "[*HUAWEI-user-group-queue-test] quit",
            "[*HUAWEI] service-template test1",
            "[*HUAWEI-service-template-test1-slot-all] quit",
            "[*HUAWEI] qos-profile p1",
            "[*HUAWEI-qos-profile-p1] user-queue cir 200 pir 600 flow-queue test flow-mapping test user-group-queue test service-template test1"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] qos-profile new",
            "[*HUAWEI] commit",
            "[~HUAWEI-qos-profile-new] user-queue cir-percentage 80 pir-percentage 90",
            "[*HUAWEI-qos-profile-new] commit",
            "[~HUAWEI-qos-profile-new] quit",
            "[~HUAWEI] interface Eth-Trunk5",
            "[~HUAWEI-Eth-Trunk5] qos-profile new inbound"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nYou can configure user-queue parameters on an interface or in a domain. If the same user-queue configuration is required on multiple interfaces or domains, to reduce configuration workload, you can configure user-queue parameters in a QoS profile and apply the QoS profile to the interfaces or domains.\nTo allow the CIR/PIR of an Eth-Trunk interface or sub-interface to automatically change with the Eth-Trunk interface bandwidth, specify cir-percentage or pir-percentage in the command.\nPrerequisites\nThe flow queue mapping object, flow queue profile, and GQ used in the command must have been created before application and properly configured.\nFollow-up Procedure\nThe HQoS configuration takes effect on an interface only after a QoS profile that defines the HQoS configuration is applied to the interface.\nPrecautions\nThe service profile specified in this command can only be user-defined.\nThis command and the car command for the same direction in the interface view are mutually exclusive. That is, the two commands for the same direction cannot be both configured.\nThe QoS profile to which a 4-CoS flow queue profile is bound can be applied only to an AAA domain but not to an interface.\nIf a 4-CoS flow queue profile is specified in the command but not traffic direction is set (no inbound or outbound), the QoS profile cannot be applied to incoming traffic.\nIf the member interfaces of a trunk interface reside on TM subcards of different types on the same board and a QoS profile is applied to the trunk interface, outbound user-queue cannot be configured in the QoS profile.\nIf uni-directional user queue scheduling (on either incoming traffic or outgoing traffic) is already configured, you cannot configure user queue scheduling without specifying the traffic direction. Conversely, if directionless user queue scheduling is already configured, you cannot configure uni-directional user queue scheduling.\nOn the rear-end ETM subcards , if the network header length function is configured on the Qos profile which is applied on an outbound physical interface, the parameter adjust-on-card should be specified to ensure the network header length function validating.\nOn the rear-end ETM subcards ,\nIf the forward mode of VE interface is configured to be loopback mode and the network header length function is configured on the Qos profile which is applied on an outbound VE interface, the parameter adjust-on-card should be specified to ensure the network header length function validating.If the forward mode of VE interface is configured to be through mode and the network header length function is configured on the Qos profile which is applied on an outbound VE interface, the parameter adjust-on-card should not be specified to ensure the network header length function validating. If the network header length function is configured and the parameter adjust-on-card is specified in the user queue at the same time, the network header length function is invalid.\nIf cir-percentage has been configured in a QoS profile, a shared group cannot be configured in the profile using the qos-profile inbound group command.\nAfter the parameter settings in the QoS profile are updated, users need to go online again for the modification to take effect. To make the configuration take effect in real time, refer to the CoA function of RADIUS.\n\nIf a flow-queue profile in 4-queue mode is referenced using the command, the system does not support the inbound parameter."
}