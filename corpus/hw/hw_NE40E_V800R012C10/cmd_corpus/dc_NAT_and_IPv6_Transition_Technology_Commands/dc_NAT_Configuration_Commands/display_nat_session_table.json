{
    "PageTitle": "display nat session table",
    "FuncDef": "The display nat session table command displays information about NAT session entries.",
    "CLIs": [
        "display nat session table [ pat | no-pat ] [ verbose | source { inside <inside-address> | global <global-address> } | destination { inside <inside-address> | global <global-address> } | slot <slot-id> | source-vpn-instance <vpn-instance-name> | destination-vpn-instance <vpn-instance-name> | protocol { <protocol-number> | tcp | udp | icmp | esp | gre | sctp | udplite } | destination-port <port-number> | source-port-global <source-port-global-number> | nat-instance <instance-name> | alg { all | ftp | pptp | rtsp | sip | dns } | long-link ] *",
        "display nat session table [ 3-tuple-map ] [ pcp ] [ pat | no-pat ] [ verbose | source { inside <inside-address> | global <global-address> | ipv6 <ipv6-address> } | destination { inside <inside-address> | global <global-address> | ipv6 <ipv6-address> } | slot <slot-id> [ engine <engine-id> | card <card-id> ] [ no-hit ] [ session-number <number> ] [ extendable ] | source-vpn-instance <vpn-instance-name> | destination-vpn-instance <vpn-instance-name> | protocol { <protocol-number> | tcp | udp | icmp | esp | gre | sctp | udplite } | destination-port <port-number> | source-port-global <source-port-global-number> | user-id <user-id> | cpe <cpe-address> [ prefix-length <prefix-length> ] | { nat-instance <instance-name> [ alg { all | ftp | pptp | rtsp | sip } ] | dslite-instance <instance-name> [ alg { all | ftp | pptp | rtsp | sip } ] | nat64-instance <instance-name> [ alg { all | ftp | dns | http } ] | alg { all | ftp | pptp | rtsp | sip | dns | http } } | long-link ] *"
    ],
    "ParentView": [
        "All views"
    ],
    "ParaDef": [
        {
            "Parameters": "pat",
            "Info": "Displays PAT session entries.\n-"
        },
        {
            "Parameters": "no-pat",
            "Info": "Displays NO-PAT session entries.\n-"
        },
        {
            "Parameters": "verbose",
            "Info": "Displays detailed information about NAT session entries.\n-"
        },
        {
            "Parameters": "source",
            "Info": "Source IP address.\n-"
        },
        {
            "Parameters": "inside inside-address",
            "Info": "Displays NAT session entry information with a specified private IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "global global-address",
            "Info": "Displays NAT session entry information with a specified public IP address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "destination",
            "Info": "Destination IP address.\n-"
        },
        {
            "Parameters": "slot slot-id",
            "Info": "Specifies the slot ID of a service board.\nThe value is a string of 1 to 15 case-sensitive characters, spaces not supported."
        },
        {
            "Parameters": "source-vpn-instance vpn-instance-name",
            "Info": "Displays NAT session entry information with a specified source VPN instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "destination-vpn-instance vpn-instance-name",
            "Info": "Displays NAT session entry information with a specified destination VPN instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "protocol protocol-number",
            "Info": "Displays NAT session entry information with a specified protocol number.\nThe value is an integer ranging from 0 to 255."
        },
        {
            "Parameters": "tcp",
            "Info": "Displays NAT session entries of TCP.\n-"
        },
        {
            "Parameters": "udp",
            "Info": "Displays NAT session entries of UDP.\n-"
        },
        {
            "Parameters": "icmp",
            "Info": "Displays NAT session entries of ICMP.\n-"
        },
        {
            "Parameters": "esp",
            "Info": "Displays NAT session entries of ESP.\n-"
        },
        {
            "Parameters": "gre",
            "Info": "Displays NAT session entries of GRE.\n-"
        },
        {
            "Parameters": "sctp",
            "Info": "Displays NAT session entries of SCTP.\n-"
        },
        {
            "Parameters": "udplite",
            "Info": "Displays NAT session entries of UDPLITE.\n-"
        },
        {
            "Parameters": "destination-port port-number",
            "Info": "Displays NAT session entry information with a specified destination port number.\nThe value is an integer ranging from 0 to 65535."
        },
        {
            "Parameters": "source-port-global source-port-global-number",
            "Info": "Displays NAT session entry information with a specified source public port number.\nThe value is an integer ranging from 0 to 65535."
        },
        {
            "Parameters": "nat-instance instance-name",
            "Info": "Displays NAT session entry information with a specified NAT instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "alg",
            "Info": "Application Layer Gateway.\n-"
        },
        {
            "Parameters": "all",
            "Info": "NAT ALG for all protocols.\n-"
        },
        {
            "Parameters": "ftp",
            "Info": "Enables NAT ALG for FTP.\n-"
        },
        {
            "Parameters": "pptp",
            "Info": "Enables NAT ALG for PPTP.\n-"
        },
        {
            "Parameters": "rtsp",
            "Info": "Enables NAT ALG for RTSP.\n-"
        },
        {
            "Parameters": "sip",
            "Info": "Enables NAT ALG for SIP.\n-"
        },
        {
            "Parameters": "dns",
            "Info": "Enables NAT ALG for DNS.\n-"
        },
        {
            "Parameters": "long-link",
            "Info": "Specifies a long-connection session entry. This parameter applies only to NAT instances.\n-"
        },
        {
            "Parameters": "3-tuple-map",
            "Info": "Displays information about entries in the 3-tuple NAT session table in the 5-tuple mode. This parameter can only be configured on a VSUF-80/VSUF-160/VSUI-160-E/VSUI-400/VSUI-400-E/VSUI-400A/VSUI-400A-E/VSUI-400-S/VSUI-400A-S.\n-"
        },
        {
            "Parameters": "pcp",
            "Info": "Displays information about PCP session entries.\n-"
        },
        {
            "Parameters": "ipv6 ipv6-address",
            "Info": "Displays NAT session entry information with a specified source IPv6 address.\nThe value is a 32-bit hexadecimal number in the format of X:X::X:X."
        },
        {
            "Parameters": "engine engine-id",
            "Info": "Specifies the CPU ID of a service board. This parameter can only be configured on a VSUF-80/VSUF-160/VSUI-160-E/VSUI-400/VSUI-400-E/VSUI-400A/VSUI-400A-E/VSUI-400-S/VSUI-400A-S.\nThe value can be 0 to 3."
        },
        {
            "Parameters": "card card-id",
            "Info": "Specifies the CPU ID of a subcard on a service board. This parameter can only be configured on a VSUF-80/VSUF-160/VSUI-160-E.\nThe value is an integer that ranges from 0 to 1."
        },
        {
            "Parameters": "no-hit",
            "Info": "Specifies the TCP session that is not matched.\n-"
        },
        {
            "Parameters": "session-number number",
            "Info": "Specifies the number of TCP/UDP sessions.\nThe value is an integer ranging from 1 to 10000."
        },
        {
            "Parameters": "extendable",
            "Info": "Specifies the flag for collecting data about suddent traffic drop.\n-"
        },
        {
            "Parameters": "user-id user-id",
            "Info": "Displays NAT session entry information with a specified user-id. This parameter can only be configured on a VSUF-80/VSUF-160/VSUI-160-E/VSUI-400/VSUI-400-E/VSUI-400A/VSUI-400A-E/VSUI-400-S/VSUI-400A-S.\nIn VS mode, this parameter is supported only by the admin VS.\nThe value is an integer ranging from 0 to 4294967295."
        },
        {
            "Parameters": "cpe cpe-address",
            "Info": "Displays session entry information based on the IPv6 address of a home gateway.\nThe value is a 32-bit hexadecimal number in the format of X:X::X:X."
        },
        {
            "Parameters": "prefix-length prefix-length",
            "Info": "Displays session entry information based on the prefix length of the IPv6 address of a home gateway.\nThe value is an integer ranging from 1 to 128."
        },
        {
            "Parameters": "dslite-instance instance-name",
            "Info": "Displays DS-Lite session entry information with a specified DS-Lite instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "nat64-instance instance-name",
            "Info": "Displays NAT64 session entry information with a specified NAT64 instance name.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "http",
            "Info": "Enables NAT ALG for HTTP.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> display nat session table",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 4 Engine: 0",
            "Current total sessions: 1.",
            "  udp: 10.1.1.5:1120[10.2.2.1:1033]-->172.17.2.2:0"
        ],
        [
            "<HUAWEI> display nat session table verbose",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Engine: 0",
            "Current total sessions: 2.",
            " udp: 10.1.1.5:1120[10.2.2.1:1033]-->172.17.2.2:0 ",
            "      172.17.2.2:0-->10.2.2.1:1033[10.1.1.5:1120] ",
            " NAT Instance:huawei",
            " User-id:1218",
            " VPN:vpn1-->-vpn2 ",
            " Tag:0x2,FixedTag:0x1, Status:hit, NPFlag:0x6, Create:2014-7-10 17:21:46,TTL:00:02:00 ,Left:00:01:59 , Master ",
            " AppProID: 0x0, CPEIP:10.1.1.5, FwdType:NATPT",
            "gre: 1.1.1.1[2.2.2.2]-->3.3.3.3:49183",
            "       3.3.3.3:49183-->2.2.2.2:0[1.1.1.1:0]",
            "  NAT Instance: 10",
            "  VPN:--->-",
            "  Tag:0x0,FixedTag:0x1, Status:no-hit, NPFlag:0x6, Create:2018-2-27 11:28:28,TTL:00:04:00 ,Left:00:04:00 , Master",
            "  AppProID: 0x0, CPEIP:1.1.1.1, FwdType:NATPT"
        ],
        [
            "<HUAWEI> display nat session table nat-instance nat1 alg ftp verbose",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 4 Engine: 0",
            "Current total sessions: 1.",
            "  tcp: 2.2.2.2:5000-->3.3.3.1:21[1.1.1.2:21]",
            "       1.1.1.2:21[3.3.3.1:21]-->2.2.2.2:5000",
            "  NAT Instance:nat1",
            "  VPN:--->-",
            "  Tag:0x2, FixedTag:0x1, Status:hit, NPFlag:0x6, Create:2019-4-16 10:38:46, TTL:00:10:00, Left:00:10:00, Master",
            "  AppProID: 0x2, CPEIP:1.1.1.2, FwdType:NATPT"
        ],
        [
            "<HUAWEI> display nat session table long-link verbose",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Engine: 0",
            "Current total sessions: 1.",
            "  tcp: 10.1.1.5:1120[10.2.2.1:1033]-->172.17.2.2:0                                                                                    ",
            "       172.17.2.2:0-->10.2.2.1:1033[10.1.1.5:1120]                                                                                    ",
            "  NAT Instance: nat1                                                                                                                 ",
            "  VPN:vpn1-->-vpn2                                                                                                                         ",
            "  Tag:0x2,FixedTag:0x1, Status:hit, NPFlag:0x6, Create:2016-8-2 15:59:00,TTL:24000:00:00 ,Left:24000:00:00, Master                             ",
            "  AppProID: 0x0, FwdType:NATPT(NO-PAT)"
        ],
        [
            "<HUAWEI> display nat session table alg ftp slot 1 card 0 verbose",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Card: 0",
            "Current total sessions: 1.",
            "  tcp: 172.16.1.5:100[1.1.1.5:1220]-->11.1.1.5:21",
            "       11.1.1.5:21-->1.1.1.5:1220[172.16.1.5:100]",
            "  DS-Lite Instance: ds-lite1 ",
            "  VPN:--->-",
            "  Tag:0x0,FixedTag:0x1, Status:no-hit, NPFlag:0x6, Create:2019-5-7 18:54:25,TTL:00:05:00 ,Left:00:05:00 , Master",
            "  AppProID: 0x2, CPEIP:8121::3, FwdType:DSLITE"
        ],
        [
            "<HUAWEI> display nat session table nat64-instance cpe1 alg ftp verbose slot 1 card 0",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Card: 0",
            "Current total sessions: 1.",
            "",
            "  tcp: [2001:db8::2]:5000(11.11.11.1:1024)-->[2001:db8::BFBF:BF81]:21(1.1.1.129:21)",
            "       (1.1.1.129:21)[2001:db8::BFBF:BF81]:21-->[11.11.11.1:1024](2001:db8::2):5000",
            "  NAT64 Instance: cpe1",
            "  VPN:--->-",
            "  Tag:0x8000002,FixedTag:0x1, Status:hit, NPFlag:0x6, Create:2019-5-7 16:21:07,TTL:00:00:05 ,Left:00:00:05 , Master",
            "  AppProID: 0x2, FwdType:NAT64"
        ],
        [
            "<HUAWEI> display nat session table pcp verbose",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Engine: 0",
            "Current total sessions: 1.",
            "  udp: 10.1.1.2:4321[10.111.111.1:1025]--> *:*",
            "       *:* -->10.111.111.1:1025[10.1.1.2:4321]",
            "  NAT Instance: pcp1",
            "  VPN:--->-Tag:0x0,FixedTag:0x1, Status:no-hit, NPFlag:0x6, Create:2017-7-25 17:19:32,TTL:11:06:40 ,Left:11:06:40 , Master",
            "  AppProID: 0x0, CPEIP:10.1.1.2, FwdType:NATPT",
            "  Dest-ip:*,Dest-port:*",
            "  PCP Description:test  ",
            "  PCP Filter IP:10.1.1.10  PCP Filter Mask:255.255.255.255  PCP Filter Port:6000"
        ],
        [
            "<HUAWEI> display nat session table",
            "This operation will take a few minutes. Press 'Ctrl+C' to break ...",
            "Slot: 1 Engine: 0",
            "Current total sessions: 1.",
            "  icmp: 1.1.1.2:2[2.2.2.1:3149]--> *:*",
            "  *:*-->2.2.2.1:3149[1.1.1.2:2]",
            "  NAT Instance: 88",
            "  VPN:--->-",
            "  Tag:0x0,FixedTag:0x1, Status:no-hit, NPFlag:0x6, Create:2018-3-20 14:47:49,TTL:00:00:20 ,Left:00:00:20 , Master",
            "  AppProID: 0x0, CPEIP:1.1.1.2, FwdType:NATPT",
            "  Dest-ip:11.1.1.2,Type-code:2048"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nTo view information about NAT session entries based on a specified IP address, port number, and protocol type, run the display nat session table command. The command output contains information about established NAT sessions.\nPrecautions\nWhen the device executes the display nat session table command, the device queries each flow table and counts the total number of flow tables. The total number is displayed in the following output Current total sessions. The device then displays the latest flow table information. During this process, if flow tables are created or deleted after aging, the total number of displayed flow tables in the following output differs that that in the preceding output Current total sessions."
}