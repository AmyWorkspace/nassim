{
    "PageTitle": "flow",
    "FuncDef": "The flow command configures a target flow in an iFIT instance.\nThe undo flow command deletes a target flow in an iFIT instance.\nBy default, a target flow in an iFIT instance in not configured.",
    "CLIs": [
        "flow unidirectional source <source-ip> [ <source-mask> ] destination <destination-ip> [ <destination-mask> ] [ protocol { { tcp | udp | sctp | <protocol-number4> | <protocol-number5> | <protocol-number6> } [ source-port <source-port> ] [ destination-port <destination-port> ] | { <protocol-number> | <protocol-number7> | <protocol-number8> | <protocol-number3> } } ] [ dscp <dscp-value> ] [ vpn-instance <vpn-instance-name> ]",
        "flow unidirectional source-ipv6 any destination-ipv6 any { vpn-instance <vpn-instance-name> } { peer-ip <peer-ip-address> | peer-locator <locator-ipv6-prefix> <locator-prefix-length> }",
        "flow unidirectional source any destination any { vpn-instance <vpn-instance-name> } { peer-ip <peer-ip-address> | peer-locator <locator-ipv6-prefix> <locator-prefix-length> }",
        "undo flow unidirectional source <source-ip> [ <source-mask> ] destination <destination-ip> [ <destination-mask> ] [ protocol { { tcp | udp | sctp | <protocol-number4> | <protocol-number5> | <protocol-number6> } [ source-port <source-port> ] [ destination-port <destination-port> ] | { <protocol-number> | <protocol-number7> | <protocol-number8> | <protocol-number3> } } ] [ dscp <dscp-value> ] [ vpn-instance <vpn-instance-name> ]",
        "undo flow",
        "undo flow unidirectional source-ipv6 any destination-ipv6 any { vpn-instance <vpn-instance-name> } { peer-ip <peer-ip-address> | peer-locator <locator-ipv6-prefix> <locator-prefix-length> }",
        "undo flow unidirectional source any destination any { vpn-instance <vpn-instance-name> } { peer-ip <peer-ip-address> | peer-locator <locator-ipv6-prefix> <locator-prefix-length> }"
    ],
    "ParentView": [
        "iFIT-instance view"
    ],
    "ParaDef": [
        {
            "Parameters": "unidirectional",
            "Info": "The unidirectional flow.\n-"
        },
        {
            "Parameters": "source source-ip",
            "Info": "Specifies a source IPv4 address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "source-mask",
            "Info": "Specifies a mask length for the source IPv4 address of a target flow.\nThe value is an integer ranging from 1 to 32."
        },
        {
            "Parameters": "destination destination-ip",
            "Info": "Specifies a destination IPv4 address.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "destination-mask",
            "Info": "Specifies a mask length for the destination IPv4 address of a target flow.\nThe value is an integer ranging from 1 to 32."
        },
        {
            "Parameters": "protocol",
            "Info": "Specifies the protocol type of a target flow.\n-"
        },
        {
            "Parameters": "tcp",
            "Info": "TCP.\n-"
        },
        {
            "Parameters": "udp",
            "Info": "UDP.\n-"
        },
        {
            "Parameters": "protocol-number4",
            "Info": "Specifies a UDP number for a target flow.\nThe value is 17."
        },
        {
            "Parameters": "protocol-number5",
            "Info": "Specifies a TCP number for a target flow.\nThe value is 6."
        },
        {
            "Parameters": "source-port source-port",
            "Info": "Specifies a start source port number for a target flow.\nThe value is an integer ranging from 1 to 65535."
        },
        {
            "Parameters": "destination-port destination-port",
            "Info": "Specifies a start destination port number for a target flow.\nThe value is an integer ranging from 1 to 65535."
        },
        {
            "Parameters": "protocol-number",
            "Info": "Specifies a protocol number for a target flow.\nThe value is an integer ranging from 0 to 5."
        },
        {
            "Parameters": "protocol-number3",
            "Info": "Specifies a protocol number for a target flow.\nThe value is an integer ranging from 7 to 16."
        },
        {
            "Parameters": "vpn-instance vpn-instance-name",
            "Info": "Specifies the name of a VPN instance.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported. In addition, the VPN instance name must not be _public_. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "sctp",
            "Info": "SCTP.\n-"
        },
        {
            "Parameters": "protocol-number6",
            "Info": "Specifies an SCTP number for a target flow.\nThe value is 132."
        },
        {
            "Parameters": "protocol-number7",
            "Info": "Specifies a protocol number for a target flow.\nThe value is an integer ranging from 18 to 131."
        },
        {
            "Parameters": "protocol-number8",
            "Info": "Specifies a protocol number for a target flow.\nThe value is an integer ranging from 133 to 254."
        },
        {
            "Parameters": "dscp dscp-value",
            "Info": "Specifies a DSCP value.\nThe value is an integer ranging from 0 to 63."
        },
        {
            "Parameters": "source-ipv6",
            "Info": "Specifies a source IPv6 address.\n-"
        },
        {
            "Parameters": "destination-ipv6",
            "Info": "Specifies a destination IPv6 address.\n-"
        },
        {
            "Parameters": "any",
            "Info": "Any Address.\n-"
        },
        {
            "Parameters": "peer-ip peer-ip-address",
            "Info": "Specifies the next-hop IP address of a target flow.\nThe value is in dotted decimal notation."
        },
        {
            "Parameters": "peer-locator locator-ipv6-prefix",
            "Info": "Specifies the next-hop locator prefix of a target flow.\nThe value is a 32-digit hexadecimal number, in the format of X:X:X:X:X:X:X:X."
        },
        {
            "Parameters": "locator-prefix-length",
            "Info": "Specifies the mask length of the next-hop locator prefix of a target flow.\nThe value is an integer ranging from 32 to 120."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip vpn-instance 123",
            "[*HUAWEI-vpn-instance-123] ipv4-family",
            "[*HUAWEI-vpn-instance-123-af-ipv4] commit",
            "[~HUAWEI-vpn-instance-123-af-ipv4] quit",
            "[~HUAWEI-vpn-instance-123] quit",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip binding vpn-instance 123",
            "[*HUAWEI-GigabitEthernet1/0/0] commit",
            "[~HUAWEI-GigabitEthernet1/0/0] quit",
            "[~HUAWEI] ifit",
            "[*HUAWEI-ifit] instance abc",
            "[*HUAWEI-ifit-instance-abc] flow unidirectional source 10.10.10.1 24 destination 10.10.10.2 24 vpn-instance 123"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ifit",
            "[*HUAWEI-ifit] instance  abc",
            "[*HUAWEI-ifit-instance-abc] undo flow unidirectional source 10.1.1.1 32 destination 10.2.2.2 16 vpn-instance 123"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip vpn-instance 123",
            "[*HUAWEI-vpn-instance-123] ipv4-family",
            "[*HUAWEI-vpn-instance-123-af-ipv4] commit",
            "[~HUAWEI-vpn-instance-123-af-ipv4] quit",
            "[~HUAWEI-vpn-instance-123] quit",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip binding vpn-instance 123",
            "[*HUAWEI-GigabitEthernet1/0/0] commit",
            "[~HUAWEI-GigabitEthernet1/0/0] quit",
            "[~HUAWEI] ifit",
            "[*HUAWEI-ifit] instance abc",
            "[*HUAWEI-ifit-instance-abc] flow unidirectional source any destination any vpn-instance 123 peer-ip 10.1.1.1"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip vpn-instance 123",
            "[*HUAWEI-vpn-instance-123] ipv4-family",
            "[*HUAWEI-vpn-instance-123-af-ipv4] commit",
            "[~HUAWEI-vpn-instance-123-af-ipv4] quit",
            "[~HUAWEI-vpn-instance-123] quit",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] ip binding vpn-instance 123",
            "[*HUAWEI-GigabitEthernet1/0/0] commit",
            "[~HUAWEI-GigabitEthernet1/0/0] quit",
            "[~HUAWEI] ifit",
            "[*HUAWEI-ifit] instance abc",
            "[*HUAWEI-ifit-instance-abc] flow unidirectional source any destination any vpn-instance 123 peer-locator 2001:db8:1::1 64"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nA target flow is a key element in iFIT and must be configured. To configure a target flow in an iFIT instance, run the flow command.\nPrecautions\nOnly one target flow can be configured in an iFIT instance.\nBroadcast IP addresses cannot be configured for a target flow.\nThe same flow characteristics cannot be configured for different iFIT instances.\nIn VS mode, this command is supported only by the admin VS.\nWhen iFIT end-to-end performance measurement is configured and PSP is enabled on the SRv6 tunnel bound to the iFIT instance, the statistics collection function of the iFIT instance becomes invalid."
}