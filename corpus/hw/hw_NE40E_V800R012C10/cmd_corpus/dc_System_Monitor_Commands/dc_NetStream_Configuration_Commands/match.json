{
    "PageTitle": "match",
    "FuncDef": "The match command configures the aggregation keywords of a flexible flow statistics template.\nThe undo match command deletes the aggregation keywords of the flexible flow statistics template.\nBy default, no aggregation keyword is configured for the flexible flow statistics template.",
    "CLIs": [
        "match { source | destination } { vlan | as | port | address | mask }",
        "match mpls top-label ip-address",
        "match mpls label <position>",
        "match { protocol | tos | direction | tcp-flag }",
        "match { input | output } interface",
        "match next-hop [ bgp ]",
        "match { source } { as | address }",
        "undo match { source | destination } { vlan | as | port | address | mask }",
        "undo match mpls top-label ip-address",
        "undo match mpls label <position>",
        "undo match { protocol | tos | direction | tcp-flag }",
        "undo match { input | output } interface",
        "undo match next-hop [ bgp ]",
        "undo match { source } { as | address }"
    ],
    "ParentView": [
        "NetStream IPv6 record view.",
        "NetStream record view"
    ],
    "ParaDef": [
        {
            "Parameters": "source",
            "Info": "Indicates aggregation based on the source end.\n-"
        },
        {
            "Parameters": "destination",
            "Info": "Indicates aggregation based on the destination end.\n-"
        },
        {
            "Parameters": "vlan",
            "Info": "Indicates aggregation based on the VLAN.\n-"
        },
        {
            "Parameters": "as",
            "Info": "Indicates aggregation based on the autonomous system (AS).\n-"
        },
        {
            "Parameters": "port",
            "Info": "Indicates aggregation based on the port number.\n-"
        },
        {
            "Parameters": "address",
            "Info": "Indicates aggregation based on the address.\n-"
        },
        {
            "Parameters": "mask",
            "Info": "Indicates aggregation based on the mask.\n-"
        },
        {
            "Parameters": "mpls",
            "Info": "Indicates the multi-protocol label switching.\n-"
        },
        {
            "Parameters": "top-label",
            "Info": "Indicates the top label.\n-"
        },
        {
            "Parameters": "ip-address",
            "Info": "Specifies the IP address.\n-"
        },
        {
            "Parameters": "label position",
            "Info": "Specifies the MPLS label location based on which aggregation is performed.\nThe value is an integer ranging from 1 to 3."
        },
        {
            "Parameters": "protocol",
            "Info": "Indicates aggregation based on the protocol type.\n-"
        },
        {
            "Parameters": "tos",
            "Info": "Indicates aggregation based on the ToS priority.\n-"
        },
        {
            "Parameters": "direction",
            "Info": "Indicates aggregation based on the flow direction.\n-"
        },
        {
            "Parameters": "tcp-flag",
            "Info": "Indicates aggregation based on the tcp-flag.\n-"
        },
        {
            "Parameters": "input",
            "Info": "Indicates aggregation based on the ingress port.\n-"
        },
        {
            "Parameters": "output",
            "Info": "Indicates aggregation based on the egress port.\n-"
        },
        {
            "Parameters": "interface",
            "Info": "Specifies the interface.\n-"
        },
        {
            "Parameters": "next-hop",
            "Info": "Indicates aggregation based on the next hop.\n-"
        },
        {
            "Parameters": "bgp",
            "Info": "Indicates aggregation based on the BGP protocol.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] ip netstream record tt",
            "[*HUAWEI-record-tt] match source address",
            "[*HUAWEI-record-tt] match source port",
            "[*HUAWEI-record-tt] match protocol",
            "[*HUAWEI-record-tt] match tos",
            "[*HUAWEI-record-tt] match direction"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nNetStream supports 17 aggregation modes. For each aggregation mode, original flows are classified and combined to generate aggregated flow information and are aged and exported to the server based on fixed rules. Flexible customization is not supported. Flexible flow packets provide a user-defined template for users to customize matching fields as required. The user-defined template improves traffic analysis accuracy and reduces network bandwidth occupation, CPU usage, and storage space usage.\nPrerequisites\nBefore you run the match command, run the ip netstream record or ipv6 netstream record command to create a flexible flow statistics template.\nPrecautions\nIf a flexible flow has been applied, you are not allowed to run the match command to modify the matching rules.\nThe maximum length that the flexible flow statistics template supports is 50 bytes, including the collect and match fields.\nLengths of the match fields:\naddress: 4 bytes for an IPv4 address and 16 bytes for an IPv6 addressmask: 1 byteport: 2 bytesvlan: 2 bytesas: 4 bytesmpls top-label ip-address: 4 bytesmpls label 1: 3 bytesmpls label 2: 3 bytesmpls label 3: 3 bytespotocol: 1 bytetos: 1 bytedirection: 1 bytetcp-flag: 1 byteinput interface: 4 bytesoutput interface: 4 bytesnext-hop: 4 bytes for an IPv4 address and 16 bytes for an IPv6 addressbgp next-hop: 4 bytes for an IPv4 address and 16 bytes for an IPv6 address\nLengths of the collect fields:\nfirst: 4 byteslast: 4 bytespackets: 4 bytesbytes: 4 bytes"
}