{
    "PageTitle": "tlp",
    "FuncDef": "The tlp command configures a Target Logical Port (TLP) for an IP Flow Performance Measurement (IP FPM) instance and specifies the TLP role.\nThe undo tlp command deletes a TLP of an IP FPM instance.\nBy default, no TLP is configured for an IP FPM instance in a load-balancing scenario.",
    "CLIs": [
        "tlp <tlp-id> { in-point | out-point } { ingress | egress } [ vpn-label <vpn-label> [ lsp-label <lsp-label> ] ] [ backward-vpn-label <backward-vpn-label> [ backward-lsp-label <backward-lsp-label> ] ]",
        "tlp <tlp-id> mid-point flow { forward | backward } { ingress | egress } [ vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 { lsp-label2 | any } ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] ]",
        "tlp <tlp-id> mid-point flow bidirectional { ingress | egress } [ forward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 { lsp-label2 | any } ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] ] [ backward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 { lsp-label2 | any } ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] ]",
        "tlp <tlp-id> index <index-id> mid-point flow { forward | backward } { ingress | egress } vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 <lsp-label2> ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ]",
        "tlp <tlp-id> index <index-id> mid-point flow bidirectional { ingress | egress } { forward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 <lsp-label2> ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] | backward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 <lsp-label2> ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] | forward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 <lsp-label2> ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] backward vpn-label <vpn-label> [ lsp-label <lsp-label> [ lsp-label2 <lsp-label2> ] ] [ flow-label ] [ control-word ] [ l2vpn [ tpid <tpid> ] ] }",
        "tlp <tlp-id> in-point ingress",
        "tlp <tlp-id> out-point egress",
        "undo tlp <tlp-id> [ index <index-id> ]"
    ],
    "ParentView": [
        "IPFPM-DCP instance view"
    ],
    "ParaDef": [
        {
            "Parameters": "tlp-id",
            "Info": "Specifies a TLP ID.\nThe value is an integer ranging from 1 to 16777215."
        },
        {
            "Parameters": "in-point",
            "Info": "Specifies a TLP as an in-point.\nThe system sets the measurement flags of target flows on an in-point.\n-"
        },
        {
            "Parameters": "out-point",
            "Info": "Specifies a TLP as an out-point.\nThe system clears the measurement flags of target flows on an out-point.\n-"
        },
        {
            "Parameters": "ingress",
            "Info": "Indicates the upstream target flow.\n-"
        },
        {
            "Parameters": "egress",
            "Info": "Indicates the downstream target flow.\n-"
        },
        {
            "Parameters": "vpn-label vpn-label",
            "Info": "Specifies a VPN label.\nThe value is an integer ranging from 0 to 1048575."
        },
        {
            "Parameters": "lsp-label lsp-label",
            "Info": "Specifies the first-layer LSP label.\nThe value is an integer ranging from 0 to 1048575."
        },
        {
            "Parameters": "backward-vpn-label backward-vpn-label",
            "Info": "Specifies a VPN label for the backward target flow.\nThe value is an integer ranging from 0 to 1048575."
        },
        {
            "Parameters": "backward-lsp-label backward-lsp-label",
            "Info": "Specifies an LSP label for the backward target flow.\nThe value is an integer ranging from 0 to 1048575."
        },
        {
            "Parameters": "mid-point",
            "Info": "Specifies a TLP as a mid-point.\n-"
        },
        {
            "Parameters": "flow",
            "Info": "Indicates the target flow.\n-"
        },
        {
            "Parameters": "forward",
            "Info": "Indicates the forward target flow.\n-"
        },
        {
            "Parameters": "backward",
            "Info": "Indicates the backward target flow.\n-"
        },
        {
            "Parameters": "lsp-label2 lsp-label2",
            "Info": "Specifies the second-layer LSP label.\nThe value is an integer ranging from 0 to 1048575."
        },
        {
            "Parameters": "flow-label",
            "Info": "Enables the flow label function.\n-"
        },
        {
            "Parameters": "control-word",
            "Info": "Enables the control word function.\nThe control word carries the sequence number and control information in the Layer 2 frame header. It is used to pad packets to prevent the packets from being too short.\n-"
        },
        {
            "Parameters": "l2vpn",
            "Info": "Specifies an L2VPN.\n-"
        },
        {
            "Parameters": "tpid tpid",
            "Info": "Specifies the ID of a load balancing path.\nThe value is an hexadecimal number ranging from 600 to FFF."
        },
        {
            "Parameters": "bidirectional",
            "Info": "Indicates the bidirectional target flow.\n-"
        },
        {
            "Parameters": "any",
            "Info": "Matches any label.\n-"
        },
        {
            "Parameters": "index index-id",
            "Info": "Specifies the ID of a load balancing path.\nThe value is an integer ranging from 1 to 16."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] nqa ipfpm dcp",
            "[*HUAWEI-nqa-ipfpm-dcp] instance 1",
            "[*HUAWEI-nqa-ipfpm-dcp-instance-1] tlp 100 index 2 mid-point flow forward ingress vpn-label 1"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] nqa ipfpm dcp",
            "[*HUAWEI-nqa-ipfpm-dcp] instance 1",
            "[*HUAWEI-nqa-ipfpm-dcp-instance-1] tlp 100 in-point ingress"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] nqa ipfpm dcp",
            "[*HUAWEI-nqa-ipfpm-dcp] instance 1",
            "[*HUAWEI-nqa-ipfpm-dcp-instance-1] tlp 1 mid-point flow forward ingress vpn-label 12345 lsp-label 23456 lsp-label2 any"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nTo locate faults in IP FPM performance statistics scenarios, run the tlp command to configure TLPs in an IP FPM instance. TLPs are measurement points along the path of the target flow and compile and output the statistics. TLPs can be in-points, mid-points, or out-points.\nIn a TE load-balancing scenario, set the any parameter to solve the problem where only one TLP can be configured for a Layer 3 interface (each target flow of a TLP supports the configuration of a group of label stacks).\nIn a load-balancing scenario where different paths share the same interface or path segment, the shared interface has the same 5-tuple information but be assigned different label stacks. To configure label stack information for multi-path load balancing and prevent detection errors in this scenario, run the tlp index command.\nPrerequisites\nIP Flow Performance Measurement (IP FPM) instance has been created.\nPrecautions\nA TLP that functions as the in-point for the forward target flow is the out-point for the backward target flow. The TLP role specified in the tlp command applies only to the forward target flow, and the reverse of the specified role is used for the backward target flow.\nMid-points apply only to IP FPM hop-by-hop performance statistics scenarios. Therefore, you must configure flow to specify the target flow direction when configuring a TLP as a mid-point.\nA TLP cannot function as both the in-point and out-point for the same unidirectional target flow.\nIn the same instance, the TLP of a VE/GVE sub-interface and the TLP of another physical interface must be in different directions. Otherwise, data about the same target flow will be collected twice, affecting statistics accuracy."
}