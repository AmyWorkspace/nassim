{
    "PageTitle": "flow-label",
    "FuncDef": "The flow-label command enables flow-label-based load balancing for an L2VPN VSI.\nThe undo flow-label command disables flow-label-based load balancing of an L2VPN VSI.\nBy default, flow-label-based load balancing of L2VPN VSIs is disabled.",
    "CLIs": [
        "flow-label { both | send | receive } [ static ]",
        "undo flow-label { both | send | receive } [ static ]",
        "undo flow-label"
    ],
    "ParentView": [
        "VSI-BGP view"
    ],
    "ParaDef": [
        {
            "Parameters": "both",
            "Info": "Indicates both the send and receive capabilities of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "send",
            "Info": "Indicates the send capability of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "receive",
            "Info": "Indicates the receive capability of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "static",
            "Info": "Statically configures flow-label-based load balancing.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] vsi 1",
            "[*HUAWEI-vsi-1] pwsignal bgp",
            "[*HUAWEI-vsi-1-bgp] flow-label both"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nWhen multiple links exist between P devices, configure flow-label-based load balancing to improve L2VPN traffic forwarding efficiency. After flow-label-based load balancing is enabled on a PE, the PE adds different labels for different L2VPN data flows to distinguish them one from the other. After a P device receives a data packet carrying a flow label, it selects a forwarding path based on the flow label in the data packet. This processing implements load balancing.\nTo enable flow-label-based load balancing for all PWs in a VSI, run the flow-label command in the VSI-LDP view.\nPrerequisites\nMPLS L2VPN has been enabled.\nPrecautions\nWhen configuring flow-label-based load balancing, note the following:\nFlow-label-based load balancing can be enabled only when any of the following conditions is met:The receive parameter is configured on the local PE, and the send parameter is configured on the remote PE.The send parameter is configured on the local PE, and the receive parameter is configured on the remote PE.Both the send and receive parameters are configured on the local and remote PEs.\nIf the static flow-label-based load balancing configuration does not match on both ends, the device discards packets carrying a flow label, causing packet loss."
}