{
    "PageTitle": "vpn-target (VSI-BGPAD view)",
    "FuncDef": "The vpn-target command associates a VSI in a BGP AD VPLS domain with one or more VPN targets.\nThe undo vpn-target command deletes the association between a VSI and VPN targets.\nBy default, a VSI is not associated with any VPN target. The association must be configured when a VSI is created.",
    "CLIs": [
        "vpn-target { <vpnTargetValue> } &<1-16> [ both | import-extcommunity | export-extcommunity ]",
        "undo vpn-target { all | { <vpnTargetValue> } &<1-16> } [ both | import-extcommunity | export-extcommunity ]"
    ],
    "ParentView": [
        "VSI-BGPAD view"
    ],
    "ParaDef": [
        {
            "Parameters": "vpnTargetValue",
            "Info": "Associates a VPN target with a VSI.\nThe format of a VPN target can be one of the following:\n16-bit AS number:32-bit user-defined number. For example, 1:3. An AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN target value cannot be 0:0.32-bit IP address:16-bit user-defined number. For example, 192.168.122.15:1. An IP address ranges from 0.0.0.0 to 255.255.255.255, and a user-defined number ranges from 0 to 65535.Integral 4-byte AS number:2-byte user-defined number, for example, 65537:3. An AS number ranges from 65536 to 4294967295. A user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. That is, a VPN target cannot be 0:0.4-byte AS number in dotted notation:2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers that range from 1 to 65535 and from 0 to 65535, respectively. A user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. That is, a VPN target cannot be 0.0:0."
        },
        {
            "Parameters": "both",
            "Info": "Specifies the extended community attributes of the received and sent routing information.\n-"
        },
        {
            "Parameters": "import-extcommunity",
            "Info": "Receives routing information carrying specified extended community attributes.\n-"
        },
        {
            "Parameters": "export-extcommunity",
            "Info": "Specifies the extended community attributes carried in routing information to be sent.\n-"
        },
        {
            "Parameters": "all",
            "Info": "Deletes all VPN targets.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] vsi company2",
            "[*HUAWEI-vsi-company2] bgp-ad",
            "[*HUAWEI-vsi-company2-bgpad] vpls-id-100:1",
            "[*HUAWEI-vsi-company2-bgpad] vpn-target 3:3 export-extcommunity",
            "[*HUAWEI-vsi-company2-bgpad] vpn-target 4:4 import-extcommunity",
            "[*HUAWEI-vsi-company2-bgpad] vpn-target 5:5 both"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nVPN targets can be used in a BGP AD VPLS domain to control the route advertisement and communication between nodes. When a PE advertises routing information to other PEs of different VSIs, it adds export VPN targets to the routing information. When the PE receives routing information from other PEs, it uses import VPN targets to determine whether to import the routing information to the VSIs on it.\nPrerequisites\nA VPLS ID has been configured for the VSI.\nConfiguration Impact\nAfter the vpn-target command is run, the PE only advertises the routing information that contains the export VPN targets and imports the routing information that contains the import VPN targets. Two PEs are allowed to communicate with each other only when the VPN targets carried in their exchanged routing information match.\nPrecautions\nA PW can be set up between two VSIs in a BGP AD VPLS domain only when the import VPN target associated with a VSI is the same as the export VPN target associated with the other VSI."
}