{
    "PageTitle": "mpls switch-l2vc (System view)",
    "FuncDef": "The mpls switch-l2vc command configures PW label switching on SPEs (Switching provider edge) to implement multi-segment PWs.\nThe undo mpls switch-l2vc command deletes the PW label switching configuration.\nThe mpls switch-l2vc command configures QoS parameters for MS-PWs.\nThe undo mpls switch-l2vc command deletes QoS parameter settings for MS-PWs.\n\nBy default, QoS parameters are not configured for MS-PWs.\n\n\nBy default, an SPE does not support PW label switching.",
    "CLIs": [
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep } [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> trans <trans-label> recv <received-label> [ tunnel-policy <policy-name> ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ tunnel-policy <policy-name> ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep } [ control-word | no-control-word ] { cc { cw | alert } * cv lsp-ping } [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | satop-e1 | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e3 | satop-t1 | vlan | cep } [ control-word | no-control-word ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | vlan } [ mtu <mtu-value> ] control-word cc { cw | alert } * cv lsp-ping [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | vlan } [ mtu <mtu-value> ] [ no-control-word ] cc alert cv lsp-ping [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep } [ mtu <mtu-value> ] [ control-word | no-control-word ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { satop-e1 | satop-e3 | satop-t1 } [ mtu <mtu-value> ] [ control-word | no-control-word ] [ rtp-header ] [ tdm-encapsulation <number> ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation cesopsn-basic [ mtu <mtu-value> ] [ control-word | no-control-word ] [ rtp-header ] [ timeslotnum <timeslotnum-value> ] [ tdm-encapsulation <number> ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ tunnel-policy <policy-name> ] between <ip-address> <vc-id> [ tunnel-policy <policy-name> ] backup <ip-address> <vc-id> [ tunnel-policy <policy-name> ] encapsulation { ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | vlan } [ control-word-transparent ]",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep } [ control-word-transparent ]",
        "undo mpls switch-l2vc all",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep }",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | satop-e1 | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e3 | satop-t1 | vlan | cep } [ control-word | no-control-word ] [ control-word-transparent ]",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { atm-1to1-vcc | atm-1to1-vpc | atm-aal5-pdu | atm-aal5-sdu | atm-nto1-vcc | atm-nto1-vpc | atm-trans-cell | cesopsn-basic | ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | satop-e1 | satop-e3 | satop-t1 | vlan | cep } [ mtu <mtu-value> ] [ control-word | no-control-word ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation { satop-e1 | satop-e3 | satop-t1 } [ mtu <mtu-value> ] [ control-word | no-control-word ] [ rtp-header ] [ tdm-encapsulation <number> ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] between <ip-address> <vc-id> trans <trans-label> recv <received-label> [ cir <cir-value> [ pir <pir-value> ] [ qos-profile <qos-profile-name> ] ] [ tunnel-policy <policy-name> ] [ oam-packet pop flow-label ] encapsulation cesopsn-basic [ mtu <mtu-value> ] [ control-word | no-control-word ] [ rtp-header ] [ timeslotnum <timeslotnum-value> ] [ tdm-encapsulation <number> ] [ flow-label { both | send | receive } ] [ control-word-transparent ]",
        "undo mpls switch-l2vc [ instance-name <instance-name> ] <ip-address> <vc-id> [ tunnel-policy <policy-name> ] between <ip-address> <vc-id> [ tunnel-policy <policy-name> ] backup <ip-address> <vc-id> [ tunnel-policy <policy-name> ] encapsulation { ethernet | fr | hdlc | ip-interworking | ip-layer2 | ppp | vlan } [ control-word-transparent ]"
    ],
    "ParentView": [
        "System view"
    ],
    "ParaDef": [
        {
            "Parameters": "instance-name instance-name",
            "Info": "Specifies the name of an L2VPN service. This parameter uniquely identifies an L2VPN service on a PE.\nThe value is a string of 1 to 31 case-sensitive characters, spaces not supported.\nThe string can contain spaces if it is enclosed in double quotation marks (\")."
        },
        {
            "Parameters": "vc-id",
            "Info": "Specifies the ID of a PW.\nThe value is an integer that ranges from 1 to 4294967295."
        },
        {
            "Parameters": "cir cir-value",
            "Info": "Specifies the CIR.\nThe value is 0 or an integer ranging from 16 to 4294967294, in kbit/s."
        },
        {
            "Parameters": "pir pir-value",
            "Info": "Specifies the PIR.\nThe value is 0 or an integer ranging from 16 to 4294967294, in kbit/s.\nNote that:\nIf you do not specify pir pir-value, pir-value equals cir-value.If you determine to specify pir pir-value, ensure that pir-value is greater than or equal to cir-value.\npir-value and cir-value cannot be both 0s. If cir-value is 0, you must specify pir-value."
        },
        {
            "Parameters": "qos-profile qos-profile-name",
            "Info": "Specifies the QoS profile name.\nThe value is a string of 1 to 63 case-sensitive characters, spaces not supported.\nThe string can contain spaces if it is enclosed in double quotation marks (\")."
        },
        {
            "Parameters": "tunnel-policy policy-name",
            "Info": "Specifies the name of a tunnel policy. If it is not specified, the default tunnel policy is used, which preferentially selects LSPs and load balancing is not performed.\nThe value is a string of 1 to 39 case-sensitive characters, spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string."
        },
        {
            "Parameters": "oam-packet",
            "Info": "Indicates that flow labels are removed from OAM detection packets.\n-"
        },
        {
            "Parameters": "flow-label",
            "Info": "Indicates the flow-label-based load balancing capability.\n-"
        },
        {
            "Parameters": "between",
            "Info": "Indicates the MS-PW that corresponds to the PW.\n-"
        },
        {
            "Parameters": "encapsulation",
            "Info": "Indicates the PW encapsulation type.\n-"
        },
        {
            "Parameters": "atm-1to1-vcc",
            "Info": "One PW carries the ATM cells of one PVC.\n-"
        },
        {
            "Parameters": "atm-1to1-vpc",
            "Info": "One PW carries the ATM cells of one PVP.\n-"
        },
        {
            "Parameters": "atm-aal5-pdu",
            "Info": "One PW carries the AAL5 PDUs of one PVC.\n-"
        },
        {
            "Parameters": "atm-aal5-sdu",
            "Info": "One PW carries the AAL5 SDUs of one PVC.\n-"
        },
        {
            "Parameters": "atm-nto1-vcc",
            "Info": "One PW carries the ATM cells of multiple PVCs.\n-"
        },
        {
            "Parameters": "atm-nto1-vpc",
            "Info": "ATM cells are transmitted over PWE3 VCs.\n-"
        },
        {
            "Parameters": "atm-trans-cell",
            "Info": "ATM cells are transmitted over PWE3 VCs.\n-"
        },
        {
            "Parameters": "cesopsn-basic",
            "Info": "Specifies the PW encapsulation type as cesopsn-basic.\n-"
        },
        {
            "Parameters": "ethernet",
            "Info": "This encapsulation type is used when Ethernet packets do not carry VLAN information.\n-"
        },
        {
            "Parameters": "fr",
            "Info": "FR provides protocol standards for the data link layer and physical layer.\n-"
        },
        {
            "Parameters": "hdlc",
            "Info": "HDLC is a bit-oriented link layer protocol.\n-"
        },
        {
            "Parameters": "ip-interworking",
            "Info": "Enables static PW interworking when devices in the interworking are all provided by Huawei.\n-"
        },
        {
            "Parameters": "ip-layer2",
            "Info": "Enables IP interworking for an LDP PW between a Huawei device and a non-Huawei device. ip-layer2 is required for IP interworking between a Huawei device and a non-Huawei device.\n-"
        },
        {
            "Parameters": "ppp",
            "Info": "PPP is a link layer protocol that specifies how to encapsulate and transmit network layer packets over P2P links.\n-"
        },
        {
            "Parameters": "satop-e1",
            "Info": "SAToP is insensitive to the E1 frame structure and encapsulates a whole E1 frame into a PW packet.\n-"
        },
        {
            "Parameters": "satop-e3",
            "Info": "SAToP is insensitive to the E3 frame structure and encapsulates a whole E3 frame into a PW packet.\n-"
        },
        {
            "Parameters": "satop-t1",
            "Info": "SAToP is insensitive to the T1 frame structure and encapsulates a whole T1 frame into a PW packet.\n-"
        },
        {
            "Parameters": "vlan",
            "Info": "This encapsulation type is used when Ethernet packets carry VLAN information.\n-"
        },
        {
            "Parameters": "cep",
            "Info": "This encapsulation type is used for CEP services.\n-"
        },
        {
            "Parameters": "control-word-transparent",
            "Info": "Indicates transparent transmission of the control word. By default, transparent transmission of control word is disabled.\n-"
        },
        {
            "Parameters": "control-word",
            "Info": "Indicates the control word function. By default, VCCV in Label Alert mode is enabled. Whether VCCV in control word mode is enabled depends on whether the control word is enabled.\n-"
        },
        {
            "Parameters": "no-control-word",
            "Info": "Indicates that the control word is disabled.\n-"
        },
        {
            "Parameters": "rtp-header",
            "Info": "Indicates that the RTP header is carried in transparently transmitted TDM frames. By default, transparently transmitted TDM frames do not carry the RTP header.\n-"
        },
        {
            "Parameters": "both",
            "Info": "Indicates both the send and receive capabilities of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "send",
            "Info": "Indicates the send capability of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "receive",
            "Info": "Indicates the receive capability of flow-label-based load balancing for the local device.\n-"
        },
        {
            "Parameters": "backup",
            "Info": "Indicates the backup PW.\n-"
        },
        {
            "Parameters": "all",
            "Info": "Indicates that all MS-PWs are deleted.\n-"
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] tunnel-policy 123",
            "[*HUAWEI-tunnel-policy-123] quit",
            "[*HUAWEI] tunnel-policy 456",
            "[*HUAWEI-tunnel-policy-456] quit",
            "[*HUAWEI] mpls switch-l2vc 1.1.1.1 100 cir 100 tunnel-policy 123 between 2.2.2.2 200 cir 300 tunnel-policy 456 encapsulation vlan"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] tunnel-policy 123",
            "[*HUAWEI-tunnel-policy-123] quit",
            "[*HUAWEI] tunnel-policy 456",
            "[*HUAWEI-tunnel-policy-456] quit",
            "[*HUAWEI] mpls switch-l2vc 1.1.1.1 100 cir 100 tunnel-policy 123 between 2.2.2.2 200 trans 17 recv 18 cir 300 tunnel-policy 456 encapsulation vlan"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] tunnel-policy 123",
            "[*HUAWEI-tunnel-policy-123] quit",
            "[*HUAWEI] tunnel-policy 456",
            "[*HUAWEI-tunnel-policy-456] quit",
            "[*HUAWEI] mpls switch-l2vc 1.1.1.1 100 trans 16 recv 17 cir 100 tunnel-policy 123 between 2.2.2.2 200 trans 18 recv 19 cir 300 tunnel-policy 456 encapsulation vlan"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] mpls switch-l2vc 1.1.1.9 100 between 3.3.3.9 100 encapsulation vlan"
        ],
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] mpls",
            "[*HUAWEI-mpls] quit",
            "[*HUAWEI] mpls l2vpn",
            "[*HUAWEI-l2vpn] quit",
            "[*HUAWEI] mpls switch-l2vc 1.1.1.9 100 between 3.3.3.9 100 trans 200 recv 200 encapsulation vlan mtu 1500"
        ]
    ],
    "ExtraInfo": "Usage Scenario\nOn a large network, if two PEs cannot establish a signaling connection because they are in different ASs, you can configure PW switching on SPEs to connect the two PEs using an MS-PW.\nWhen multiple VPN services share the same tunnel, bandwidth preemption occurs among these VPN services. Non-VPN traffic also preempts the bandwidth of VPN traffic. As a result, VPN traffic cannot be forwarded or dropped strictly based on service priorities.\nThe VPN services carried over a tunnel have different resource requirements. To meet the resource requirements of VPWS services carried over a tunnel without affecting the quality of other VPN services, configure VPWS QoS. To configure QoS parameters for MS-PWs, run the mpls switch-l2vc (QoS) command.\nPrerequisites\nMPLS and L2VPN have been enabled.\nConfiguration Impact\nPW signaling is not negotiated for a dynamic MS-PW on the SPE. Instead, PW information on both PEs is transparently transmitted on the SPE.\nExercise caution when using the undo mpls switch-l2vc all command because it will delete all the MS-PW on the devices.\nAn MS-PW has been created using the mpls switch-l2vc command.\nAfter the mpls switch-l2vc (QoS) command is configured, VPWS PWs carry service packets based on the specified bandwidth.\nPW signaling is not negotiated for a dynamic MS-PW on the SPE. Instead, PW information on both PEs is transparently transmitted on the SPE.\nExercise caution when using the undo mpls switch-l2vc all command because it will delete all the MS-PW on the devices.\nFollow-up Procedure\nRun the display mpls switch-l2vc command to check whether the VC status is Up.\nPrecautions\nThe combination of the Peer IP, PW ID and PW type must be unique on a node. The PW IDs at the two ends of an MS-PW can be the same.\nThe VCCV feature is enabled by default and does not need to be configured. If the control word function is enabled, VCCV in control word mode is supported by default."
}