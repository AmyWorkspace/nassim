{
    "PageTitle": "multicast user-aggregation",
    "FuncDef": "The multicast user-aggregation command enables multicast replication by multicast VLAN.\nThe undo multicast user-aggregation command restores the default configuration.\n\nBy default, multicast replication by multicast VLAN is disabled, and multicast replication by interface is used.",
    "CLIs": [
        "multicast user-aggregation { vlan <vlan-id> | qinq pe-vid <pe-vid> ce-vid <ce-vid> }",
        "undo multicast user-aggregation"
    ],
    "ParentView": [
        "PW-VE sub-interface view",
        "40GE interface view",
        "GE electrical interface view",
        "Eth-Trunk sub-interface view",
        "400GE interface view",
        "10GE interface view",
        "50GE sub-interface view",
        "GE sub-interface view",
        "VE sub-interface view",
        "25GE sub-interface view",
        "GE interface view",
        "100GE interface view",
        "Global VE sub-interface view",
        "50GE interface view",
        "400GE sub-interface view",
        "GE optical interface view",
        "25GE interface view",
        "100ge sub-interface view",
        "40GE sub-interface view",
        "Eth-Trunk interface view",
        "10GE sub-interface view"
    ],
    "ParaDef": [
        {
            "Parameters": "vlan vlan-id",
            "Info": "Specifies the ID of a VLAN used for multicast traffic aggregation.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "qinq",
            "Info": "Specifies a qinq interface.\n-"
        },
        {
            "Parameters": "pe-vid pe-vid",
            "Info": "Specifies an outer VLAN tag.\nThe value is an integer ranging from 1 to 4094."
        },
        {
            "Parameters": "ce-vid ce-vid",
            "Info": "Specifies an inner VLAN tag.\nThe value is an integer ranging from 1 to 4094."
        }
    ],
    "Examples": [
        [
            "<HUAWEI> system-view",
            "[~HUAWEI] interface GigabitEthernet 1/0/0",
            "[~HUAWEI-GigabitEthernet1/0/0] multicast user-aggregation vlan 2"
        ]
    ],
    "ExtraInfo": "Usage Scenario\n\nIn scenarios where users have joined multicast VLANs, the replication by multicast VLAN mode enables the BRAS to replicate multicast packets based on multicast VLANs. The downstream Layer 2 device replicates multicast packets based on user VLANs. To enable this replication mode, run the multicast user-aggregation command. For users who go online through the same interface and join the same multicast program, the BRAS replicates only one copy of a multicast traffic flow to the downstream Layer 2 device, irrespective of whether the users belong to the same VLAN. The downstream Layer 2 device then replicates multicast packets based on user VLANs. This replication mode reduces the burden on the BRAS and the bandwidth consumption. This mode applies to scenarios where user packets carry VLAN tags and inter-VLAN traffic forwarding is needed.\n\nPrerequisites\n\nIGMP or MLD has been enabled using the igmp enable or mld enable command for the BAS interface. Otherwise, multicast replication by multicast VLAN does not take effect.\n\nPrecautions\n\nThe multicast VLAN ID is mutually exclusive with other access VLAN IDs on the same physical interface.\nThe multicast VLAN ID is mutually exclusive with other access VLAN IDs on the same physical interface.\n\nA VLAN ID specified in the multicast user-aggregation command must be different from any VLAN IDs specified on the same interface or sub-interface view.\nIf users are requiring multicast programs, the multicast user-aggregation command can be run again only after the existing configuration of the command is deleted.\nIf users are requiring multicast programs, the multicast user-aggregation command can be run only after the users go offline or leave the corresponding multicast groups.\nA VLAN ID specified in the multicast user-aggregation command must be different from any user VLAN ID specified in the user-vlan command.\n\n\nIn VS mode, this command is supported only by the admin VS."
}