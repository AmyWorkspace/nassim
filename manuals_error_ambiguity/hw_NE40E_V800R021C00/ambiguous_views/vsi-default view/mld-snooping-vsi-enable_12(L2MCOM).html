
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mld-snooping prompt-leave (VSI view)">
<meta name="DC.subject" content="mld-snooping prompt-leave (VSI view)">
<meta name="keywords" content="mld-snooping prompt-leave (VSI view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/mld-snooping-inst-enable_13(L2MCOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/mld-snooping-inst-enable_17(L2MCOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_L2MCOM">
<meta name="DC.Creator" content="SUBSYS_ID_L2MCOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="cWX1082228">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001221893955">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>mld-snooping prompt-leave (VSI view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001221893955"></a><a name="EN-US_CLIREF_0000001221893955"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mld-snooping prompt-leave (VSI view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001221893955__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mld-snooping prompt-leave</span></b> command enables prompt leave.</p>
<p>The <b><span class="cmdname">undo mld-snooping prompt-leave</span></b> command disables prompt leave.</p>
</p>
<p>By default, prompt leave is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001221893955__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">mld-snooping prompt-leave </span></b>[ <strong><span>group-policy</span></strong> { <i><span class="varname">acl6-number</span></i> | <strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i> } ]</p>

<p><b><span class="cmdname">undo mld-snooping prompt-leave</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001221893955__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>group-policy</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures a group policy to enable prompt leave for member interfaces of a specified or all multicast groups.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">acl6-number</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of an ACL6.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 2000 to 3999.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>acl6-name</span></strong> <i><span class="varname">acl6-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a named ACL6.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 64 case-sensitive characters without spaces. The value must start with a letter (a to z or A to Z, case sensitive).</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001221893955__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-DEFAULT view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001221893955__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001221893955__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2mc</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001221893955__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>After receiving an MLD Done message for a multicast group from a host, a device enabled with prompt leave directly deletes the forwarding entry of the multicast group, without sending group-specific Query messages. If an interface is connected to only one host, the prompt leave mechanism can be used to shorten the response delay and release bandwidth resources in a timely manner.<p></p>
If group-policy &lt;acl6-number&gt; or group-policy acl6-name &lt;acl6-name&gt; is not set, prompt leave will take effect for all multicast groups.<p></p>
If group-policy &lt;acl6-number&gt; or group-policy acl6-name &lt;acl6-name&gt; is set, prompt leave will take effect for groups of which the MLD Done messages meet the permit clause of the ACL6.</p>

<ul><li>If a multicast group meets the permit clause of the specified ACL6, the device deletes the member interface of the group immediately after receiving an MLD Done message of this group and notifies the upstream device of the user leave event.</li><li>If a multicast group does not meet the permit clause of the specified ACL6, the device notifies the upstream device of a user leave event after receiving an MLD Done message of a group. The upstream device can then send a group-specific Query message to learn whether members exist in the group.</li></ul>
<p><strong>Prerequisites</strong></p>
<p><p>MLD snooping has been enabled globally and in the VLAN/VSI view.<p></p>
Rules have been configured in the specified ACL6. By default, the ACL6 rule in which the action is permit applies to all multicast groups. To enable prompt leave for a multicast group, you need to run the rule (basic ACL6 view) deny source any or rule (advanced ACL6 view) deny source any command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>Do not enable prompt leave for a VLAN/VSI if a multicast member interface connects to multiple receiver hosts. If a member interface connects to multiple receivers, the prompt-leave-capable device will interrupt the multicast services of a group for all receivers of the group when a receiver leaves the multicast group.<p></p>
If the mld-snooping prompt-leave command is run more than once in the same view, the latest configuration overrides the previous one.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>The<p></p>
mld-snooping prompt-leave command fails to be run a VLAN view in any of the following conditions:</p>

<ul><li>The VLAN is bound to a VSI.<p></p>
The<p></p>
mld-snooping prompt-leave command fails to be run in a VSI view in the following condition:</li><li>The VSI is bound to a BD.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001221893955__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable prompt leave for VSI vsi0 member interfaces of the multicast group FF18::1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>acl ipv6 2008</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2008] <strong>rule permit source ff18::1 64</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-acl6-basic-2008] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mld-snooping enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi vsi0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi0] <strong>pwsignal ldp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi0-ldp] <strong>vsi-id 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi0-ldp] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>vsi vsi0</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi0] <strong>mld-snooping prompt-leave group-policy 2008</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">Layer 2 Multicast Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/mld-snooping-inst-enable_13(L2MCOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/mld-snooping-inst-enable_17(L2MCOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>