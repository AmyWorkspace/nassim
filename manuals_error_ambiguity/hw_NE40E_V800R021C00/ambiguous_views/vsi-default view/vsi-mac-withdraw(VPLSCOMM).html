
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mac-withdraw enable">
<meta name="DC.subject" content="mac-withdraw enable">
<meta name="keywords" content="mac-withdraw enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_VPLS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vsi-mac-withdraw-bd-status-down(VPLSCOMM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/mac-withdraw(VPLSLDP).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_VPLSCOMM">
<meta name="DC.Creator" content="SUBSYS_ID_VPLSCOMM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001201292164">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>mac-withdraw enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001201292164"></a><a name="EN-US_CLIREF_0000001201292164"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mac-withdraw enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001201292164__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mac-withdraw enable</span></b> command configures a VSI to instruct all the remote peers to delete all the MAC addresses learned from this VSI when an AC fault or a UPE fault occurs and the VSI remains Up.</p>
<p>The <b><span class="cmdname">undo mac-withdraw enable</span></b> command disables a VSI from instructing all the remote peers to delete all the MAC addresses learned from this VSI when an AC fault or a UPE fault occurs and the VSI remains Up.</p>
</p>
<p>By default, the MAC withdraw function is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001201292164__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">mac-withdraw enable</span></b></p>

<p><b><span class="cmdname">undo mac-withdraw enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001201292164__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001201292164__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-BVSI view, VSI-DEFAULT view, VSI-IVSI-BEVPNINTERWORK view, VSI-IVSI-P2P view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001201292164__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001201292164__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2vpn</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001201292164__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>On an LDP VPLS network, VSIs depend on MAC address entries to transmit traffic. If the AC or PW status changes, VSIs need to update the MAC entries immediately to reduce the traffic loss. The mac-withdraw enable command enables a PE to send a MAC Withdraw message to all its remote peers to inform them of the AC or PW status change (if any). After the peers receive the message, they remove the MAC address entries in their VSIs based on the message.</p>
<p><strong>Configuration Impact</strong></p>
<p><p>After the MAC withdraw function is enabled, the MAC addresses learned from the remote end may be deleted from the local end when the AC or PW turns Up or Down and broadcast may be triggered.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>This command takes effect only after the interface-status-change mac-withdraw enable command is also used.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001201292164__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the VSI named v100 to send MAC Withdraw messages to instruct all the remote peers to delete the learned MAC addresses when an AC fault or a UPE fault occurs and the VSI remains Up.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi v100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-v100] <strong>mac-withdraw enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_VPLS_Configuration_Commands_title.html">VPLS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/vsi-mac-withdraw-bd-status-down(VPLSCOMM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/mac-withdraw(VPLSLDP).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>