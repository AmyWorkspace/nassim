
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="igmp-snooping robust-count (VSI E-Tree view)">
<meta name="DC.subject" content="igmp-snooping robust-count (VSI E-Tree view)">
<meta name="keywords" content="igmp-snooping robust-count (VSI E-Tree view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/igmp-snooping-inst-enable-bd_6(L2MCOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/igmp-snooping-inst-enable_8(L2MCOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_L2MCOM">
<meta name="DC.Creator" content="SUBSYS_ID_L2MCOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001221852381">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>igmp-snooping robust-count (VSI E-Tree view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001221852381"></a><a name="EN-US_CLIREF_0000001221852381"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">igmp-snooping robust-count (VSI E-Tree view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001221852381__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">igmp-snooping robust-count</span></b> command sets a robustness variable that determines the number of times a querier sends group-specific query messages.</p>
<p>The <b><span class="cmdname">undo igmp-snooping robust-count</span></b> command restores the default setting.</p>
</p>
<p>By default, the robustness variable is 2.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001221852381__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">igmp-snooping robust-count </span></b><i><span class="varname">robust-count-value</span></i></p>

<p><b><span class="cmdname">undo igmp-snooping robust-count</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001221852381__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>robust-count</span></strong> <i><span class="varname">robust-count-value</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the number of times a querier sends group-specific query messages.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 2 to 5.</p>
</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001221852381__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-DEFAULT view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001221852381__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001221852381__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2mc</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001221852381__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The igmp-snooping robust-count command has the following functions:</p>

<ul><li>Defines the number of times a querier sends group-specific query messages, preventing packet loss on a network.<p></p>
When a device receives an IGMP Leave message for a multicast group, it sends group-specific query messages for the number of times defined by to check whether there are any other members in this group. The interval at which group-specific query messages are sent is set using the igmp-snooping lastmember-queryinterval command.</li><li>Changes the aging time of member ports.<p></p>
After receiving a Report message from a downstream device, a device sets the aging time of the corresponding member port based on the following formula: Aging time of a member port = Number of times group-specific query messages are sent x Interval at which general query messages are sent + Maximum time for a downstream host to respond to a querier. The default aging time is 130 seconds. The interval at which general query messages are sent is set using the igmp-snooping query-interval command. The maximum time for a downstream host to respond to a querier is set using the igmp-snooping max-response-time command.<p></p>
After receiving an IGMP Leave message from a host, a device sets the aging time of the corresponding member port based on the following formula: Aging time of a member port = Interval at which group-specific query messages are sent x Number of times group-specific query messages are sent. By default, the aging time is re-set to 2 seconds. The igmp-snooping robust-count command is used to set the number of times group-specific query messages are sent in the preceding formula. The interval at which group-specific query messages are sent is set using the igmp-snooping lastmember-queryinterval command.<p></p>
If the querier receives a Report message for the multicast group from another host within the robust-value x lastmember-queryinterval period, it continues to maintain the memberships for the group. Otherwise, the querier considers that there is no member of the group on the network segment, and does not maintain the memberships for the group.</li></ul>
<p><strong>Prerequisites</strong></p>
<p><p>IGMP snooping has been configured using the igmp-snooping enable command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the igmp-snooping robust-count command is run in the same view several times, the latest configuration overrides the previous one.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>When the igmp-snooping robust-count command is used to set the aging time for member ports, the settings of parameters in this command must be consistent on a Layer 2 device and its upstream Layer 3 device; otherwise, multicast data transmission between Layer 2 and Layer 3 networks will be interrupted.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001221852381__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the number of times a querier sends group-specific query messages to 5 in VSI vsi1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi vsi1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1] <strong>pwsignal ldp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1-ldp] <strong>vsi-id 200</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1-ldp] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1] <strong>igmp-snooping robust-count 5</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">Layer 2 Multicast Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/igmp-snooping-inst-enable-bd_6(L2MCOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/igmp-snooping-inst-enable_8(L2MCOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>