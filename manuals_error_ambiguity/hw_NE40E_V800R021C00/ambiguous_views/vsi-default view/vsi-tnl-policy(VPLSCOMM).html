
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="tnl-policy (VSI view)">
<meta name="DC.subject" content="tnl-policy (VSI view)">
<meta name="keywords" content="tnl-policy (VSI view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_VPLS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vpls-ldp-prGrp-dualRecv(VPLSLDP).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vsi-track-adminVsi(VPLSCOMM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_VPLSCOMM">
<meta name="DC.Creator" content="SUBSYS_ID_VPLSCOMM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001201452140">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>tnl-policy (VSI view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001201452140"></a><a name="EN-US_CLIREF_0000001201452140"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">tnl-policy (VSI view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001201452140__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">tnl-policy</span></b> command configures a VSI to reference a tunnel policy.</p>
<p>The <b><span class="cmdname">undo tnl-policy</span></b> command restores the default configuration.</p>
</p>
<p>By default, no tunnel policy is configured for a VSI.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001201452140__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">tnl-policy </span></b><i><span class="varname">policy-name</span></i></p>

<p><b><span class="cmdname">undo tnl-policy</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001201452140__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">policy-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a tunnel policy.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 39 case-sensitive characters without spaces.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001201452140__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-BVSI view, VSI-DEFAULT view, VSI-IVSI-BEVPNINTERWORK view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001201452140__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001201452140__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2vpn</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001201452140__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>By default, VPLS forwards packets over LDP LSPs on the public network, and load balancing is performed if there are more than one LDP LSP to the same destination address.<p></p>
If you want to change the type of the public network tunnel used for packet forwarding or if you want to enable load balancing among multiple tunnels, you can run the <b><span class="cmdname">tunnel-policy</span></b> command in the system view to configure a tunnel policy and the <b><span class="cmdname">tnl-policy</span></b> command in the VSI view to reference this tunnel policy.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p><p>The tunnel policy to be referenced has been created.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<div class="p"><ul><li>After a tunnel policy is referenced, the VPLS traffic is forwarded on the public network using the tunnel specified in the tunnel policy.</li><li>The <b><span class="cmdname">undo tnl-policy</span></b> command restores the default tunnel (LDP LSP) used for packet forwarding.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>In addition to running this command to reference a tunnel policy, you can run the peer command in the VSI view to specify the peer address and the tunnel policy to be referenced by the VSI. The tunnel policy specified in the peer command has a higher priority than that specified in the <b><span class="cmdname">tnl-policy</span></b> command in the VSI view. If tunnel policies are specified in both the tnl-policy and peer commands, the tunnel policy specified in the peer command is preferred.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001201452140__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure a VSI to reference the tunnel policy named policy1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>tunnel-policy policy1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-tunnel-policy-policy1] <strong>quit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi company1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-company1] <strong>tnl-policy policy1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_VPLS_Configuration_Commands_title.html">VPLS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/vpls-ldp-prGrp-dualRecv(VPLSLDP).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/vsi-track-adminVsi(VPLSCOMM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>