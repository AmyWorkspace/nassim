
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="collect">
<meta name="DC.subject" content="collect">
<meta name="keywords" content="collect">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_NetStream_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/record_apply(monitor).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/display_ip_netstream_cache_slot_log.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_NSMOM">
<meta name="DC.Creator" content="SUBSYS_ID_NSMOM">
<meta name="Platform" content="8090-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001176535252">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>collect</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001176535252"></a><a name="EN-US_CLIREF_0000001176535252"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">collect</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001176535252__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">collect</span></b> command configures the flexible flow statistics sent to the NetStream Collector (NSC) to contain the number of bytes, number of packets, and first and last forwarding time.</p>
<p>The <b><span class="cmdname">undo collect</span></b> command configures the flexible flow statistics sent to the NSC not to contain the number of bytes, number of packets, and first and last forwarding time.</p>
</p>
<p>By default, the flexible flow statistics sent to the NSC does not contain the number of bytes, number of packets, and first and last forwarding time.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001176535252__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">collect </span></b>{ <strong><span>first</span></strong> | <strong><span>last</span></strong> } <strong><span>switched</span></strong></p>

<p><b><span class="cmdname">collect input </span></b>{ <strong><span>packets</span></strong> | <strong><span>bytes</span></strong> } { <i><span class="varname">length</span></i> }</p>

<p><b><span class="cmdname">undo collect </span></b>{ <strong><span>first</span></strong> | <strong><span>last</span></strong> } <strong><span>switched</span></strong></p>

<p><b><span class="cmdname">undo collect input </span></b>{ <strong><span>packets</span></strong> | <strong><span>bytes</span></strong> } [ <i><span class="varname">length</span></i> ]</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001176535252__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>first</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the flexible flow statistics sent to the NSC to contain the first forwarding time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>last</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the flexible flow statistics sent to the NSC to contain the last forwarding time.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>switched</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the flexible flow statistics sent to the NSC.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>input</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the flexible flow statistics sent to the NSC to contain the inbound interface information.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>packets</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the flexible flow statistics sent to the NSC to contain the number of packets.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>bytes</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures the flexible flow statistics sent to the NSC to contain the number of bytes.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">length</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the length of the packets and bytes contained in the flexible flow statistics sent to the NSC.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value can be16, 32, or 64.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001176535252__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>NetStream IPv6 record view., NetStream record view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001176535252__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>3: Management level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001176535252__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">netstream</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001176535252__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>To obtain more flow statistics, you can run the collect command to configure the flexible flow statistics output to contain the number of bytes, number of packets, and first and last forwarding time.</p>
<p><strong>Prerequisites</strong></p>
<p>Before you run the collect command, run the ip netstream record or ipv6 netstream record command to create a flexible flow statistics template.</p>
<p><strong>Precautions</strong></p>
<div class="p"><ul><li>After you unbind a flexible flow template that is bound in the interface monitoring view during continuous traffic sending and run the match or collect command to modify the match or collect field, the sampling information is incorrectly parsed when you bind the template again, which can be automatically restored.</li><li>After you cancel the application of a flexible flow template that is applied in the system view during continuous traffic sending and run the match or collect command to modify the match or collect field, the sampling information is incorrectly parsed when you apply the template again, which can be automatically restored.<p></p>
The maximum length that the flexible flow statistics template supports is 50 bytes, including the collect and match fields.<p></p>
Lengths of the collect fields:</li><li>first: 4 bytes</li><li>last: 4 bytes</li><li>packets: 4 bytes</li><li>bytes: 4 bytes<p></p>
Lengths of the match fields:</li><li>address: 4 bytes for an IPv4 address and 16 bytes for an IPv6 address</li><li>mask: 1 byte</li><li>port: 2 bytes</li><li>vlan: 2 bytes</li><li>as: 4 bytes</li><li>mpls top-label ip-address: 4 bytes</li><li>mpls label 1: 3 bytes</li><li>mpls label 2: 3 bytes</li><li>mpls label 3: 3 bytes</li><li>protocol: 1 byte</li><li>tos: 1 byte</li><li>direction: 1 byte</li><li>tcp-flag: 1 byte</li><li>input interface: 4 bytes</li><li>output interface: 4 bytes</li><li>next-hop: 4 bytes for an IPv4 address and 16 bytes for an IPv6 address</li><li>bgp next-hop: 4 bytes for an IPv4 address and 16 bytes for an IPv6 address</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001176535252__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the flexible flow statistics sent to the NSC to contain 64-byte number of inbound interface packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>ip netstream record tt</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-record-tt] <strong>collect input packets 64</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-record-tt] <strong>collect first switched</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_NetStream_Configuration_Commands_title.html">NetStream Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/record_apply(monitor).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/display_ip_netstream_cache_slot_log.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>