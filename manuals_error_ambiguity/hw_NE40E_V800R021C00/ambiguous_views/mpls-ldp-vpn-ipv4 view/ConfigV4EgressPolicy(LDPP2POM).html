
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="lsp-trigger (IPv4 view)">
<meta name="DC.subject" content="lsp-trigger (IPv4 view)">
<meta name="keywords" content="lsp-trigger (IPv4 view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_MPLS_LDP_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/ConfigLdpVpn_1(LDPP2POM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/ConfigEgPolicy(LDPRESOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_LDPP2POM">
<meta name="DC.Creator" content="SUBSYS_ID_LDPP2POM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001201291842">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>lsp-trigger (IPv4 view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001201291842"></a><a name="EN-US_CLIREF_0000001201291842"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">lsp-trigger (IPv4 view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001201291842__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">lsp-trigger</span></b> command configures a policy for establishing LDP LSPs.</p>
<p>The <b><span class="cmdname">undo lsp-trigger</span></b> command restores the default policy.</p>
</p>
<p>By default, LDP uses IP routes with 32-bit addresses to establish LSPs.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001201291842__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">lsp-trigger </span></b>{ <strong><span>all</span></strong> | <strong><span>host</span></strong> | <strong><span>none</span></strong> }</p>

<p><b><span class="cmdname">lsp-trigger ip-prefix </span></b><i><span class="varname">ip-prefix-name</span></i></p>

<p><b><span class="cmdname">undo lsp-trigger</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001201291842__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Uses all static and IGP routes to establish LSPs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>host</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Uses IP routes with 32-bit addresses to establish LSPs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>none</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Does not allow LDP to establish LSPs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>ip-prefix</span></strong> <i><span class="varname">ip-prefix-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Uses routes matching the IP prefix list to establish LSPs.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The name is a string of 1 to 169 case-sensitive characters, with spaces not supported. When double quotation marks are used around the string, spaces are allowed in the string.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001201291842__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>MPLS-LDP-IPv4 view, MPLS-LDP-VPN-IPv4 view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001201291842__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001201291842__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">mpls-ldp</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001201291842__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>An MPLS LDP-enabled device automatically establishes a large number of LSPs, which wastes resources.<p></p>
The <b><span class="cmdname">lsp-trigger</span></b> command can be run to configure a policy for establishing LSPs. LDP can only use specified routes to establish LSPs, reducing LSPs to be established and system resource consumption.<p></p>
NOTE:</p>

<ul><li>By default, IP routes with 32-bit addresses trigger LDP to set up LSPs. The default setting is recommended. The lsp-trigger all command is not recommended. The all parameter allows LDP to use static routes and IGP routes to establish LSPs, which consumes a lot of label resources and causes LSP convergence slowdown on an MPLS network. Before using the lsp-trigger all command, configure a policy for filtering out routes so that LDP does not use them to establish LSPs. This helps reduce the number of LSPs to be established and efficiently use system resources.</li><li>If the lsp-trigger all command is run and some IGP routes are available and are not used to existing MPLS LDP sessions, the system uses the routes to create proxy egress LSPs.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>The <b><span class="cmdname">lsp-trigger</span></b> command can be used to configure policies only for ingress and egress LSPs on the public network and ingress and egress LSPs on the private network that are established using IGP routes. To configure a policy for triggering the transit LSP establishment, run the <b><span class="cmdname">propagate mapping</span></b> command.<p></p>
If the <b><span class="cmdname">lsp-trigger</span></b> command is run in both the MPLS view and MPLS LDP IPv4 view, the configuration in the MPLS LDP IPv4 view preferentially takes effect.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001201291842__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable LDP to use IP routes with 32-bit addresses to establish LSPs.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>mpls ldp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls-ldp] <strong>ipv4-family</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls-ldp-ipv4] <strong>lsp-trigger host</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_MPLS_LDP_Configuration_Commands_title.html">MPLS LDP Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/ConfigLdpVpn_1(LDPP2POM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/ConfigEgPolicy(LDPRESOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>