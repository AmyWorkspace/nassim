
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mld-snooping query-interval (VSI view)">
<meta name="DC.subject" content="mld-snooping query-interval (VSI view)">
<meta name="keywords" content="mld-snooping query-interval (VSI view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/mld-snooping-inst-enable_7(L2MCOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/mld-snooping-inst-enable_23(L2MCOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_L2MCOM">
<meta name="DC.Creator" content="SUBSYS_ID_L2MCOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001221734015">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>mld-snooping query-interval (VSI view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001221734015"></a><a name="EN-US_CLIREF_0000001221734015"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mld-snooping query-interval (VSI view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001221734015__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mld-snooping query-interval</span></b> command sets an interval at which the querier sends general Query messages.</p>
<p>The <b><span class="cmdname">undo mld-snooping query-interval</span></b> command restores the interval.</p>
<p>The default interval is 125s.</p>
</p>
<p>By default, the interval is 125s.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001221734015__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">mld-snooping query-interval </span></b><i><span class="varname">query-interval</span></i></p>

<p><b><span class="cmdname">undo mld-snooping query-interval</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001221734015__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">query-interval</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Sets an interval at which the querier sends general Query messages.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 65535, in seconds.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001221734015__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-DEFAULT view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001221734015__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001221734015__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2mc</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001221734015__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>The mld-snooping query-interval command provides the following functions:</p>

<ul><li>Sets an interval at which the querier sends general Query messages.<p></p>
After the querier function is enabled and an interval is set using the mld-snooping query-interval command, the querier sends general Query messages at the configured interval to maintain group member information. The shorter the interval is, the more sensitive the device is and the more bandwidth and system resources are occupied.<p></p>
The interval for the querier to send general Query messages must be greater than the maximum time for the querier to wait for responses from hosts. Otherwise, multicast group members may be deleted incorrectly.</li><li>Adjusts the aging time of member interfaces.<p></p>
After receiving a Report message from a downstream host, the device sets the aging time of the member interface using the following formula: Member interface aging time = Number of group-specific Query messages to be sent x Interval at which general Query messages are sent + Maximum time for the querier to wait for responses from downstream hosts. By default, the device sets the aging time to 130s. Run the mld-snooping query-interval command to set an interval at which general Query messages are sent, run the mld-snooping robust-count command to set the number of group-specific Query messages to be sent, and run the mld-snooping max-response-time command to set the maximum time that the querier waits for responses from downstream hosts.</li></ul>
<p><strong>Prerequisites</strong></p>
<p><p>MLD snooping has been enabled using the mld-snooping enable command.</p>
</p>
<p><strong>Configuration Impact</strong></p>
<p><p>If the mld-snooping query-interval command is run more than once in the same view, the latest configuration overwrites the previous one.</p>
</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>To use the mld-snooping query-interval configuration as a factor of adjusting the member interface aging time, set the same interval as that specified on its upstream device. Otherwise, multicast data transmission will be interrupted between the Layer 2 and Layer 3 devices.<p></p>
The mld-snooping query-interval command fails to be run in a VSI view in the following condition:</p>

<ul><li>The VSI is bound to a BD.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001221734015__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure the querier in VSI vsi1 to send general Query messages at an interval of 100s.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mld-snooping enable</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi vsi1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1] <strong>mld-snooping query-interval 100</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Layer_2_Multicast_Commands_title.html">Layer 2 Multicast Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/mld-snooping-inst-enable_7(L2MCOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/mld-snooping-inst-enable_23(L2MCOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>