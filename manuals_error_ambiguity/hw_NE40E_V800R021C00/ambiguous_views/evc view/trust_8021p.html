
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="trust 8021p">
<meta name="DC.subject" content="trust 8021p">
<meta name="keywords" content="trust 8021p">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Class-based_QoS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/traffic-policy-action_car_disable.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/trust_8021p_remote.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_QOS">
<meta name="DC.Creator" content="SUBSYS_ID_QOS">
<meta name="Platform" content="8090-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001176056088">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>trust 8021p</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001176056088"></a><a name="EN-US_CLIREF_0000001176056088"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">trust 8021p</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001176056088__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">trust 8021p</span></b> command enables BA classification based on the 802.1p value on an interface.</p>
<p>The <b><span class="cmdname">undo trust 8021p</span></b> command disables BA classification based on the 802.1p value on an interface.</p>
</p>
<p>By default, BA classification based on the 802.1p value is not enabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001176056088__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">

<p><b><span class="cmdname">trust </span></b>{ <strong><span>8021p</span></strong> | <strong><span>inner-8021p</span></strong> | <strong><span>outer-8021p</span></strong> } [ <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> ]</p>

<p><b><span class="cmdname">undo trust </span></b>{ <strong><span>8021p</span></strong> | <strong><span>inner-8021p</span></strong> | <strong><span>outer-8021p</span></strong> } [ <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> ]</p>




</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001176056088__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>8021p</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the 802.1p field of packets which is need to map to the internal priorities.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inner-8021p</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the inner-8021p field of packets which is need to map to the internal priorities.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>outer-8021p</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the outer-8021p field of packets which is need to map to the internal priorities.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the inbound interface which enables BA classification.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>outbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the outbound interface which enables BA classification.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001176056088__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view, </span><span>10G LAN interface view, </span><span>10G WAN interface view, </span><span>EVC view of a 10GE interface, </span><span>400GE interface view, </span><span>40GE interface view, </span><span>50GE interface view, </span><span>50|100GE interface view, </span><span>BAS interface view, </span>EVC view, <span>Eth-Trunk interface view, </span><span>FlexE interface view, </span>GE optical interface view, GE sub-interface view, GE electrical interface view, <span>Global-VE layer2 subinterface view, </span><span>Global VE interface view, </span><span>PW-VE sub-interface view, </span><span>PW-VE interface view, </span><span>Remote-AP interface view, </span><span>Vbridge interface view, </span><span>VE layer2 subinterface view, </span><span>VE sub-interface view, </span>EVC view of an Eth-Trunk interface, EVC view of an Ethernet interface, EVC view of a GE interface, Bridge domain view, <span>Port extension sub-interface view, </span><span>Port extension interface view</span></p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001176056088__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001176056088__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">qos</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001176056088__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>After the <b><span class="cmdname">trust 8021p</span></b> command is run on an interface, the device maps the 802.1p value of packets into the internal priority when the interface functions as the inbound interface, and maps the internal priority of packets into the 8021.p value when the interface functions as the outbound interface.<p></p>
If the inbound and outbound parameters are not specified, the command takes effect on both inbound and outbound interface traffic.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p>Before running this command on an interface, you need to run the <b><span class="cmdname">trust upstream</span></b> command to bind a DS domain to the interface. Otherwise, the configuration cannot take effect.</p>
<p><strong>Precautions</strong></p>
<p><p>The trust 8021p inbound command is mutually exclusive with the qos default-service-class command.<p></p>
The inner-8021p and outer-8021p parameters are not supported on global-VE and PW-VE interfaces.<p></p>
The inner-8021p and outer-8021p parameters are not supported on VBridge interfaces.<p></p>
This configuration is supported by global VE sub-interfaces rather than global VE interfaces.</p>

<p>If only the <b><span class="cmdname">trust 8021p</span></b> command is run, the function does not take effect. You also need to run the <b><span class="cmdname">trust upstream</span></b> command for the function to take effect.<p></p>
After the configuration is complete, packets enter queues based on the 802.1p value in the outer VLAN tag when entering the interface, and the queue priorities are reversely mapped to the 802.1p values in the inner and outer VLAN tags when packets leave the interface. The mapping in the user-defined DS domain is trusted.</p>

<p>The dot1q-tunnel and access interfaces add tags to untagged packets before sending them to queues. If the <b><span class="cmdname">trust 8021p</span></b> command is configured on the interface, packets enter the BE queue based on the original packet priority.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001176056088__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable BA classification based on the 802.1p value on <span>GE</span> <span>4/0/0</span>.1.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>diffserv domain d1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dsdomain-d1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>GigabitEthernet</span><span>4/0/0</span>.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>4/0/0</span>.1] <strong>trust upstream d1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>4/0/0</span>.1] <strong>trust 8021p</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Class-based_QoS_Configuration_Commands_title.html">Class-based QoS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/traffic-policy-action_car_disable.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/trust_8021p_remote.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>