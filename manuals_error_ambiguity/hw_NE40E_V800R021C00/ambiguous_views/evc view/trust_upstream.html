
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="trust upstream">
<meta name="DC.subject" content="trust upstream">
<meta name="keywords" content="trust upstream">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Class-based_QoS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/trust_8021p_vlan_remote.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/trust_upstream_default.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_QOS">
<meta name="DC.Creator" content="SUBSYS_ID_QOS">
<meta name="Platform" content="8090-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="cWX1082228">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001176534540">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>trust upstream</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001176534540"></a><a name="EN-US_CLIREF_0000001176534540"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">trust upstream</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001176534540__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">trust upstream</span></b> command binds a DS domain to an interface to support BA classification and modify the priorities of IP packets and MPLS packets.</p>
<p>The <b><span class="cmdname">undo trust upstream</span></b> command unbinds a DS domain from an interface.</p>
</p>
<p>By default, no DS domain is bound to an interface.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001176534540__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">


<p><b><span class="cmdname">trust upstream </span></b>{ <strong><span>5p3d</span></strong> | <i><span class="varname">ds-domain-name</span></i> | <strong><span>default</span></strong> } [ <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> ]</p>

<p><b><span class="cmdname">undo trust upstream </span></b>[ <strong><span>inbound</span></strong> | <strong><span>outbound</span></strong> ]</p>


<p><b><span class="cmdname">trust upstream </span></b>{ <i><span class="varname">ds-domain-name</span></i> | <strong><span>default</span></strong> }</p>

<p><b><span class="cmdname">undo trust upstream</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001176534540__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">ds-domain-name</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the name of a DS domain. A DS domain consists of a group of connected DS nodes that provide the same service policy and implement the same PHB set.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is a string of 1 to 48 case-sensitive characters.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>default</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the default DS domain, which is predefined in the system.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>


<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>5p3d</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the 5p3d DS domain, which is predefined in the system.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>inbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the inbound direction of a interface which the DS domain is bound.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>outbound</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the outbound direction of a interface which the DS domain is bound.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001176534540__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p><span>100GE interface view, </span><span>10G LAN interface view, </span><span>10G WAN interface view, </span><span>EVC view of a 10GE interface, </span><span>25GE interface view, </span><span>400GE interface view, </span><span>50GE interface view, </span><span>50|100GE interface view, </span>EVC view, Eth-Trunk Layer 2 sub-interface view, Eth-Trunk sub-interface view, <span>Eth-Trunk interface view, </span><span>FlexE interface view, </span>GE electrical interface view, <span>GMPLS-UNI interface view, </span><span>Global MP-group interface view, </span><span>Global-VE layer2 subinterface view, </span><span>Global VE sub-interface view, </span><span>IP-Trunk interface view, </span><span>MP-group interface view, </span><span>MTI interface view, </span><span>POS interface view, </span><span>PW-VE sub-interface view, </span><span>PW-VE interface view, </span><span>POS-Trunk interface view, </span><span>Remote-AP interface view, </span><span>Trunk serial interface view, </span>Tunnel interface view, <span>VE layer2 subinterface view, </span><span>VE sub-interface view, </span><span>Serial interface view, </span>Layer 2 sub-interface view, EVC view of an Ethernet interface, EVC view of a GE interface, Bridge domain view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001176534540__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001176534540__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">qos</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001176534540__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>To configure the traffic policy based on BA classification on an interface (such as the priorities of IP packets and MPLS packets), you can configure a DS domain on the interface and configure the mappings between priorities and DS domains.<p></p>
You can specify inbound or outbound to have the command take effect for only incoming or outgoing packets. If neither inbound nor outbound is specified, the command takes effect for both incoming and outgoing packets. If the inbound parameter is specified, the priority fields, dscp, exp, 8021p, configured in the DS domain is mapped to the internal priorities (queue, color) for the inbound interface traffic. If the outbound parameter is specified, the internal priorities (queue, color) configured in the DS domain is mapped to the priority fields, dscp, exp, 8021p, for the outbound interface traffic.</p>
</p>
<p><strong>Prerequisites</strong></p>
<p>The DS domain specified by ds-domain-name has been created.</p>
<p><strong>Precautions</strong></p>
<p><p>After a physical interface is added to a trunk interface, BA classification is not supported on the physical interface.<p></p>
The command cannot be configured on VLANIF interface.<p></p>
Packets enter queues based on the DSCP value in the outer VLAN tag when entering the interface, and the queue priority is reversely mapped to the DSCP value when packets leave the interface. The mapping in the user-defined DS domain is trusted.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001176534540__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Bind a DS domain to <span>GE</span> <span>3/0/0</span>.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>diffserv domain 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dsdomain-1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface <span>GigabitEthernet</span><span>3/0/0</span></strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-<span>GigabitEthernet</span><span>3/0/0</span>] <strong>trust upstream 1</strong>
</pre>
</div>

<div class="p"># Bind a DS domain to Eth-Trunk 10.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>diffserv domain t1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-dsdomain-t1] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>interface eth-trunk 10</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-Eth-Trunk10] <strong>trust upstream t1</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Class-based_QoS_Configuration_Commands_title.html">Class-based QoS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/trust_8021p_vlan_remote.html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/trust_upstream_default.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>