
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="vpn-target (EVPN)">
<meta name="DC.subject" content="vpn-target (EVPN)">
<meta name="keywords" content="vpn-target (EVPN)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_EVPN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/evpn-vpn-orf(BGPEVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vpws-df-election(EVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_EVPNOM">
<meta name="DC.Creator" content="SUBSYS_ID_EVPNOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001246211991">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>vpn-target (EVPN)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001246211991"></a><a name="EN-US_CLIREF_0000001246211991"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">vpn-target (EVPN)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001246211991__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">vpn-target</span></b> command configures VPN targets for an EVPN instance.</p>
<p>The <b><span class="cmdname">undo vpn-target</span></b> command deletes the VPN targets configured for an EVPN instance.</p>
</p>
<p>By default, no VPN targets are configured for an EVPN instance.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001246211991__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">vpn-target </span></b>{ <i><span class="varname">vpn-target</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRtType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target </span></b>{ <i><span class="varname">vpn-target</span></i> } &amp;&lt;1-8&gt; [ <i><span class="varname">vrfRtType</span></i> ]</p>

<p><b><span class="cmdname">undo vpn-target all</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001246211991__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vpn-target</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies a VPN target to be configured for a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The format of a VPN target can be as follows:</p>
<ul><li>2-byte AS number:4-byte user-defined number, for example, 1:3. An AS number is an integer ranging from 0 to 65535, and a user-defined number is an integer ranging from 0 to 4294967295. The AS and user-defined numbers cannot be both 0s. This means that a VPN target cannot be 0:0.</li><li>Integral 4-byte AS number:2-byte user-defined number, for example, 65537:3. An AS number is an integer ranging from 65536 to 4294967295, and a user-defined number is an integer ranging from 0 to 65535.</li><li>4-byte AS number in dotted notation:2-byte user-defined number, for example, 0.0:3 or 0.1:0. A 4-byte AS number in dotted notation is in the format of x.y, where x and y are integers ranging from 0 to 65535. A user-defined number is an integer ranging from 0 to 65535. The AS and user-defined numbers cannot be both 0s. This means that a VPN target cannot be 0.0:0.</li><li>32-bit IP address:2-byte user-defined number. For example, 192.168.122.15:1. An IP address ranges from 0.0.0.0 to 255.255.255.255, and a user-defined number is an integer ranging from 0 to 65535.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><i><span class="varname">vrfRtType</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Adds a VPN target to the VPN target list of a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><div class="p"><p>The value is an enumerated type:</p>
<ul><li>both: adds a VPN target to both the import and export VPN target lists of a VPN instance IPv4 address family. If both, export-extcommunity, and import-extcommunity are not configured in the vpn-target command, a VPN target is added to both lists by default.</li><li>export-extcommunity: adds a VPN target to the export VPN target list of a VPN instance IPv4 address family.</li><li>import-extcommunity: adds a VPN target to the import VPN target list of a VPN instance IPv4 address family.</li></ul>
</div>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>all</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Deletes all the VPN targets of a VPN instance IPv4 address family.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001246211991__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>B-EVPN instance view, BD-EVPN instance view, EVPN instance view, VPWS-EVPN instance view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001246211991__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001246211991__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">bgp</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001246211991__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>When a PE advertises EVPN routes to other PEs, the PE attaches all the local export VPN targets to these routes. After a PE receives EVPN routes, the PE matches export VPN targets carried in these routes against the local import VPN target list and imports these routes to the local EVPN instance routing table only if at least one export VPN target matches one import VPN target.<p></p>
One <b><span class="cmdname">vpn-target</span></b> command configures a maximum of eight VPN targets. To configure more VPN targets, run the <b><span class="cmdname">vpn-target</span></b> command several times.</p>
<p><strong>Prerequisites</strong></p>
<p>An RD has been configured for the EVPN instance using the <b><span class="cmdname">route-distinguisher</span></b> command.</p>
<p><strong>Configuration Impact</strong></p>
<p>If you do not configure this command, a PE cannot import received EVPN routes to its local EVPN instance routing table.<p></p>
After all the VPN targets of an EVPN instance are deleted using the <b><span class="cmdname">undo vpn-target</span></b> command, all EVPN routes learned by the EVPN instance from other EVPN instances will be deleted.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001246211991__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure both the import and export VPN targets as 5:5 for an EVPN instance.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>evpn vpn-instance evpn1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>route-distinguisher 22:1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>vpn-target 5:5 both</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_EVPN_Configuration_Commands_title.html">EVPN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/evpn-vpn-orf(BGPEVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/vpws-df-election(EVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>