
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="nexthop recursive-lookup restrain disable (EVPN instance view)">
<meta name="DC.subject" content="nexthop recursive-lookup restrain disable (EVPN instance view)">
<meta name="keywords" content="nexthop recursive-lookup restrain disable (EVPN instance view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_EVPN_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/evpn-relay-delay-disable(BGPEVPNOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/nexthop-recursive-lookup-restrain-global(EVPNOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_EVPNOM">
<meta name="DC.Creator" content="SUBSYS_ID_EVPNOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001201292112">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>nexthop recursive-lookup restrain disable (EVPN instance view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001201292112"></a><a name="EN-US_CLIREF_0000001201292112"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">nexthop recursive-lookup restrain disable (EVPN instance view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001201292112__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">nexthop recursive-lookup restrain disable</span></b> command disables EVPN instance recursion suppression in case of next hop flapping.</p>
<p>The <b><span class="cmdname">undo nexthop recursive-lookup restrain disable</span></b> command enables EVPN instance recursion suppression in case of next hop flapping.</p>
</p>
<p>By default, EVPN instance recursion suppression in case of next hop flapping is enabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001201292112__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">nexthop recursive-lookup restrain disable</span></b></p>

<p><b><span class="cmdname">undo nexthop recursive-lookup restrain disable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001201292112__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001201292112__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>B-EVPN instance view, BD-EVPN instance view, EVPN instance view, VPWS-EVPN instance view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001201292112__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001201292112__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">bgp</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001201292112__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p><p>If a large number of EVPN routes recurse to the same next hop that flaps frequently, the system will be busy processing changes of these routes, which consumes excessive system resources and leads to high CPU usage. To address this problem, configure EVPN recursion suppression in case of next hop flapping. If you do not care about whether the system is busy processing route selection and advertisement and the possible high CPU usage, run the nexthop recursive-lookup restrain disable command to disable EVPN recursion suppression in case of next hop flapping.</p>
</p>
<p><strong>Precautions</strong></p>
<p><p>The nexthop recursive-lookup restrain disable command can be run in the Global EVPN configuration view and EVPN instance view. Running this command in the Global EVPN configuration view disables the function in all EVPN instances. Running this command in a specified EVPN instance disables the function only in the specified EVPN instance. For an EVPN instance, EVPN recursion suppression in case of next hop flapping can take effect only when this function is enabled in both the Global EVPN configuration view and the EVPN instance view.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001201292112__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Disable EVPN instance recursion suppression in case of next hop flapping.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>evpn vpn-instance evpn1 b-evpn</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>nexthop recursive-lookup restrain disable</strong>
&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>evpn vpn-instance evpn1 vpws</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>nexthop recursive-lookup restrain disable</strong>
&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>evpn vpn-instance evpn1 bd-mode</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>nexthop recursive-lookup restrain disable</strong>
&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>evpn vpn-instance evpn1</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-evpn-instance-evpn1] <strong>nexthop recursive-lookup restrain disable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_EVPN_Configuration_Commands_title.html">EVPN Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/evpn-relay-delay-disable(BGPEVPNOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/nexthop-recursive-lookup-restrain-global(EVPNOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>