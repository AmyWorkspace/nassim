
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="color">
<meta name="DC.subject" content="color">
<meta name="keywords" content="color">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_Congestion_Avoidance_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/display_ls-port-queue_configuration.html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_QOS">
<meta name="DC.Creator" content="SUBSYS_ID_QOS">
<meta name="Platform" content="8090-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="cWX1082228">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001176374422">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>color</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001176374422"></a><a name="EN-US_CLIREF_0000001176374422"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">color</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001176374422__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">color</span></b> command sets the upper threshold, lower threshold (both in percentage), and drop percentage in WRED for packets in different colors.</p>
<p>The <b><span class="cmdname">undo color</span></b> command restores the default settings.</p>
</p>
<p>By default, the lower and upper thresholds percentage and discarding percentage are 100 percent, which means the tail drop.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001176374422__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">color </span></b>{ <strong><span>green</span></strong> | <strong><span>yellow</span></strong> | <strong><span>red</span></strong> } <strong><span>low-limit</span></strong> <i><span class="varname">low-limit-percentage</span></i> <strong><span>high-limit</span></strong> <i><span class="varname">high-limit-percentage</span></i> <strong><span>discard-percentage</span></strong> <i><span class="varname">discard-percentage</span></i></p>


<p><b><span class="cmdname">undo color </span></b>{ <strong><span>green</span></strong> | <strong><span>yellow</span></strong> | <strong><span>red</span></strong> }</p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001176374422__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>green</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the packets colored green.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>yellow</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the packets colored yellow.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>red</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the packets colored red.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>low-limit</span></strong> <i><span class="varname">low-limit-percentage</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the lower threshold (in percentage) for WRED dropping. It is the proportion of the value of the lower threshold for packet discarding to the length of the flow queue.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 100 (in percentage). The default value is 100.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>high-limit</span></strong> <i><span class="varname">high-limit-percentage</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the upper threshold (in percentage) for WRED dropping. It is the proportion of the value of the upper threshold for packet discarding to the length of the flow queue.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 0 to 100 (in percentage). It must be greater than or equal to the lower threshold. The default value is 100.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>discard-percentage</span></strong> <i><span class="varname">discard-percentage</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum discard percentage when the queue length is between the lower threshold and the upper threshold.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer that ranges from 1 to 100. The default value is 100.</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001176374422__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>Flow queue WRED view, Port queue WRED view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001176374422__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001176374422__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">qos</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001176374422__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>Severe congestion is extremely harmful to network resources and therefore it must be solved. When traffic congestion intensifies, WRED can be used to proactively drop packets to prevent network overload.<p></p>
When traffic congestion occurs, queues start to buffer packets. Red packets are first dropped due to low lower threshold and high drop probability. As the queue length increases, the device drops green packets at last. If the queue length reaches the upper threshold of a color, packets of this color start to be tail dropped.<p></p>
WFQ queues share bandwidth based on the weight and are prone to traffic congestion. Using WRED for WFQ queues effectively resolves TCP global synchronization when traffic congestion occurs.</p>
<p><strong>Precautions</strong></p>
<div class="p"><p>A WRED template can process packets of a maximum of three colors, namely, red, yellow, and green. The drop percentage of green packets is usually set to a small value whereas the upper threshold and the lower threshold are usually set to larger values. The drop percentage of red packets is set to a larger value whereas the upper threshold and lower threshold are set to small values. The values of yellow packets are between those of the preceding colors of packets.</p>

<ul><li>When the percentage of the actual length of a queue over the length of a FQ is less than the low limit percentage, the system does not drop packets.</li><li>When the percentage of the actual length of a queue over the length of a FQ is between the low limit percentage and the high limit percentage, the system drops packets through the WRED mechanism. The longer the queue length, the higher the drop probability.</li><li>When the percentage of the actual length of a queue over the length of a FQ is greater than the high limit percentage, the system drops all subsequent packets.<p></p>
By default, the system uses a template with the upper threshold being 100, the lower threshold being 100, and the drop percentage being 100. The default template is called a tail-drop template.<p></p>
It is recommended that you configure a WRED object for a flow queue of a different service type.<p></p>
NOTE:<p></p>
If the WRED threshold is too low, packets may be discarded because the configured queuing buffer is insufficient when burst traffic occurs. The WRED threshold needs to be consistent with the bandwidth configured by users. Using the default configuration of the system is recommended.</li></ul>
</div>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001176374422__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Set the lower threshold to 20, the upper threshold to 60, and the drop percentage to 30 for green packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>flow-wred test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-flow-wred-test] <strong>color green low-limit 20 high-limit 60 discard-percentage 30</strong>
</pre>
</div>

<div class="p"># Set&middot;the&middot;lower&middot;threshold&middot;to&middot;20,&middot;the&middot;upper&middot;threshold&middot;to&middot;60,&middot;and&middot;the&middot;drop&middot;percentage&middot;to&middot;30&middot;for&middot;green&middot;packets.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>port-wred test</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-port-wred-test] <strong>color green low-limit 20 high-limit 60 discard-percentage 30</strong>
</pre>
</div>


</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_Congestion_Avoidance_Configuration_Commands_title.html">Congestion Avoidance Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/display_ls-port-queue_configuration.html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>