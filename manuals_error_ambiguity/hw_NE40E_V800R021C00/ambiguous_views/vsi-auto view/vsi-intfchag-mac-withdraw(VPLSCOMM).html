
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="interface-status-change mac-withdraw enable">
<meta name="DC.subject" content="interface-status-change mac-withdraw enable">
<meta name="keywords" content="interface-status-change mac-withdraw enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_VPLS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vpls-ldp-pwName-ifParaType-vccv(VPLSLDP).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/intfchag-mac-withdraw(VPLSLDP).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_VPLSCOMM">
<meta name="DC.Creator" content="SUBSYS_ID_VPLSCOMM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001245852023">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>interface-status-change mac-withdraw enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001245852023"></a><a name="EN-US_CLIREF_0000001245852023"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">interface-status-change mac-withdraw enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001245852023__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">interface-status-change mac-withdraw enable</span></b> command configures PEs to send LDP MAC Withdraw messages to all peers when the status of the AC interface bound to the VSI changes.</p>
<p>The <b><span class="cmdname">undo interface-status-change mac-withdraw enable</span></b> command disables PEs from sending LDP MAC Withdraw messages to all peers when the status of the AC interface bound to the VSI changes.</p>
</p>
<p>By default, a VSI does not send LDP MAC Withdraw messages.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001245852023__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">interface-status-change </span></b>[ <strong><span>up</span></strong> | <strong><span>down</span></strong> ] <strong><span>mac-withdraw</span></strong> <strong><span>enable</span></strong></p>

<p><b><span class="cmdname">undo interface-status-change </span></b>[ <strong><span>up</span></strong> | <strong><span>down</span></strong> ] <strong><span>mac-withdraw</span></strong> <strong><span>enable</span></strong></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001245852023__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>up</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures a PE to send MAC Withdraw messages with the 0x404 TLV type to all peers when the bound AC interface goes Up.</p>
<p>After a peer receives a MAC Withdraw message with the 0x404 TLV type, it clears MAC addresses in the VSI.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>down</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Configures a PE to send MAC Withdraw messages with the 0x406 TLV type to all peers when the bound AC interface goes Down.</p>
<p>After a peer receives a MAC Withdraw message with the 0x406 TLV type, it clears MAC addresses learned by the VSI over a specific PW.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001245852023__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-BD view, VSI-BVSI view, VSI-DEFAULT view, VSI-IVSI-P2P view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001245852023__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001245852023__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2vpn</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001245852023__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<div class="p"><p>By default, when the status of an AC interface on a PE changes, the PE does not send MAC Withdraw messages to its peers. As a result, its peers are unaware of the fact that the CE connecting to that AC interface is unreachable. Subsequently, traffic bound to the CE gets lost before MAC addresses in the VSI age out. To solve this problem, run the<p></p>
interface-status-change mac-withdraw enable command. Then, when the AC interface status changes, the PE sends a MAC Withdraw message to all its peers. After a peer receives the MAC Withdraw message, it clears MAC addresses in the VSI based on the MAC Withdraw message type.</p>

<ul><li>When the status of an AC interface changes from Up to Down or an AC interface in the Up state leaves a VSI, the PE sends MAC Withdraw messages with the 0x406 TLV type to its peers. Upon receipt, a peer clears the MAC addresses learned over the specified PW from the VSI.</li><li>When the status of an AC interface changes from Down to Up or an AC interface in the Up state joins a VSI, the PE sends MAC Withdraw messages with the 0x404 TLV type to its peers. Upon receipt, a peer clears MAC addresses in the VSI.</li></ul>
</div>
<p><strong>Precautions</strong></p>
<p><p>This command takes effect only after the mac-withdraw enable command is also used.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001245852023__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable the function to send LDP MAC Withdraw messages to all peers when the status of the AC interface bound to the VSI changes.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi v1 static</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-v1] <strong>pwsignal ldp</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-v1-ldp] <strong>interface-status-change mac-withdraw enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_VPLS_Configuration_Commands_title.html">VPLS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/vpls-ldp-pwName-ifParaType-vccv(VPLSLDP).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/intfchag-mac-withdraw(VPLSLDP).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>