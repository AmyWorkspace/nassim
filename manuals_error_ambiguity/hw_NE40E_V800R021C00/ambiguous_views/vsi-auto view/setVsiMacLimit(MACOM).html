
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="mac-limit (VSI-IVSI-BEVPNINTERWORK view)">
<meta name="DC.subject" content="mac-limit (VSI-IVSI-BEVPNINTERWORK view)">
<meta name="keywords" content="mac-limit (VSI-IVSI-BEVPNINTERWORK view)">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_MAC_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/setVlanMacLimit(MACOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/setPwMacLimit(MACOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_MACOM">
<meta name="DC.Creator" content="SUBSYS_ID_MACOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001201131072">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>mac-limit (VSI-IVSI-BEVPNINTERWORK view)</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001201131072"></a><a name="EN-US_CLIREF_0000001201131072"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">mac-limit (VSI-IVSI-BEVPNINTERWORK view)</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001201131072__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">mac-limit up-threshold down-threshold</span></b> command sets the threshold percentage of MAC addresses that have alarms generated and cleared.</p>
<p>The <b><span class="cmdname">undo mac-limit up-threshold down-threshold</span></b> command deletes the preceding setting.</p>
<p>The <b><span class="cmdname">mac-limit</span></b> command configures a MAC address learning limit rule for the current VSI.</p>
<p>The <b><span class="cmdname">undo mac-limit</span></b> command deletes a MAC address learning limit rule configured for the current VSI.</p>
</p>
<p>By default, the threshold percentage of MAC addresses that have alarms generated and cleared is not set.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001201131072__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">mac-limit </span></b>{ <strong><span>maximum</span></strong> <i><span class="varname">max</span></i> [ <strong><span>rate</span></strong> <i><span class="varname">hours</span></i> ] | <strong><span>action</span></strong> { <strong><span>discard</span></strong> | <strong><span>forward</span></strong> } } <sup>*</sup></p>

<p><b><span class="cmdname">mac-limit up-threshold </span></b><i><span class="varname">up-threshold</span></i> <strong><span>down-threshold</span></strong> <i><span class="varname">down-threshold</span></i></p>


<p><b><span class="cmdname">undo mac-limit</span></b></p>

<p><b><span class="cmdname">undo mac-limit up-threshold </span></b><i><span class="varname">up-threshold</span></i> <strong><span>down-threshold</span></strong> <i><span class="varname">down-threshold</span></i></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001201131072__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.1">Parameter</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.2">Description</th>
<th valign="bottom" align="left" id="mcps1.3.3.1.1.3">Value</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>maximum</span></strong> <i><span class="varname">max</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the maximum number of MAC address entries that can be learned.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 0 to 2048000.</p>
<p>When the value is 0, the number of MAC addresses that can be learned is not set.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>rate</span></strong> <i><span class="varname">hours</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Indicates the interval at which MAC addresses are learned.</p>
<p>The parameter must be configured when configuring the global MAC address learning limit rule.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p><p>The value is an integer ranging from 0 to 1000, in milliseconds.</p>
<p>When the value is 0, no limitation is set on the address learning interval.</p>
</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>action</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies an action to be taken when the number of MAC address entries in the MAC address table reaches the limit.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>discard</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The packet with the source MAC address not contained in the MAC address table is discarded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>forward</span></strong></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>The packet with the source MAC address not contained in the MAC address table is forwarded but its MAC address is not recorded.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>-</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>up-threshold</span></strong> <i><span class="varname">up-threshold</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the upper alarm threshold for the number of MAC addresses. This value indicates the percentage of the number of learned MAC addresses to the maximum number of MAC addresses that can be learned during alarm generation.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 100.</p>
</td>
</tr>

<tr>
<td valign="top" headers="mcps1.3.3.1-type"><strong><span>down-threshold</span></strong> <i><span class="varname">down-threshold</span></i></td>
<td valign="top" headers="mcps1.3.3.1-desc">
<p><p>Specifies the lower alarm threshold for the number of MAC addresses. This value indicates the percentage of the number of learned MAC addresses to the maximum number of MAC addresses that can be learned during alarm clearing. downPercent must be smaller than upPercent.</p>
</p>

</td>
<td valign="top" headers="mcps1.3.3.1-value"><p>The value is an integer ranging from 1 to 100.</p>
</td>
</tr>




</table></div>

</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001201131072__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-DEFAULT view, VSI-IVSI-BEVPNINTERWORK view, VSI-STATIC view, VSI view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001201131072__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001201131072__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">mac</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001201131072__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>You can configure the number of MAC addresses that can be learned based on VSI to control the number of users accessing a VSI. When the number of learned MAC addresses exceeds the limit, no more MAC addresses are learned to prevent MAC address attacks. To improve network security, you can run this command to specify the percentage of the number of learned MAC addresses to the maximum number of MAC addresses that can be learned. When the number of learned MAC addresses exceeds the upper alarm threshold, an alarm is generated. When the number of learned MAC addresses falls below the lower alarm threshold, an alarm is cleared.</p>
<p><strong>Prerequisites</strong></p>
<p>Before running this command, ensure that the <b><span class="cmdname">mac-limit</span></b> command has been run to set the maximum number of MAC addresses that can be learned in a specified VSI.</p>
<p><strong>Precautions</strong></p>
<p>If mac-limit up-threshold down-threshold command has been configured, you cannot delete the mac-limit configuration or execute the mac-limit maximum 0 command. Instead, you must first run the undo mac-limit up-threshold up-threshold down-threshold down-threshold command to cancel the configured threshold percentage of the number of MAC addresses that generates or clears a alarm.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001201131072__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Configure VSI1 to learn a maximum of 100 MAC addresses, to generate a threshold alarm when the number of learned MAC addresses exceeds 80% of the maximum number of MAC addresses that can be learned, and to clear the threshold alarm when this value falls below 60%.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls lsr-id 1.1.1.1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi 1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-1] <strong>mac-limit maximum 100</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-1] <strong>mac-limit up-threshold 80 down-threshold 60</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_MAC_Configuration_Commands_title.html">MAC Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/setVlanMacLimit(MACOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/setPwMacLimit(MACOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>