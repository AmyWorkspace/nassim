
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="local-mac remove all-from-me">
<meta name="DC.subject" content="local-mac remove all-from-me">
<meta name="keywords" content="local-mac remove all-from-me">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_VPLS_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vsi-mac-remove-mode(VPLSCOMM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/vsi-mac-address-aging-time(VPLSCOMM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_VPLSCOMM">
<meta name="DC.Creator" content="SUBSYS_ID_VPLSCOMM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001246212011">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>local-mac remove all-from-me</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001246212011"></a><a name="EN-US_CLIREF_0000001246212011"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">local-mac remove all-from-me</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001246212011__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">local-mac remove all-from-me</span></b> command enables the function of configuring a VSI to clear the MAC address of only the PW in a received MAC Withdraw message carrying 0x404 TLV but remain the MAC addresses of the other PWs and AC interfaces.</p>
<p>The <b><span class="cmdname">undo local-mac remove all-from-me</span></b> command restores the default setting.</p>
</p>
<p>By default, when a VSI receives a MAC Withdraw message carrying 0x404 TLV, it deletes the MAC addresses of all PWs and AC interfaces.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001246212011__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">local-mac remove all-from-me</span></b></p>

<p><b><span class="cmdname">undo local-mac remove all-from-me</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001246212011__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001246212011__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>VSI-AUTO view, VSI-DEFAULT view, VSI-STATIC view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001246212011__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001246212011__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">l2vpn</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001246212011__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>In the scenario where a CE accesses an L2VPN network, when the AC between the CE and its connected PE becomes faulty frequently, the PE will send a MAC Withdraw message carrying 0x404 TLV to the remote PE to clear the MAC addresses learned by the VSI. In this way, traffic is re-broadcast and re-converged. If an interface flaps frequently, the PE will generate a large number of MAC Withdraw messages. After receiving these messages, the VSI of the remote PE will frequently clear MAC address information. If the VSI has many PWs, traffic will be broadcast for a long period, wasting device bandwidth. To resolve the issue, run the local-mac remove all-from-me command. Then the PE will clear the MAC address of the PW carried in a received MAC Withdraw message.</p>
<p><strong>Precautions</strong></p>
<p><p>The command takes effect only when the device receives a MAC Withdraw message carrying 0x404 TLV, but not MAC Withdraw messages carrying other types of TLVs besides 0x404 TLV or MAC Withdraw messages in other formats.</p>
</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001246212011__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Access the VSI view and configure a PE to clear the MAC address of only the PW in a received MAC Withdraw message carrying 0x404 TLV but remain the MAC addresses of the other PWs and AC interfaces.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>mpls</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-mpls] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>mpls l2vpn</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-l2vpn] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>vsi vsi1</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-vsi-vsi1] <strong>local-mac remove all-from-me</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_VPLS_Configuration_Commands_title.html">VPLS Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/vsi-mac-remove-mode(VPLSCOMM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/vsi-mac-address-aging-time(VPLSCOMM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>