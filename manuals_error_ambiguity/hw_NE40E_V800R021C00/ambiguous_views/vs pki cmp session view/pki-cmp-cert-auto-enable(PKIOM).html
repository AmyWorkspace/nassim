
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-us" xml:lang="en-us">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="certificate auto-update enable">
<meta name="DC.subject" content="certificate auto-update enable">
<meta name="keywords" content="certificate auto-update enable">
<meta name="product" content="">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/dc_PKI_Configuration_Commands_title.html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/pki-attribute-group-attribute-ip(PKIOM).html">
<meta name="DC.Relation" scheme="URI" content="../../command/8090/cert-request-entity-name(PKIOM).html">
<meta name="prodname" content="">
<meta name="version" content="">
<meta name="brand" content="Product Documentation-V8R21C00">
<meta name="DC.Creator" content="">
<meta name="DC.Publisher" content="20220226">
<meta name="Owner" content="SUBSYS_ID_PKIOM">
<meta name="DC.Creator" content="SUBSYS_ID_PKIOM">
<meta name="Platform" content="VRP-V800R021C00">
<meta name="IA" content="">
<meta name="SE" content="">
<meta name="TE" content="">
<meta name="LASTMODIFIER" content="hKF77426">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="EN-US_CLIREF_0000001176056702">
<meta name="DC.Language" content="en-us">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/commonltr.css">
<link rel="stylesheet" type="text/css" href="../../public_sys-resources/mediaQuery.css">
<script language="javascript" type="text/javascript" src="../../public_sys-resources/browseVersion.js"></script>
<title>certificate auto-update enable</title>

<style type="text/css">
			<!--	pre.screen,pre.codeblock{
					word-wrap:break-word;
					word-break:break-all;
					white-space:pre-wrap !important;
				}-->
		</style>
</head>
<body><a name="EN-US_CLIREF_0000001176056702"></a><a name="EN-US_CLIREF_0000001176056702"></a>

<div class="articleBoxWithoutHead">

<h1 class="topicTitle-h1">certificate auto-update enable</h1>


<div>
<div class="clifunc"><a name="EN-US_CLIREF_0000001176056702__1.3.1"></a><a name="1.3.1"></a><h2 class="sectiontitle">Function</h2>
<div class="clifuncbody">
<p><p>The <b><span class="cmdname">certificate auto-update enable</span></b> command enables the CMPv2 automatic certificate update function.</p>
<p>The <b><span class="cmdname">undo certificate auto-update enable</span></b> command disables the function.</p>
</p>
<p>By default, the CMPv2 automatic certificate update function is disabled.</p>

</div></div>

<div class="cliformat"><a name="EN-US_CLIREF_0000001176056702__1.3.2"></a><a name="1.3.2"></a><h2 class="sectiontitle">Format</h2>
<div class="cliformatbody">
<p><b><span class="cmdname">certificate auto-update enable</span></b></p>

<p><b><span class="cmdname">undo certificate auto-update enable</span></b></p>

</div></div>

<div class="cliparam"><a name="EN-US_CLIREF_0000001176056702__1.3.3"></a><a name="1.3.3"></a><h2 class="sectiontitle">Parameters</h2>
<div class="cliparambody">
None
</div></div>

<div class="cliview"><a name="EN-US_CLIREF_0000001176056702__1.3.4"></a><a name="1.3.4"></a><h2 class="sectiontitle">Views</h2>
<div class="cliviewbody">
<p>PKI CMP session view, VS PKI CMP session view</p>

</div></div>

<div class="clidefaultlevel"><a name="EN-US_CLIREF_0000001176056702__1.3.5"></a><a name="1.3.5"></a><h2 class="sectiontitle">Default Level</h2>
<div class="clidefaultlevelbody">
<p>2: Configuration level</p>

</div></div>

<div class="clitasknameandoper"><a name="EN-US_CLIREF_0000001176056702__1.3.6"></a><a name="1.3.6"></a><h2 class="sectiontitle">Task Name and Operations</h2>
<div class="clitasknameandoperbody">
<div class="tableBorder"><table cellpadding="4" cellspacing="0" summary="">
<tr>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.1">Task Name</th>
<th valign="bottom" align="left" id="mcps1.3.6.1.1.2">Operations</th>
</tr>
<tr>
<td valign="top" headers="mcps1.3.6.1-type">pki</td>
<td valign="top" headers="mcps1.3.6.1-value">write</td>
</tr>

</table></div>

</div></div>

<div class="clidesc"><a name="EN-US_CLIREF_0000001176056702__1.3.7"></a><a name="1.3.7"></a><h2 class="sectiontitle">Usage Guidelines</h2>
<div class="clidescbody">
<p><strong>Usage Scenario</strong></p>
<p>A certificate authority (CA) specifies the validity period of a certificate before issuing the certificate. If a certificate has expired, the certificate cannot be used.</p>
<p><strong>Configuration Impact</strong></p>
<p><p>After the certificate auto-update enable command is executed, the device automatically initiates a certificate update request and determines whether to create a new RSA key pair based on the certificate update expire-time command configuration. After the device obtains a new certificate, it uses the new certificate and RSA key pair to replace the original ones. The certificate in the CF card, certificate in the memory, and certificate used for IKE negotiation are all replaced.</p>
</p>
<p><strong>Precautions</strong></p>
<p>After you run the certificate auto-update enable command on a device, the device checks existing certificate-related configurations. If the conditions for updating certificates are met, the command can be executed. If the conditions are not met, the device displays a prompt message.</p>

</div></div>

<div class="cliexample"><a name="EN-US_CLIREF_0000001176056702__1.3.8"></a><a name="1.3.8"></a><h2 class="sectiontitle">Example</h2>
<div class="cliexamplebody">

<div class="p"># Enable CMPv2 automatic certificate update.<pre class="screen">&lt;<span class="keyword">HUAWEI</span>&gt; <strong>system-view</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>rsa pki local-key-pair key-a create</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki entity entitya</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-entitya] <strong>common-name DeviceA</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-entitya] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki domain domaina</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina] <strong>pki cmp session session-a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request entity entitya</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request rsa local-key-pair key-a regenerate</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request ca-name "/C=cn/ST=beijing/L=shangdi/O=BB/OU=BB/CN=AB"</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request server url http://172.16.73.168:8080</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request authentication-cert cert-a.cer</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina] <strong>pki cmp initial-request</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina] <strong>quit</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>] <strong>commit</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate local filename session-a_ir.cer</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki import-certificate ca filename session-a_ca0.cer</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>] <strong>pki domain domaina</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina] <strong>pki cmp session session-a</strong>
[<span class="keyword">*</span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>cmp request authentication-cert session-a_ir.cer</strong>
[<span class="keyword"><font style="font-size:8pt" Face="Courier New" >~</font></span><span class="keyword">HUAWEI</span>-pki-domaina-pki-cmp-session-a] <strong>certificate auto-update enable</strong>
</pre>
</div>

</div></div>

</div>


</div>
<div class="footerNavBar clearfix">

<div class="parentlink">
Parent Topic:
<a href="../../command/8090/dc_PKI_Configuration_Commands_title.html">PKI Configuration Commands
</a>
</div>
<div class="copyrightBottomBar">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="copyrightBottomBar_responsive">
Copyright &copy; Huawei Technologies Co., Ltd.</div>
<div class="bottomNavBtn clearfix">
<a href="../../command/8090/pki-attribute-group-attribute-ip(PKIOM).html"><span class="font-st">&lt; </span>Previous topic</a>
<a href="../../command/8090/cert-request-entity-name(PKIOM).html">Next topic<span class="font-st"> &gt;</span></a>
</div>
</div>
</body>
</html>